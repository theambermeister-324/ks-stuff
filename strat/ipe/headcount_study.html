<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IPE GTM Detailed Planning - Role Profiles, Budget & Risk Mitigation</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .icon { width: 16px; height: 16px; display: inline-block; vertical-align: middle; }
  </style>
</head>
<body>
  <div id="app" class="min-h-screen bg-slate-50">
    <!-- Header -->
    <div class="bg-gradient-to-r from-slate-900 to-slate-800 text-white p-6">
      <div class="max-w-6xl mx-auto">
        <p class="text-emerald-400 text-sm font-semibold mb-2">IPE GTM DETAILED PLANNING</p>
        <h1 class="text-2xl font-bold mb-2">Role Profiles, Budget & Risk Mitigation</h1>
        <p class="text-slate-300 text-sm mb-4">Current Baseline: 1 FDE, 1 Pre-Sales SE, 1 CX Partner delivering Legacy Knapsack (Starting HC: 3)</p>
        
        <!-- Scenario Selector -->
        <div class="flex gap-2" id="scenario-selector"></div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="bg-white border-b sticky top-0 z-10">
      <div class="max-w-6xl mx-auto flex gap-1 p-2" id="tabs-nav"></div>
    </div>

    <div class="max-w-6xl mx-auto p-6">
      <!-- Content Sections -->
      <div id="content-sections"></div>
    </div>
  </div>

  <script>
    // State management
    let state = {
      activeTab: 'roles',
      activeScenario: '9m',
      expandedRole: null
    };

    // Icon helper
    function getIcon(name, size = 16) {
      const icons = {
        users: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>',
        'dollar-sign': '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>',
        'trending-up': '<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',
        'alert-triangle': '<path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',
        'check-circle-2': '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',
        clock: '<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',
        'bar-chart-3': '<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',
        'arrow-right': '<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',
        target: '<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',
        shield: '<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',
        calendar: '<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',
        'chevron-down': '<polyline points="6 9 12 15 18 9"></polyline>',
        'chevron-right': '<polyline points="9 18 15 12 9 6"></polyline>',
        code: '<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',
        layers: '<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>',
        'message-square': '<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',
        briefcase: '<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',
        'user-check': '<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',
        award: '<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',
        'building-2': '<path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path><path d="M6 12h16"></path><path d="M6 6h4"></path><path d="M6 18h4"></path><path d="M10 10h4"></path><path d="M10 14h4"></path><path d="M10 22h4"></path>',
        'file-text': '<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',
      };
      return `<svg class="icon" style="width: ${size}px; height: ${size}px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">${icons[name] || ''}</svg>`;
    }

    // Data
    const tabs = [
      { id: 'gates', label: 'Gated Roadmap', icon: 'target' },
      { id: 'roles', label: 'Role Profiles', icon: 'users' },
      { id: 'budget', label: 'Quarterly Budget', icon: 'dollar-sign' },
      { id: 'timeline', label: 'Hiring Timeline', icon: 'calendar' },
      { id: 'risks', label: 'Risk Mitigation', icon: 'shield' },
      { id: 'raci', label: 'Governance (RACI)', icon: 'file-text' },
      { id: 'forecast', label: 'Pipeline Forecast', icon: 'bar-chart-3' },
    ];

    const scenarios = {
      '6m': { label: '$6M', color: 'slate', target: 6000000 },
      '9m': { label: '$9M', color: 'emerald', target: 9000000 },
      '12m': { label: '$12M', color: 'violet', target: 12000000 },
    };

    const roleProfiles = [
      {
        id: 'fde',
        title: 'Forward-Deployed Engineer (FDE)',
        aka: 'Senior Solution Analyst',
        icon: 'code',
        category: 'Services Delivery',
        salary: { base: 160000, ote: 185000, loaded: 240000 },
        billRate: 550,
        hires: { '6m': 2, '9m': 4, '12m': 5 },
        priority: 'Critical',
        rampTime: '3 months',
        utilization: '75%',
        description: 'Owns technical implementation, architecture decisions, and code quality. Primary delivery resource for J2/J3 engagements. The binding constraint on services capacity.',
        responsibilities: [
          'Lead technical implementation of Knapsack platform',
          'Design system architecture and integration patterns',
          'Code review and quality assurance',
          'Client-facing technical workshops and training',
          'MCP integration and AI workflow implementation',
          'Documentation and knowledge transfer'
        ],
        requirements: [
          '7+ years full-stack development experience',
          'Design system architecture expertise (Figma, Storybook, component libraries)',
          'Enterprise integration experience (APIs, SSO, CI/CD)',
          'Strong client-facing and communication skills',
          'Experience with React, TypeScript, Node.js',
          'Bonus: Financial services or healthcare background'
        ],
        successMetrics: [
          'Implementation quality score > 95%',
          'On-time delivery rate > 90%',
          'Client satisfaction (CSAT) > 4.5/5',
          'Utilization rate ‚â• 75%',
          'Knowledge articles published: 2/quarter'
        ],
        interviewProcess: [
          'Recruiter screen (30 min)',
          'Technical assessment - take-home (2-3 hrs)',
          'Technical deep-dive with Engineering (60 min)',
          'System design interview (60 min)',
          'Client scenario roleplay with CX Partner (45 min)',
          'Executive conversation with CEO (30 min)'
        ],
        hiringSource: ['LinkedIn Recruiter', 'Design systems community', 'Figma/Storybook conferences', 'Employee referrals'],
      },
      {
        id: 'pse',
        title: 'Pre-Sales Solutions Engineer (SE)',
        aka: 'Pre-Sales SE',
        icon: 'layers',
        category: 'GTM',
        salary: { base: 140000, ote: 160000, loaded: 210000 },
        billRate: null,
        hires: { '6m': 1, '9m': 2, '12m': 3 },
        priority: 'High',
        rampTime: '2 months',
        utilization: 'N/A',
        description: 'Pre-sales technical partner who supports investment path selection, deployment tiering, and technical feasibility. Consulted by CX Partner/Engagement Lead and FDEs to reduce execution risk before kickoff.',
        responsibilities: [
          'Support investment path selection with solution feasibility analysis',
          'Advise on deployment tier determination and risk tradeoffs',
          'Partner with FDEs on technical feasibility and integration constraints',
          'Shape scope, assumptions, and readiness criteria for phase gates',
          'Run technical discovery, demos, and solution walkthroughs',
          'Document solution approaches and handoff artifacts'
        ],
        requirements: [
          '7+ years in solutions engineering, technical pre-sales, or architecture',
          'Experience with enterprise integration, SSO, APIs, and security reviews',
          'Ability to translate customer goals into feasible delivery scope',
          'Strong discovery, demo, and stakeholder communication skills',
          'Comfort partnering with FDEs and CX Partner on deal shaping',
          'Bonus: Design systems or developer tooling background'
        ],
        successMetrics: [
          'Deployment tier decisions completed within 5 business days',
          'Feasibility assessments completed pre-SOW for 100% of J3 deals',
          'Pre-sale risk flags resolved before kickoff > 90%',
          'Win rate contribution on supported opportunities > 25%',
          'Handoff quality rating from delivery team > 4.5/5'
        ],
        interviewProcess: [
          'Recruiter screen (30 min)',
          'Technical discovery walkthrough (45 min)',
          'Solution design exercise (60 min)',
          'Mock demo and objection handling (45 min)',
          'Executive conversation with CEO (30 min)'
        ],
        hiringSource: ['Enterprise solutions engineering', 'DevTools pre-sales', 'Consulting technical leads', 'Industry referrals'],
      },
      {
        id: 'deploy',
        title: 'Deployment Specialist (Partner)',
        aka: 'Security & Infrastructure Partner',
        icon: 'shield',
        category: 'Partner Roles',
        salary: { base: null, ote: null, loaded: null },
        billRate: null,
        hires: { '6m': 0, '9m': 0, '12m': 0 },
        priority: 'High',
        rampTime: 'N/A',
        utilization: 'N/A',
        description: 'Delivery partner for D3/D4 customers. Owns Phase 0 deployment and security readiness to unblock Phase 1-3 execution.',
        responsibilities: [
          'Lead Phase 0 deployment planning for D3/D4 accounts',
          'Design security architecture and network connectivity',
          'Implement SSO/SCIM and enterprise access controls',
          'Coordinate vendor security reviews and questionnaires',
          'Guide penetration testing and compliance attestations',
          'Provide deployment handoff package to delivery team'
        ],
        requirements: [
          '7+ years in enterprise infrastructure or security engineering',
          'Experience with private cloud, VPC, and on-prem deployments',
          'SSO/SCIM implementation experience (Okta, Azure AD, etc.)',
          'Familiarity with SOC2, ISO 27001, and vendor security reviews',
          'Strong documentation and cross-functional coordination skills',
          'Bonus: SaaS security or regulated industry background'
        ],
        successMetrics: [
          'Phase 0 exit criteria met on schedule',
          'Security review approval on first pass',
          'Zero critical findings in pen test',
          'Deployment handoff quality > 4.5/5',
          'Phase 1 kickoff within 2 weeks of Phase 0 close'
        ],
        interviewProcess: [
          'Partner qualification screen (30 min)',
          'Security architecture review (60 min)',
          'Deployment scenario exercise (60 min)',
          'Reference checks (2)',
          'Executive approval (30 min)'
        ],
        hiringSource: ['Security consulting firms', 'Cloud infrastructure partners', 'Enterprise SSO specialists', 'Compliance advisory firms'],
      },
      {
        id: 'cxp',
        title: 'CX Partner',
        aka: 'Customer Experience Partner',
        icon: 'message-square',
        category: 'Services Delivery',
        salary: { base: 120000, ote: 140000, loaded: 165000 },
        billRate: 600,
        hires: { '6m': 0, '9m': 1, '12m': 1 },
        priority: 'Medium',
        rampTime: '2 months',
        utilization: '65%',
        description: 'Owns customer relationship, expansion strategy, and engagement success. Bridge between delivery and commercial. Drives account growth and renewal.',
        responsibilities: [
          'Own customer relationship and success outcomes',
          'Lead expansion and upsell opportunities',
          'Coordinate cross-functional delivery teams',
          'Executive stakeholder management',
          'Renewal and contract negotiations',
          'Voice of customer feedback loops'
        ],
        requirements: [
          '5+ years in customer success, account management, or consulting',
          'Enterprise B2B SaaS experience',
          'Strong commercial acumen and negotiation skills',
          'Executive communication and presence',
          'Experience managing $500K+ accounts',
          'Bonus: Design/product background'
        ],
        successMetrics: [
          'Net Revenue Retention > 120%',
          'Expansion rate > 30% of book',
          'Client health score > 80',
          'Renewal rate > 95%',
          'Executive sponsor engagement: Monthly'
        ],
        interviewProcess: [
          'Recruiter screen (30 min)',
          'Experience deep-dive (60 min)',
          'Account strategy case study (45 min)',
          'Renewal negotiation roleplay (30 min)',
          'Executive conversation (30 min)'
        ],
        hiringSource: ['SaaS customer success leaders', 'Consulting alumni', 'Enterprise account managers'],
      },
      {
        id: 'pm',
        title: 'Project Manager',
        aka: 'Delivery Manager',
        icon: 'file-text',
        category: 'Partner Roles',
        salary: { base: 115000, ote: 140000, loaded: 185000 },
        billRate: 400,
        hires: { '6m': 2, '9m': 2, '12m': 3 },
        priority: 'High',
        rampTime: '1 month',
        utilization: '80%',
        description: 'Partner PM owns delivery execution, timeline management, and resource coordination. Essential for complex engagements that require 400-600 PM hours each.',
        responsibilities: [
          'Project planning and timeline management',
          'Resource allocation and capacity planning',
          'Client communication and status reporting',
          'Risk identification and mitigation',
          'Budget tracking and margin management',
          'Process improvement and documentation'
        ],
        requirements: [
          '5+ years project/program management experience',
          'Professional services or consulting background',
          'PMP or similar certification preferred',
          'Experience with enterprise software implementations',
          'Strong communication and stakeholder management',
          'Proficiency in project management tools'
        ],
        successMetrics: [
          'On-time delivery > 90%',
          'Budget variance < 10%',
          'Client satisfaction > 4.5/5',
          'Resource utilization optimization',
          'Risk mitigation effectiveness'
        ],
        interviewProcess: [
          'Recruiter screen (30 min)',
          'Experience review (45 min)',
          'Project scenario case study (60 min)',
          'Team collaboration interview (30 min)',
          'Executive conversation (30 min)'
        ],
        hiringSource: ['Professional services firms', 'SaaS implementation teams', 'Consulting companies'],
      },
      {
        id: 'csm',
        title: 'Account Manager',
        aka: 'AM',
        icon: 'user-check',
        category: 'GTM',
        salary: { base: 100000, ote: 130000, loaded: 150000 },
        billRate: null,
        hires: { '6m': 1, '9m': 1, '12m': 2 },
        priority: 'Medium',
        rampTime: '2 months',
        utilization: 'N/A',
        description: 'Owns post-sale account health, adoption, and retention. Manages 12 accounts per AM. Identifies expansion opportunities and coordinates with CX Partners.',
        responsibilities: [
          'Customer onboarding and adoption',
          'Health monitoring and intervention',
          'Quarterly business reviews',
          'Renewal preparation and support',
          'Expansion opportunity identification',
          'Product feedback aggregation'
        ],
        requirements: [
          '3+ years account management or customer success experience',
          'B2B SaaS background required',
          'Strong analytical and communication skills',
          'Experience with CRM/CS platforms (Salesforce, Gainsight, ChurnZero)',
          'Ability to manage 10-15 accounts effectively'
        ],
        successMetrics: [
          'Gross retention > 90%',
          'NPS > 50',
          'Health score maintenance > 80',
          'QBR completion rate 100%',
          'Expansion pipeline contribution'
        ],
        interviewProcess: [
          'Recruiter screen (30 min)',
          'Experience review (45 min)',
          'Customer scenario roleplay (30 min)',
          'Team interview (30 min)'
        ],
        hiringSource: ['Enterprise account management', 'SaaS CS teams', 'Account management roles'],
      },
      {
        id: 'ae',
        title: 'Account Executive',
        aka: 'AE',
        icon: 'briefcase',
        category: 'GTM',
        salary: { base: 120000, ote: 240000, loaded: 275000 },
        billRate: null,
        hires: { '6m': 0, '9m': 1, '12m': 2 },
        priority: 'Medium',
        rampTime: '4 months',
        utilization: 'N/A',
        description: 'Owns new logo acquisition and expansion deals. Manages 6-8 qualified opportunities per quarter. Closes $150-300K average deal size.',
        responsibilities: [
          'New logo prospecting and qualification',
          'Discovery and needs assessment',
          'Solution presentation and demo',
          'Proposal development and negotiation',
          'Contract closure and handoff',
          'Pipeline management and forecasting'
        ],
        requirements: [
          '5+ years enterprise B2B sales experience',
          '$500K+ annual quota achievement',
          'Experience selling to design/engineering/product',
          'Consultative selling approach',
          'Strong discovery and qualification skills',
          'Bonus: Design systems or DevTools background'
        ],
        successMetrics: [
          'Quota attainment > 100%',
          'Win rate > 25%',
          'Average deal size > $150K',
          'Pipeline coverage > 3x',
          'Sales cycle < 90 days'
        ],
        interviewProcess: [
          'Recruiter screen (30 min)',
          'Sales experience deep-dive (60 min)',
          'Mock discovery call (45 min)',
          'Mock demo/pitch (45 min)',
          'Executive conversation (30 min)'
        ],
        hiringSource: ['Enterprise SaaS sales', 'DevTools/design tools', 'Professional services sales'],
      },
      {
        id: 'bdr',
        title: 'Business Development Rep',
        aka: 'BDR/SDR',
        icon: 'target',
        category: 'GTM',
        salary: { base: 60000, ote: 90000, loaded: 115000 },
        billRate: null,
        hires: { '6m': 2, '9m': 1, '12m': 1 },
        priority: 'Low',
        rampTime: '2 months',
        utilization: 'N/A',
        description: 'Generates qualified pipeline for AE team. Targets 20 MQLs per month. Focus on outbound prospecting to ICP accounts.',
        responsibilities: [
          'Outbound prospecting and cold outreach',
          'Inbound lead qualification',
          'Account research and personalization',
          'Meeting scheduling and handoff',
          'CRM hygiene and reporting',
          'ICP refinement feedback'
        ],
        requirements: [
          '1-2 years sales or BD experience',
          'Strong written and verbal communication',
          'Persistence and resilience',
          'CRM proficiency (Salesforce/HubSpot)',
          'Research and personalization skills',
          'Interest in design/product/engineering space'
        ],
        successMetrics: [
          'MQLs generated > 20/month',
          'SQL conversion > 30%',
          'Activity metrics (calls, emails)',
          'Pipeline contribution',
          'AE satisfaction'
        ],
        interviewProcess: [
          'Recruiter screen (20 min)',
          'Experience/motivation review (30 min)',
          'Cold call roleplay (15 min)',
          'Team interview (30 min)'
        ],
        hiringSource: ['Entry-level sales programs', 'University recruiting', 'BDR bootcamps'],
      },
    ];

    const quarterlyBudget = {
      '6m': {
        q1: { hires: ['FDE #2', 'PM #1'], cost: 106250, revenue: 400000, cumHC: 5, notes: 'Foundation capacity (starting: 1 FDE, 1 Pre-Sales SE, 1 CXP)' },
        q2: { hires: ['Account Manager #1', 'BDR #1'], cost: 87500, revenue: 800000, cumHC: 7, notes: 'Scale delivery' },
        q3: { hires: ['PM #2', 'BDR #2'], cost: 75000, revenue: 1400000, cumHC: 9, notes: 'Support growth' },
        q4: { hires: [], cost: 0, revenue: 2000000, cumHC: 9, notes: 'Optimize' },
      },
      '9m': {
        q1: { hires: ['FDE #2', 'PM #1'], cost: 106250, revenue: 600000, cumHC: 5, notes: 'Critical foundation (starting: 1 FDE, 1 Pre-Sales SE, 1 CXP)' },
        q2: { hires: ['FDE #3', 'Pre-Sales SE #2', 'Account Manager #1', 'AE #1'], cost: 217500, revenue: 1500000, cumHC: 9, notes: 'Scale capacity' },
        q3: { hires: ['FDE #4', 'PM #2'], cost: 106250, revenue: 2800000, cumHC: 11, notes: 'Full delivery' },
        q4: { hires: ['BDR #1', 'CXP #2'], cost: 87500, revenue: 4500000, cumHC: 13, notes: 'Expansion mode' },
      },
      '12m': {
        q1: { hires: ['FDE #2', 'FDE #3', 'PM #1', 'PM #2'], cost: 212500, revenue: 800000, cumHC: 7, notes: 'Aggressive ramp (starting: 1 FDE, 1 Pre-Sales SE, 1 CXP)' },
        q2: { hires: ['FDE #4', 'Pre-Sales SE #2', 'Pre-Sales SE #3', 'AE #1'], cost: 231250, revenue: 2200000, cumHC: 11, notes: 'Full team' },
        q3: { hires: ['FDE #5', 'FDE #6', 'Account Manager #1', 'Account Manager #2'], cost: 195000, revenue: 4500000, cumHC: 15, notes: 'Scale operations' },
        q4: { hires: ['AE #2', 'BDR #1', 'PM #3'], cost: 151250, revenue: 7500000, cumHC: 18, notes: 'Full capacity' },
      },
    };

    const riskMitigation = [
      {
        risk: 'FDE Hiring Failure',
        severity: 'Critical',
        probability: 'Medium',
        impact: 'Cannot deliver J3 engagements. Revenue at risk.',
        mitigation: [
          'Start recruiting in Q4 2025 for Q1 starts',
          'Build contractor bench as backup (2-3 vetted contractors)',
          'Offer signing bonuses and competitive equity',
          'Leverage employee referral program ($10K bonus)',
          'Partner with specialized recruiters (design systems focus)'
        ],
        contingency: 'Pause new J3 sales if capacity unavailable. Shift mix to J4 expansion.',
        owner: 'Head of Engineering + HR',
        color: 'rose'
      },
      {
        risk: 'J3 Concentration Risk',
        severity: 'High',
        probability: 'Medium',
        impact: 'J3 = 60-75% of services revenue. Single account slip impacts plan.',
        mitigation: [
          'Diversify engagement mix‚Äîincrease J4 expansion focus',
          'Phase-gate all J3 deals with clear exit criteria',
          'Require executive sponsor + engineering owner before kickoff',
          'Monthly account health reviews with early warning system',
          'Build J2 Sprint capacity for quick wins'
        ],
        contingency: 'Accelerate J4 pipeline if J3 slips. Have 2x J4 opportunities in reserve.',
        owner: 'CX Partner + Sales',
        color: 'amber'
      },
      {
        risk: 'Ramp Time Delays',
        severity: 'Medium',
        probability: 'High',
        impact: 'New hires at 50% productivity for 3 months. Delivery backlog.',
        mitigation: [
          'Build comprehensive onboarding program (30-60-90 day plan)',
          'Assign mentor/buddy for each new hire',
          'Create self-service learning resources and documentation',
          'Shadow existing engagements before leading',
          'Hire ahead of demand‚ÄîQ1 hires for Q2 capacity'
        ],
        contingency: 'Use contractors to bridge ramp gaps. Delay new engagement starts if needed.',
        owner: 'Delivery Lead + HR',
        color: 'amber'
      },
      {
        risk: 'Services Margin Compression',
        severity: 'Medium',
        probability: 'High',
        impact: 'Margin at 15-22% vs 70% target. Cash flow pressure.',
        mitigation: [
          'Value-based pricing‚Äînever quote hourly rates',
          'Tier pricing by urgency (premium for fast timelines)',
          'Increase J4 mix (higher margin, lower FDE intensity)',
          'Offshore/nearshore leverage for non-client-facing work',
          'Productize repeatable deliverables to reduce hours'
        ],
        contingency: 'Accept lower margin in growth phase. Model break-even at scale.',
        owner: 'Finance + CX Partner',
        color: 'blue'
      },
      {
        risk: 'Pipeline Shortfall',
        severity: 'Medium',
        probability: 'Medium',
        impact: 'Not enough qualified opportunities to hit new logo targets.',
        mitigation: [
          'BDR hire in Q1 for pipeline generation',
          'Marketing investment in content and events',
          'Partner channel development (SI partnerships)',
          'Customer referral program',
          'Targeted ABM campaigns to ICP accounts'
        ],
        contingency: 'Shift revenue mix to expansion if new logos slow. Accelerate J4.',
        owner: 'Sales + Marketing',
        color: 'blue'
      },
      {
        risk: 'Key Person Dependency',
        severity: 'High',
        probability: 'Low',
        impact: 'Loss of critical team member disrupts delivery.',
        mitigation: [
          'Cross-train team members on key accounts',
          'Document tribal knowledge and processes',
          'Competitive retention packages for key performers',
          'Build redundancy in critical roles',
          'Succession planning for leadership positions'
        ],
        contingency: 'Contractor backfill while recruiting replacement. Redistribute accounts.',
        owner: 'Leadership Team',
        color: 'amber'
      },
    ];

    const raciDecisions = [
      {
        decision: 'Investment Path Selection',
        authority: 'CX Partner / Engagement Lead',
        consulted: ['AE', 'Pre-Sales SE', 'FDE'],
      },
      {
        decision: 'Deployment Tier Determination',
        authority: 'CX Partner / Engagement Lead',
        consulted: ['Pre-Sales SE', 'FDE', 'Security'],
      },
      {
        decision: 'Technical Feasibility',
        authority: 'FDE',
        consulted: ['Pre-Sales SE', 'PM'],
      },
      {
        decision: 'Timeline & Milestones',
        authority: 'PM',
        consulted: ['CX Partner / Engagement Lead', 'FDE'],
      },
      {
        decision: 'Scope & Engagement Health',
        authority: 'CX Partner / Engagement Lead',
        consulted: ['AE', 'PM'],
      },
      {
        decision: 'Phase Gate Approval',
        authority: 'CX Partner / Engagement Lead',
        consulted: ['FDE', 'PM'],
      },
      {
        decision: 'MCP Unlock Authorization',
        authority: 'CX Partner / Engagement Lead',
        consulted: ['FDE', 'Executive'],
      },
      {
        decision: 'Commercial Terms & Pricing',
        authority: 'AE',
        consulted: ['CX Partner / Engagement Lead', 'Finance'],
      },
      {
        decision: 'Escalation Resolution',
        authority: 'Executive',
        consulted: ['CX Partner / Engagement Lead', 'FDE'],
      },
    ];

    const forecastRollups = {
      potential: {
        platformArr: 39906000,
        fdeArr: 31537000,
        cxArr: 13071000,
        acvRecurring: 84509000,
        oneTimeFees: 16132000,
        tcvYear1: 100618000,
        attachPct: 0.5278491048290714
      },
      expected: {
        platformArr: 28857000,
        fdeArr: 22815000,
        cxArr: 9452000,
        acvRecurring: 61142000,
        oneTimeFees: 10351000,
        tcvYear1: 71479000,
        attachPct: 0.5277387066173825
      }
    };

    const tier1Companies = [
      'Atlassian', 'Datadog', 'Figma', 'HubSpot', 'MongoDB', 'Salesforce', 'ServiceNow',
      'Twilio', 'Workday', 'Zendesk', 'BlackRock', 'Fidelity Investments', 'JPMorgan Chase',
      'PayPal', 'Plaid', 'Robinhood', 'Square/Block', 'Stripe', 'Elevance Health (Anthem)',
      'Johnson & Johnson', 'Pfizer', 'UnitedHealth Group', 'DoorDash', 'Instacart',
      'Shopify', 'Target', 'Wayfair'
    ];

    const tier1Rollup = {
      platformArrPotential: 14802000
    };

    const tier1CompanyData = [
      { company: 'Atlassian', journey: 'J2', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.25 },
      { company: 'BlackRock', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Datadog', journey: 'J3', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'DoorDash', journey: 'J3', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Elevance Health (Anthem)', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Fidelity Investments', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Figma', journey: 'J3', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'HubSpot', journey: 'J3', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Instacart', journey: 'J3', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'JPMorgan Chase', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Johnson & Johnson', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'MongoDB', journey: 'J3', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'PayPal', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Pfizer', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Plaid', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Robinhood', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Salesforce', journey: 'J2', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.25 },
      { company: 'ServiceNow', journey: 'J3', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Shopify', journey: 'J2', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.25 },
      { company: 'Square/Block', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Stripe', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Target', journey: 'J3', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Twilio', journey: 'J2', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.25 },
      { company: 'UnitedHealth Group', journey: 'J3', deployment: 'Private Cloud (Customer-managed VPC)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Wayfair', journey: 'J3', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.5 },
      { company: 'Workday', journey: 'J2', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.25 },
      { company: 'Zendesk', journey: 'J2', deployment: 'SaaS (Dedicated Single-Tenant)', needsSecurity: true, cxPmo: 0.25 },
    ];

    const journeyPodDefaults = {
      J1: { fde: 0.25, cx: 0.1, pm: 0.1 },
      J2: { fde: 1.0, cx: 0.25, pm: 0.25 },
      J3: { fde: 1.0, cx: 0.5, pm: 0.5 },
      J4: { fde: 0.5, cx: 0.25, pm: 0.25 },
    };

    function deploymentSpecialistFte(model) {
      if (!model) return 0;
      if (model.includes('Private Cloud')) return 1.0;
      if (model.includes('On-prem')) return 1.0;
      if (model.includes('Dedicated')) return 0.5;
      return 0.25;
    }

    const forecastAssumptions = [
      { label: 'Tier scope', value: 'Tier 1 Target Accounts only (Master sheet)' },
      { label: 'Allocation', value: 'Tier 1 platform ARR allocated evenly across Tier 1 targets' },
      { label: 'ACV definition', value: 'Recurring only = Platform + required FDE + CX PMO' },
      { label: 'Attach rate', value: 'Uses overall attach % from model rollups' },
      { label: 'Rounding', value: 'All forecast dollars rounded to nearest $1,000' },
    ];

    // Helper functions
    function fmt(n) {
      if (n === null || n === undefined) return 'N/A';
      return n >= 1000000 ? `$${(n/1000000).toFixed(2)}M` : n >= 1000 ? `$${Math.round(n/1000)}K` : `$${n}`;
    }

    function setActiveTab(tab) {
      state.activeTab = tab;
      render();
    }

    function setActiveScenario(scenario) {
      state.activeScenario = scenario;
      render();
    }

    function toggleRole(roleId) {
      state.expandedRole = state.expandedRole === roleId ? null : roleId;
      render();
    }

    // Render functions
    function renderScenarioSelector() {
      const container = document.getElementById('scenario-selector');
      container.innerHTML = Object.entries(scenarios).map(([k, s]) => `
        <button onclick="setActiveScenario('${k}')" class="px-4 py-2 rounded-lg text-sm font-medium transition-all ${
          state.activeScenario === k 
            ? 'bg-white text-slate-900' 
            : 'bg-white/10 text-white hover:bg-white/20'
        }">
          ${s.label} Scenario
        </button>
      `).join('');
    }

    function renderTabs() {
      const container = document.getElementById('tabs-nav');
      container.innerHTML = tabs.map(t => `
        <button onclick="setActiveTab('${t.id}')" class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${
          state.activeTab === t.id 
            ? 'bg-emerald-100 text-emerald-700' 
            : 'text-slate-600 hover:bg-slate-100'
        }">
          ${getIcon(t.icon, 16)}
          ${t.label}
        </button>
      `).join('');
    }

    function renderContent() {
      const container = document.getElementById('content-sections');
      let html = '';

      // Gated Roadmap Tab
      if (state.activeTab === 'gates') {
        html = `
          <div class="space-y-6">
            <div class="bg-gradient-to-r from-slate-900 to-slate-800 text-white rounded-xl p-6">
              <p class="text-emerald-400 text-sm font-semibold mb-2">CEO DECISION FRAMEWORK</p>
              <h2 class="text-xl font-bold mb-3">Gated Execution Roadmap: Hire Into Proof, Not Plans</h2>
              <p class="text-slate-300 text-sm leading-relaxed">
                We will not "hire into a plan." We will hire into validated proof that J3 is repeatable, 
                partner-augmentable, and supported by real pipeline‚Äîusing hard gates that prevent over-hiring 
                and protect margin and delivery quality.
              </p>
            </div>
            <div class="bg-white rounded-xl border p-5">
              <h3 class="font-semibold mb-4">Three Sequential Validations</h3>
              <div class="grid grid-cols-3 gap-4">
                <div class="rounded-xl border-2 border-emerald-300 bg-emerald-50 p-4">
                  <div class="flex items-center gap-2 mb-2">
                    <div class="w-8 h-8 rounded-full bg-emerald-600 text-white flex items-center justify-center font-bold text-sm">1</div>
                    <h4 class="font-semibold text-emerald-800">Gate 1: J3 Proof</h4>
                  </div>
                  <p class="text-sm text-emerald-700">Can we deliver J3 Foundation predictably, on-budget, with repeatable outcomes (not heroics)?</p>
                </div>
                <div class="rounded-xl border-2 border-blue-300 bg-blue-50 p-4">
                  <div class="flex items-center gap-2 mb-2">
                    <div class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm">2</div>
                    <h4 class="font-semibold text-blue-800">Contractors/Partners</h4>
                  </div>
                  <p class="text-sm text-blue-700">Can we offload 40‚Äì50% of Phase 0 (D3/D4) and J1/J4 work (plus select hybrid J3) without quality, margin, or PMO overhead blowing up?</p>
                </div>
                <div class="rounded-xl border-2 border-violet-300 bg-violet-50 p-4">
                  <div class="flex items-center gap-2 mb-2">
                    <div class="w-8 h-8 rounded-full bg-violet-600 text-white flex items-center justify-center font-bold text-sm">3</div>
                    <h4 class="font-semibold text-violet-800">Pipeline Reality</h4>
                  </div>
                  <p class="text-sm text-violet-700">Do we have enough qualified J3 demand to justify 3‚Äì4 concurrent J3s and the related staffing?</p>
                </div>
              </div>
            </div>
            <div class="bg-white rounded-xl border p-5">
              <div class="flex items-center gap-2 mb-4">
                <div class="w-8 h-8 rounded-lg bg-emerald-100 flex items-center justify-center">
                  ${getIcon('check-circle-2', 18)}
                </div>
                <h3 class="font-semibold">Gate 1 "Repeatability" Criteria (Hard Pass/Fail)</h3>
              </div>
              <p class="text-sm text-slate-600 mb-4">Gate 1 is considered a PASS only if we meet <strong>both</strong> delivery and scalability thresholds:</p>
              <div class="grid grid-cols-2 gap-4">
                <div class="space-y-2">
                  ${[
                    { metric: 'FDE Hours', threshold: '‚â§ 360 total (‚â§12% variance from 320)', icon: 'clock' },
                    { metric: 'PMO Overhead', threshold: '‚â§ 20% of FDE hours', icon: 'file-text' },
                    { metric: 'Customer Independence', threshold: 'Executes core MCP workflows without Knapsack', icon: 'award' },
                    { metric: 'Artifacts Complete', threshold: 'Required deliverables + documentation', icon: 'file-text' },
                  ].map(item => `
                    <div class="flex items-start gap-3 p-3 bg-slate-50 rounded-lg">
                      ${getIcon(item.icon, 16)}
                      <div>
                        <p class="font-medium text-sm">${item.metric}</p>
                        <p class="text-xs text-slate-600">${item.threshold}</p>
                      </div>
                    </div>
                  `).join('')}
                </div>
                <div class="bg-rose-50 border border-rose-200 rounded-lg p-4">
                  <p class="text-sm font-semibold text-rose-800 mb-2">‚ö†Ô∏è Critical Rule</p>
                  <p class="text-sm text-rose-700 mb-3">
                    If we need <strong>hero performance</strong> to succeed, Gate 1 is treated as a <strong>FAIL</strong> for 
                    scaling purposes‚Äîeven if the customer is happy.
                  </p>
                  <div class="bg-white rounded p-3">
                    <p class="text-xs text-rose-600 font-semibold mb-1">Required Signal</p>
                    <p class="text-sm text-rose-800">Explicit "would buy again" sponsor confirmation</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="bg-white rounded-xl border p-5">
              <div class="flex items-center gap-2 mb-4">
                <div class="w-8 h-8 rounded-lg bg-amber-100 flex items-center justify-center">
                  ${getIcon('alert-triangle', 18)}
                </div>
                <h3 class="font-semibold">Contractor "Kill Switch" (Mid-April Go/No-Go)</h3>
              </div>
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Contractor Pilot is a FAIL if:</p>
                  <div class="space-y-2">
                    ${['20% rework required by Knapsack', 'Schedule slip > 3 days', 'Customer exec review dissatisfaction', 'PMO overhead higher than Knapsack-delivered baseline'].map(item => `
                      <div class="flex items-center gap-2 text-sm text-rose-700 bg-rose-50 p-2 rounded">
                        <span class="text-rose-500">‚úó</span> ${item}
                      </div>
                    `).join('')}
                  </div>
                </div>
                <div>
                  <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">If FAIL:</p>
                  <div class="bg-amber-50 border border-amber-200 rounded-lg p-4">
                    <p class="text-sm text-amber-800">
                      Stop scaling partners and shift to a narrower partner pool, offshore bench, or revised delivery design.
                    </p>
                    <p class="text-xs text-amber-600 mt-2 font-medium">
                      Decision point: Mid-April (not late Q2)
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-white rounded-xl border p-5">
                <div class="flex items-center gap-2 mb-4">
                  <div class="w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center">
                    ${getIcon('users', 18)}
                  </div>
                  <h3 class="font-semibold">J3 Concurrency Ceiling</h3>
                </div>
                <div class="space-y-3">
                  <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                    <span class="text-sm font-medium">Max J3 per FDE</span>
                    <span class="text-lg font-bold text-blue-700">1</span>
                  </div>
                  <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                    <span class="text-sm font-medium">Max concurrent J3 Foundations</span>
                    <span class="text-lg font-bold text-blue-700">3</span>
                  </div>
                  <p class="text-xs text-slate-600">
                    Cap lifts only after: 2 successful J3s delivered, hybrid J3 contractor pilot passes, PMO capacity confirmed
                  </p>
                  <div class="bg-slate-100 rounded p-2">
                    <p class="text-xs text-slate-600"><strong>Exception:</strong> Requires explicit exec approval</p>
                  </div>
                </div>
              </div>
              <div class="bg-white rounded-xl border p-5">
                <div class="flex items-center gap-2 mb-4">
                  <div class="w-8 h-8 rounded-lg bg-violet-100 flex items-center justify-center">
                    ${getIcon('trending-up', 18)}
                  </div>
                  <h3 class="font-semibold">FDE Hiring Velocity Cap</h3>
                </div>
                <div class="space-y-3">
                  <div class="flex items-center justify-between p-3 bg-violet-50 rounded-lg">
                    <span class="text-sm font-medium">Max new FDE per quarter</span>
                    <span class="text-lg font-bold text-violet-700">1</span>
                  </div>
                  <p class="text-xs text-slate-600 font-semibold">Exception requires ALL of:</p>
                  <div class="space-y-1">
                    ${['2 closed J3s', '‚â•60% utilization across existing FDEs', 'PMO bandwidth confirmed'].map(item => `
                      <div class="flex items-center gap-2 text-xs text-slate-700">
                        ${getIcon('check-circle-2', 12)} ${item}
                      </div>
                    `).join('')}
                  </div>
                  <div class="bg-violet-100 rounded p-2">
                    <p class="text-xs text-violet-700">Prevents scaling faster than enablement + delivery maturity</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="bg-white rounded-xl border p-5">
              <h3 class="font-semibold mb-4">Split $9M Into Two Bands (Reduces Cliff Risk)</h3>
              <div class="grid grid-cols-2 gap-4">
                <div class="rounded-xl border-2 border-emerald-400 bg-emerald-50 p-4">
                  <div class="flex items-center justify-between mb-2">
                    <h4 class="font-semibold text-emerald-800">Base+ Band</h4>
                    <span class="text-xl font-bold text-emerald-700">$8.0‚Äì$8.5M</span>
                  </div>
                  <p class="text-sm text-emerald-700 mb-3">High confidence once gates pass</p>
                  <div class="bg-white rounded-lg p-3">
                    <p class="text-xs text-emerald-600 font-semibold mb-1">Unlocks</p>
                    <p class="text-sm font-medium">4 FDEs total</p>
                  </div>
                </div>
                <div class="rounded-xl border-2 border-violet-400 bg-violet-50 p-4">
                  <div class="flex items-center justify-between mb-2">
                    <h4 class="font-semibold text-violet-800">Stretch Band</h4>
                    <span class="text-xl font-bold text-violet-700">$9.0‚Äì$9.5M</span>
                  </div>
                  <p class="text-sm text-violet-700 mb-3">Execution-sensitive</p>
                  <div class="bg-white rounded-lg p-3">
                    <p class="text-xs text-violet-600 font-semibold mb-1">Unlocks (only if signals sustain)</p>
                    <p class="text-sm font-medium">5th FDE</p>
                  </div>
                </div>
              </div>
              <p class="text-sm text-slate-600 mt-4">This reduces over-hiring pressure and improves margin stability.</p>
            </div>
            <div class="bg-slate-900 text-white rounded-xl p-5">
              <h3 class="font-semibold mb-4 flex items-center gap-2">
                ${getIcon('briefcase', 18)}<span class="text-emerald-400">CEO Decision Framework</span>
              </h3>
              <div class="grid grid-cols-3 gap-4">
                <div class="bg-emerald-500/20 rounded-lg p-4 border border-emerald-500/30">
                  <p class="text-emerald-400 text-xs font-semibold mb-2">‚úì APPROVE NOW (Q1 Foundation)</p>
                  <ul class="space-y-2 text-sm">
                    <li class="flex items-start gap-2">${getIcon('check-circle-2', 14)} FDE #2 + PM #1</li>
                    <li class="flex items-start gap-2">${getIcon('check-circle-2', 14)} Contractor identification (15‚Äì20 ‚Üí shortlist 2‚Äì3)</li>
                    <li class="flex items-start gap-2">${getIcon('check-circle-2', 14)} Pipeline mapping (100+ accounts, J1‚ÄìJ4)</li>
                  </ul>
                </div>
                <div class="bg-amber-500/20 rounded-lg p-4 border border-amber-500/30">
                  <p class="text-amber-400 text-xs font-semibold mb-2">‚è≥ CONDITIONAL (Q2 Validation)</p>
                  <p class="text-sm text-slate-300 mb-2">FDE #3 + Pre-Sales SE #1 only if:</p>
                  <ul class="space-y-1 text-xs text-slate-300">
                    <li>‚Ä¢ Gate 1 trending PASS at midpoint</li>
                    <li>‚Ä¢ Contractor pilot passes by mid-April</li>
                    <li>‚Ä¢ J3 pipeline ‚â• $1.0M (probability-weighted)</li>
                  </ul>
                </div>
                <div class="bg-violet-500/20 rounded-lg p-4 border border-violet-500/30">
                  <p class="text-violet-400 text-xs font-semibold mb-2">üîì EXPANSION (Q3/Q4 Scaling)</p>
                  <ul class="space-y-2 text-xs text-slate-300">
                    <li><strong class="text-white">FDE #4:</strong> Gate 1 PASS + pipeline supports concurrency</li>
                    <li><strong class="text-white">FDE #5:</strong> Tracking Stretch band + system proven to absorb volume</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-emerald-50 border border-emerald-200 rounded-xl p-5">
                <h3 class="font-semibold text-emerald-800 mb-3 flex items-center gap-2">
                  ${getIcon('check-circle-2', 18)} If All Gates Pass (End of 2026)
                </h3>
                <ul class="space-y-2 text-sm text-emerald-700">
                  <li class="flex items-start gap-2"><span>‚úì</span> 2‚Äì3 repeatable J3 Foundations delivered</li>
                  <li class="flex items-start gap-2"><span>‚úì</span> Partners delivering majority of Phase 0 (D3/D4) and J1/J4 with low oversight</li>
                  <li class="flex items-start gap-2"><span>‚úì</span> $8.0‚Äì$9.5M services achieved</li>
                  <li class="flex items-start gap-2"><span>‚úì</span> 25‚Äì29% blended margin</li>
                  <li class="flex items-start gap-2"><span>‚úì</span> Controlled burnout risk</li>
                  <li class="flex items-start gap-2"><span>‚úì</span> J3 Scale becomes 2027 growth lever (earned)</li>
                </ul>
              </div>
              <div class="bg-rose-50 border border-rose-200 rounded-xl p-5">
                <h3 class="font-semibold text-rose-800 mb-3 flex items-center gap-2">
                  ${getIcon('alert-triangle', 18)} If Any Gate Fails
                </h3>
                <ul class="space-y-2 text-sm text-rose-700">
                  <li class="flex items-start gap-2"><span>‚úó</span> We do NOT keep hiring into the failure</li>
                  <li class="flex items-start gap-2"><span>‚úó</span> Downgrade to $6‚Äì$7.5M plan</li>
                  <li class="flex items-start gap-2"><span>‚úó</span> Reallocate to GTM + assessment volume</li>
                  <li class="flex items-start gap-2"><span>‚úó</span> Fix failure mode (delivery, partners, or pipeline)</li>
                </ul>
                <div class="mt-4 bg-white rounded-lg p-3">
                  <p class="text-xs text-rose-600 font-semibold">Failure Modes to Diagnose:</p>
                  <p class="text-xs text-rose-700">Delivery (heroics required) ‚Ä¢ Partners (quality/overhead) ‚Ä¢ Pipeline (not enough J3 demand)</p>
                </div>
              </div>
            </div>
            <div class="bg-white rounded-xl border p-5">
              <h3 class="font-semibold mb-4 flex items-center gap-2">
                ${getIcon('arrow-right', 18)}<span class="text-emerald-600">Immediate Next Steps</span>
              </h3>
              <div class="grid grid-cols-3 gap-4">
                <div class="bg-emerald-50 rounded-lg p-4">
                  <p class="text-xs text-emerald-600 font-semibold mb-2">THIS WEEK</p>
                  <ul class="space-y-1 text-sm text-emerald-800">
                    <li>‚Ä¢ Approve FDE #2 + PM #1 hiring</li>
                    <li>‚Ä¢ Kick off contractor identification</li>
                    <li>‚Ä¢ Begin pipeline probability mapping</li>
                  </ul>
                </div>
                <div class="bg-blue-50 rounded-lg p-4">
                  <p class="text-xs text-blue-600 font-semibold mb-2">BY END OF Q1</p>
                  <ul class="space-y-1 text-sm text-blue-800">
                    <li>‚Ä¢ FDE #2 onboarded and in ramp</li>
                    <li>‚Ä¢ Gate 1 J3 engagement kicked off</li>
                    <li>‚Ä¢ Contractor shortlist finalized (2‚Äì3)</li>
                    <li>‚Ä¢ Contractor Pilot #1 (J1) launched</li>
                  </ul>
                </div>
                <div class="bg-violet-50 rounded-lg p-4">
                  <p class="text-xs text-violet-600 font-semibold mb-2">MID-APRIL CHECKPOINT</p>
                  <ul class="space-y-1 text-sm text-violet-800">
                    <li>‚Ä¢ Gate 1 midpoint assessment</li>
                    <li>‚Ä¢ Contractor pilot go/no-go decision</li>
                    <li>‚Ä¢ Q2 hiring unlock decision</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        `;
      }

      // Role Profiles Tab
      if (state.activeTab === 'roles') {
        const totalHires = roleProfiles.reduce((sum, r) => sum + r.hires[state.activeScenario], 0);
        html = `
          <div class="space-y-4">
            <div class="bg-emerald-50 border border-emerald-200 rounded-xl p-4 mb-6">
              <p class="text-sm text-emerald-800">
                <strong>Hiring for ${scenarios[state.activeScenario].label}:</strong> ${totalHires} total new hires needed
              </p>
            </div>
            ${['Services Delivery', 'GTM', 'Partner Roles'].map(category => `
              <div>
                <h2 class="text-lg font-semibold mb-3 text-slate-700">${category}</h2>
                <div class="space-y-3">
                  ${roleProfiles.filter(r => r.category === category).map(role => `
                    <div class="bg-white rounded-xl border overflow-hidden">
                      <button onclick="toggleRole('${role.id}')" class="w-full p-4 flex items-center justify-between hover:bg-slate-50 transition-colors">
                        <div class="flex items-center gap-4">
                          <div class="w-12 h-12 rounded-lg flex items-center justify-center ${
                            role.priority === 'Critical' ? 'bg-rose-100' :
                            role.priority === 'High' ? 'bg-amber-100' :
                            'bg-blue-100'
                          }">
                            ${getIcon(role.icon, 24)}
                          </div>
                          <div class="text-left">
                            <p class="font-semibold">${role.title}</p>
                            <p class="text-sm text-slate-500">${role.aka}</p>
                          </div>
                        </div>
                        <div class="flex items-center gap-4">
                          <div class="text-right">
                            <p class="text-sm font-medium">+${role.hires[state.activeScenario]} hires</p>
                            <p class="text-xs text-slate-500">${fmt(role.salary.loaded)}/yr loaded</p>
                          </div>
                          <span class="px-2 py-1 rounded text-xs font-medium ${
                            role.priority === 'Critical' ? 'bg-rose-100 text-rose-700' :
                            role.priority === 'High' ? 'bg-amber-100 text-amber-700' :
                            role.priority === 'Medium' ? 'bg-blue-100 text-blue-700' :
                            'bg-slate-100 text-slate-700'
                          }">${role.priority}</span>
                          ${state.expandedRole === role.id ? getIcon('chevron-down', 20) : getIcon('chevron-right', 20)}
                        </div>
                      </button>
                      ${state.expandedRole === role.id ? `
                        <div class="border-t p-4 bg-slate-50">
                          <p class="text-sm text-slate-700 mb-4">${role.description}</p>
                          <div class="grid grid-cols-4 gap-4 mb-4">
                            <div class="bg-white rounded-lg p-3">
                              <p class="text-xs text-slate-500">Base Salary</p>
                              <p class="font-semibold">${fmt(role.salary.base)}</p>
                            </div>
                            <div class="bg-white rounded-lg p-3">
                              <p class="text-xs text-slate-500">OTE</p>
                              <p class="font-semibold">${fmt(role.salary.ote)}</p>
                            </div>
                            <div class="bg-white rounded-lg p-3">
                              <p class="text-xs text-slate-500">Fully Loaded</p>
                              <p class="font-semibold">${fmt(role.salary.loaded)}</p>
                            </div>
                            <div class="bg-white rounded-lg p-3">
                              <p class="text-xs text-slate-500">Bill Rate</p>
                              <p class="font-semibold">${role.billRate ? `$${role.billRate}/hr` : 'N/A'}</p>
                            </div>
                          </div>
                          <div class="grid grid-cols-2 gap-4">
                            <div>
                              <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Responsibilities</p>
                              <ul class="space-y-1">
                                ${role.responsibilities.map(r => `
                                  <li class="text-sm text-slate-700 flex items-start gap-2">
                                    <span class="text-emerald-500 mt-1">‚Ä¢</span> ${r}
                                  </li>
                                `).join('')}
                              </ul>
                            </div>
                            <div>
                              <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Requirements</p>
                              <ul class="space-y-1">
                                ${role.requirements.map(r => `
                                  <li class="text-sm text-slate-700 flex items-start gap-2">
                                    <span class="text-blue-500 mt-1">‚Ä¢</span> ${r}
                                  </li>
                                `).join('')}
                              </ul>
                            </div>
                          </div>
                          <div class="grid grid-cols-2 gap-4 mt-4">
                            <div>
                              <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Success Metrics</p>
                              <ul class="space-y-1">
                                ${role.successMetrics.map(m => `
                                  <li class="text-sm text-slate-700 flex items-start gap-2">
                                    ${getIcon('check-circle-2', 14)} ${m}
                                  </li>
                                `).join('')}
                              </ul>
                            </div>
                            <div>
                              <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Interview Process</p>
                              <ol class="space-y-1">
                                ${role.interviewProcess.map((s, i) => `
                                  <li class="text-sm text-slate-700 flex items-start gap-2">
                                    <span class="text-slate-400 font-mono text-xs">${i + 1}.</span> ${s}
                                  </li>
                                `).join('')}
                              </ol>
                            </div>
                          </div>
                          <div class="mt-4 pt-4 border-t">
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Hiring Sources</p>
                            <div class="flex flex-wrap gap-2">
                              ${role.hiringSource.map(s => `
                                <span class="text-xs px-2 py-1 bg-white rounded border">${s}</span>
                              `).join('')}
                            </div>
                          </div>
                        </div>
                      ` : ''}
                    </div>
                  `).join('')}
                </div>
              </div>
            `).join('')}
          </div>
        `;
      }

      // Quarterly Budget Tab
      if (state.activeTab === 'budget') {
        const budget = quarterlyBudget[state.activeScenario];
        const totalHiringCost = Object.values(budget).reduce((sum, q) => sum + q.cost, 0);
        const totalHires = Object.values(budget).reduce((sum, q) => sum + q.hires.length, 0);
        html = `
          <div class="space-y-6">
            <div class="bg-white rounded-xl border p-5">
              <h3 class="font-semibold mb-4">Quarterly P&L Projection: ${scenarios[state.activeScenario].label}</h3>
              <table class="w-full text-sm">
                <thead class="bg-slate-50">
                  <tr>
                    <th class="text-left px-4 py-2">Quarter</th>
                    <th class="text-left px-4 py-2">New Hires</th>
                    <th class="text-right px-4 py-2">Hiring Cost (Q)</th>
                    <th class="text-right px-4 py-2">Cumulative HC</th>
                    <th class="text-right px-4 py-2">Revenue (Cum)</th>
                    <th class="text-left px-4 py-2">Notes</th>
                  </tr>
                </thead>
                <tbody class="divide-y">
                  ${Object.entries(budget).map(([q, data]) => `
                    <tr>
                      <td class="px-4 py-3 font-medium">${q.toUpperCase()} 2026</td>
                      <td class="px-4 py-3">
                        <div class="flex flex-wrap gap-1">
                          ${data.hires.length > 0 ? data.hires.map(h => `
                            <span class="text-xs px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded">${h}</span>
                          `).join('') : '<span class="text-slate-400">‚Äî</span>'}
                        </div>
                      </td>
                      <td class="px-4 py-3 text-right">${fmt(data.cost)}</td>
                      <td class="px-4 py-3 text-right font-medium">${data.cumHC}</td>
                      <td class="px-4 py-3 text-right text-emerald-600 font-medium">${fmt(data.revenue)}</td>
                      <td class="px-4 py-3 text-slate-600">${data.notes}</td>
                    </tr>
                  `).join('')}
                </tbody>
                <tfoot class="bg-slate-100">
                  <tr>
                    <td class="px-4 py-3 font-semibold">Total</td>
                    <td class="px-4 py-3">${totalHires} hires</td>
                    <td class="px-4 py-3 text-right font-semibold">${fmt(totalHiringCost)}</td>
                    <td class="px-4 py-3 text-right font-semibold">${budget.q4.cumHC}</td>
                    <td class="px-4 py-3 text-right font-semibold text-emerald-600">${fmt(scenarios[state.activeScenario].target)}</td>
                    <td class="px-4 py-3"></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <div class="grid grid-cols-3 gap-4">
              ${Object.entries(scenarios).map(([k, s]) => {
                const b = quarterlyBudget[k];
                const thc = Object.values(b).reduce((sum, q) => sum + q.cost, 0);
                const fhc = b.q4.cumHC;
                return `
                  <div class="rounded-xl border-2 p-4 ${
                    state.activeScenario === k ? 'border-emerald-500 bg-emerald-50' : 'border-slate-200 bg-white'
                  }">
                    <h4 class="font-semibold mb-3">${s.label} Summary</h4>
                    <div class="space-y-2 text-sm">
                      <div class="flex justify-between">
                        <span class="text-slate-600">Target Revenue</span>
                        <span class="font-medium">${fmt(s.target)}</span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-slate-600">Final Headcount</span>
                        <span class="font-medium">${fhc}</span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-slate-600">New Hire Cost (Q1)</span>
                        <span class="font-medium">${fmt(thc)}</span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-slate-600">Rev/Head</span>
                        <span class="font-medium">${fmt(s.target / fhc)}</span>
                      </div>
                    </div>
                  </div>
                `;
              }).join('')}
            </div>
          </div>
        `;
      }

      // Hiring Timeline Tab
      if (state.activeTab === 'timeline') {
        const budget = quarterlyBudget[state.activeScenario];
        html = `
          <div class="space-y-6">
            <div class="bg-white rounded-xl border p-5">
              <h3 class="font-semibold mb-4">2026 Hiring Timeline: ${scenarios[state.activeScenario].label}</h3>
              <div class="grid grid-cols-4 gap-4">
                ${Object.entries(budget).map(([q, data], idx) => `
                  <div class="rounded-xl border-2 p-4 ${
                    idx === 0 ? 'border-rose-300 bg-rose-50' :
                    idx === 1 ? 'border-amber-300 bg-amber-50' :
                    idx === 2 ? 'border-blue-300 bg-blue-50' :
                    'border-emerald-300 bg-emerald-50'
                  }">
                    <div class="flex items-center justify-between mb-3">
                      <h4 class="font-semibold">${q.toUpperCase()} 2026</h4>
                      <span class="text-xs px-2 py-0.5 rounded ${
                        idx === 0 ? 'bg-rose-200 text-rose-700' :
                        idx === 1 ? 'bg-amber-200 text-amber-700' :
                        idx === 2 ? 'bg-blue-200 text-blue-700' :
                        'bg-emerald-200 text-emerald-700'
                      }">
                        ${idx === 0 ? 'Critical' : idx === 1 ? 'High' : idx === 2 ? 'Medium' : 'Optimize'}
                      </span>
                    </div>
                    <div class="space-y-2 mb-4">
                      ${data.hires.length > 0 ? data.hires.map(h => `
                        <div class="flex items-center gap-2 text-sm">
                          ${getIcon('arrow-right', 14)}
                          <span>${h}</span>
                        </div>
                      `).join('') : '<p class="text-sm text-slate-500 italic">No new hires planned</p>'}
                    </div>
                    <div class="pt-3 border-t text-xs text-slate-600">
                      <p><strong>End of Q HC:</strong> ${data.cumHC}</p>
                      <p><strong>Cum Revenue:</strong> ${fmt(data.revenue)}</p>
                    </div>
                  </div>
                `).join('')}
              </div>
            </div>
            <div class="bg-amber-50 border border-amber-200 rounded-xl p-5">
              <h3 class="font-semibold text-amber-800 mb-3 flex items-center gap-2">
                ${getIcon('clock', 18)} Hiring Lead Times
              </h3>
              <div class="grid grid-cols-4 gap-4 text-sm">
                <div class="bg-white rounded-lg p-3">
                  <p class="font-medium">FDE</p>
                  <p class="text-amber-700">8-12 weeks to hire</p>
                  <p class="text-amber-700">3 months to ramp</p>
                </div>
                <div class="bg-white rounded-lg p-3">
                  <p class="font-medium">Pre-Sales SE</p>
                  <p class="text-amber-700">6-10 weeks to hire</p>
                  <p class="text-amber-700">2 months to ramp</p>
                </div>
                <div class="bg-white rounded-lg p-3">
                  <p class="font-medium">AE</p>
                  <p class="text-amber-700">8-12 weeks to hire</p>
                  <p class="text-amber-700">4 months to ramp</p>
                </div>
                <div class="bg-white rounded-lg p-3">
                  <p class="font-medium">Other Roles</p>
                  <p class="text-amber-700">4-8 weeks to hire</p>
                  <p class="text-amber-700">1-2 months to ramp</p>
                </div>
              </div>
              <p class="text-sm text-amber-800 mt-4">
                <strong>Implication:</strong> For Q1 productivity, begin recruiting in October 2025. For Q2, begin in January 2026.
              </p>
            </div>
          </div>
        `;
      }

      // Risk Mitigation Tab
      if (state.activeTab === 'risks') {
        html = `
          <div class="space-y-4">
            ${riskMitigation.map((risk, idx) => `
              <div class="bg-white rounded-xl border-2 overflow-hidden ${
                risk.color === 'rose' ? 'border-rose-200' :
                risk.color === 'amber' ? 'border-amber-200' :
                'border-blue-200'
              }">
                <div class="px-5 py-3 flex items-center justify-between ${
                  risk.color === 'rose' ? 'bg-rose-50' :
                  risk.color === 'amber' ? 'bg-amber-50' :
                  'bg-blue-50'
                }">
                  <div class="flex items-center gap-3">
                    ${getIcon('alert-triangle', 20)}
                    <div>
                      <h4 class="font-semibold">${risk.risk}</h4>
                      <p class="text-sm text-slate-600">${risk.impact}</p>
                    </div>
                  </div>
                  <div class="flex gap-2">
                    <span class="text-xs px-2 py-1 rounded ${
                      risk.severity === 'Critical' ? 'bg-rose-200 text-rose-700' :
                      risk.severity === 'High' ? 'bg-amber-200 text-amber-700' :
                      'bg-blue-200 text-blue-700'
                    }">
                      ${risk.severity} Severity
                    </span>
                    <span class="text-xs px-2 py-1 rounded bg-slate-200 text-slate-700">
                      ${risk.probability} Probability
                    </span>
                  </div>
                </div>
                <div class="p-5">
                  <div class="grid grid-cols-2 gap-6">
                    <div>
                      <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Mitigation Strategies</p>
                      <ul class="space-y-1">
                        ${risk.mitigation.map(m => `
                          <li class="text-sm text-slate-700 flex items-start gap-2">
                            ${getIcon('check-circle-2', 14)} ${m}
                          </li>
                        `).join('')}
                      </ul>
                    </div>
                    <div>
                      <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Contingency Plan</p>
                      <p class="text-sm text-slate-700 bg-slate-50 rounded-lg p-3">${risk.contingency}</p>
                      <p class="text-xs text-slate-500 mt-3"><strong>Owner:</strong> ${risk.owner}</p>
                    </div>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        `;
      }

      // Governance (RACI) Tab
      if (state.activeTab === 'raci') {
        html = `
          <div class="space-y-6">
            <div class="bg-white rounded-xl border p-5">
              <h3 class="font-semibold mb-4">Delivery Governance RACI</h3>
              <table class="w-full text-sm">
                <thead class="bg-slate-50">
                  <tr>
                    <th class="text-left px-4 py-2">Decision Area</th>
                    <th class="text-left px-4 py-2">Final Authority</th>
                    <th class="text-left px-4 py-2">Consulted Roles</th>
                  </tr>
                </thead>
                <tbody class="divide-y">
                  ${raciDecisions.map(row => `
                    <tr>
                      <td class="px-4 py-3 font-medium">${row.decision}</td>
                      <td class="px-4 py-3">
                        <span class="text-xs px-2 py-1 rounded bg-emerald-100 text-emerald-700">${row.authority}</span>
                      </td>
                      <td class="px-4 py-3">
                        <div class="flex flex-wrap gap-1">
                          ${row.consulted.map(role => `
                            <span class="text-xs px-2 py-0.5 rounded bg-slate-100 text-slate-700">${role}</span>
                          `).join('')}
                        </div>
                      </td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </div>
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-amber-50 border border-amber-200 rounded-xl p-5">
                <h4 class="font-semibold text-amber-800 mb-3">Coverage Gaps vs Headcount Plan</h4>
                <p class="text-sm text-amber-800 mb-3">
                  The RACI includes functions not modeled as hires in this plan. Ensure capacity is explicitly assigned.
                </p>
                <div class="flex flex-wrap gap-2">
                  ${['Pre-Sales SE', 'Deployment Specialist (Security)', 'Executive', 'Finance'].map(role => `
                    <span class="text-xs px-2 py-1 rounded bg-white border border-amber-200 text-amber-700">${role}</span>
                  `).join('')}
                </div>
                <div class="mt-4 bg-white rounded-lg p-3 border border-amber-200">
                  <p class="text-xs text-amber-700 font-semibold mb-1">Coverage Plan (Default)</p>
                  <p class="text-xs text-amber-800">Pre-Sales SE: 0.5‚Äì1.0 FTE ‚Ä¢ Deployment Specialist: partner bench (1‚Äì2) ‚Ä¢ Executive: named sponsor per account ‚Ä¢ Finance: named approver + 48-hr SLA</p>
                </div>
              </div>
              <div class="bg-blue-50 border border-blue-200 rounded-xl p-5">
                <h4 class="font-semibold text-blue-800 mb-3">Capacity Assignments & SLAs</h4>
                <div class="space-y-2 text-xs text-blue-800">
                  <div class="bg-white rounded-lg p-3 border border-blue-200">
                    <p class="font-semibold">Pre-Sales SE</p>
                    <p>Owner: Named SE ‚Ä¢ Coverage: 0.5‚Äì1.0 FTE ‚Ä¢ SLA: 5 business days for feasibility + tiering</p>
                  </div>
                  <div class="bg-white rounded-lg p-3 border border-blue-200">
                    <p class="font-semibold">Deployment Specialist (Security)</p>
                    <p>Owner: Partner bench (1‚Äì2) ‚Ä¢ Trigger: D3/D4 or ‚ÄúNeeds Security Validation = Yes‚Äù ‚Ä¢ SLA: Phase 0 kickoff within 2 weeks</p>
                  </div>
                  <div class="bg-white rounded-lg p-3 border border-blue-200">
                    <p class="font-semibold">Executive Sponsor</p>
                    <p>Owner: Named exec per Tier 1 account ‚Ä¢ Responsibility: MCP unlock + escalations ‚Ä¢ Cadence: monthly 30‚Äëmin review</p>
                  </div>
                  <div class="bg-white rounded-lg p-3 border border-blue-200">
                    <p class="font-semibold">Finance Approver</p>
                    <p>Owner: Named finance approver ‚Ä¢ Responsibility: pricing + commercial terms ‚Ä¢ SLA: 48‚Äëhour turn</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
      }

      // Pipeline Forecast Tab (Tier 1 Targets only)
      if (state.activeTab === 'forecast') {
        const pct = (n) => `${(n * 100).toFixed(1)}%`;
        const companyCount = tier1Companies.length;
        const expectedRatio = forecastRollups.expected.platformArr / forecastRollups.potential.platformArr;
        const tier1PlatformPotential = tier1Rollup.platformArrPotential;
        const tier1PlatformExpected = tier1PlatformPotential * expectedRatio;
        const tier1AcvPotential = tier1PlatformPotential / (1 - forecastRollups.potential.attachPct);
        const tier1AcvExpected = tier1PlatformExpected / (1 - forecastRollups.expected.attachPct);
        const perCompanyPlatformPotential = tier1PlatformPotential / companyCount;
        const perCompanyPlatformExpected = tier1PlatformExpected / companyCount;
        const perCompanyAcvPotential = tier1AcvPotential / companyCount;
        const perCompanyAcvExpected = tier1AcvExpected / companyCount;

        html = `
          <div class="space-y-6">
            <div class="bg-white rounded-xl border p-5">
              <h3 class="font-semibold mb-4">Tier 1 Target Pipeline (TAM Subset)</h3>
              <div class="grid grid-cols-3 gap-4 text-sm">
                <div class="bg-slate-50 rounded-lg p-3">
                  <p class="text-xs text-slate-500">Tier 1 Targets</p>
                  <p class="font-semibold">${companyCount} companies</p>
                </div>
                <div class="bg-emerald-50 rounded-lg p-3">
                  <p class="text-xs text-emerald-700">Tier 1 Platform ARR (Potential)</p>
                  <p class="font-semibold text-emerald-800">${fmt(tier1PlatformPotential)}</p>
                </div>
                <div class="bg-blue-50 rounded-lg p-3">
                  <p class="text-xs text-blue-700">Tier 1 Platform ARR (Expected)</p>
                  <p class="font-semibold text-blue-800">${fmt(tier1PlatformExpected)}</p>
                </div>
              </div>
              <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
                <div class="bg-emerald-50 rounded-lg p-3">
                  <p class="text-xs text-emerald-700">Tier 1 ACV (Potential)</p>
                  <p class="font-semibold text-emerald-800">${fmt(tier1AcvPotential)}</p>
                </div>
                <div class="bg-blue-50 rounded-lg p-3">
                  <p class="text-xs text-blue-700">Tier 1 ACV (Expected)</p>
                  <p class="font-semibold text-blue-800">${fmt(tier1AcvExpected)}</p>
                </div>
              </div>
              <p class="text-xs text-slate-500 mt-3">Expected ratio is derived from overall platform ARR expected vs potential.</p>
            </div>

            ${Object.entries(scenarios).map(([k, s]) => {
              const finalHc = quarterlyBudget[k].q4.cumHC;
              const targetPerHc = s.target / finalHc;
              const perCompanyRevPerHcExpected = perCompanyAcvExpected / finalHc;
              return `
                <div class="bg-white rounded-xl border p-5">
                  <div class="flex items-center justify-between mb-4">
                    <h4 class="font-semibold">Scenario ${s.label}: Tier 1 Company Breakdown</h4>
                    <div class="text-xs text-slate-500">Final HC: ${finalHc} ‚Ä¢ Target Rev/HC: ${fmt(targetPerHc)}</div>
                  </div>
                  <div class="max-h-80 overflow-auto border rounded-lg">
                    <table class="w-full text-sm">
                      <thead class="bg-slate-50 sticky top-0">
                        <tr>
                          <th class="text-left px-4 py-2">Company</th>
                          <th class="text-left px-4 py-2">Journey</th>
                          <th class="text-left px-4 py-2">Deployment</th>
                          <th class="text-right px-4 py-2">FDE</th>
                          <th class="text-right px-4 py-2">CX Partner</th>
                          <th class="text-right px-4 py-2">PM</th>
                          <th class="text-right px-4 py-2">Deploy Spec</th>
                          <th class="text-right px-4 py-2">Platform ARR</th>
                          <th class="text-right px-4 py-2">ACV Rev/HC</th>
                        </tr>
                      </thead>
                      <tbody class="divide-y">
                        ${tier1CompanyData.map(row => {
                          const defaults = journeyPodDefaults[row.journey] || journeyPodDefaults.J3;
                          const fde = defaults.fde;
                          const cx = row.cxPmo ?? defaults.cx;
                          const pm = defaults.pm;
                          const dep = deploymentSpecialistFte(row.deployment);
                          return `
                            <tr>
                              <td class="px-4 py-2">${row.company}</td>
                              <td class="px-4 py-2">${row.journey}</td>
                              <td class="px-4 py-2">${row.deployment}</td>
                              <td class="px-4 py-2 text-right">${fde.toFixed(2)}</td>
                              <td class="px-4 py-2 text-right">${Number(cx).toFixed(2)}</td>
                              <td class="px-4 py-2 text-right">${pm.toFixed(2)}</td>
                              <td class="px-4 py-2 text-right">${dep.toFixed(2)}</td>
                              <td class="px-4 py-2 text-right">${fmt(perCompanyPlatformExpected)}</td>
                              <td class="px-4 py-2 text-right ${perCompanyRevPerHcExpected >= targetPerHc ? 'text-emerald-700 font-semibold' : 'text-amber-700'}">${fmt(perCompanyRevPerHcExpected)}</td>
                            </tr>
                          `;
                        }).join('')}
                      </tbody>
                    </table>
                  </div>
                  <p class="text-xs text-slate-500 mt-3">Platform ARR and ACV Rev/HC are evenly allocated across Tier 1 targets due to no per-account revenue values in the model.</p>
                </div>
              `;
            }).join('')}

            <div class="bg-white rounded-xl border p-5">
              <h4 class="font-semibold mb-4">Scenario Capacity Utilization (Staggered J3)</h4>
              <div class="grid grid-cols-3 gap-4 text-sm mb-4">
                <div class="bg-slate-50 rounded-lg p-3">
                  <p class="text-xs text-slate-500">Concurrency Rule</p>
                  <p class="font-semibold">Max 1 J3 at a time</p>
                </div>
                <div class="bg-slate-50 rounded-lg p-3">
                  <p class="text-xs text-slate-500">Assumed J3 Duration</p>
                  <p class="font-semibold">6 months (24 weeks)</p>
                </div>
                <div class="bg-slate-50 rounded-lg p-3">
                  <p class="text-xs text-slate-500">Delivery Pod (J3)</p>
                  <p class="font-semibold">1.0 FDE ‚Ä¢ 0.5 CX ‚Ä¢ 0.5 PM</p>
                </div>
              </div>
              <table class="w-full text-sm">
                <thead class="bg-slate-50">
                  <tr>
                    <th class="text-left px-4 py-2">Scenario</th>
                    <th class="text-right px-4 py-2">Final HC</th>
                    <th class="text-right px-4 py-2">Max J3/Year</th>
                    <th class="text-right px-4 py-2">FDE Util%</th>
                    <th class="text-right px-4 py-2">CX Util%</th>
                    <th class="text-right px-4 py-2">PM Util%</th>
                  </tr>
                </thead>
                <tbody class="divide-y">
                  ${Object.entries(scenarios).map(([k, s]) => {
                    const hiresByRole = roleProfiles.reduce((acc, r) => {
                      acc[r.id] = r.hires[k] || 0;
                      return acc;
                    }, {});
                    const startingFde = 1;
                    const startingCx = 1;
                    const startingPm = 0;
                    const fdeHc = startingFde + (hiresByRole.fde || 0);
                    const cxHc = startingCx + (hiresByRole.cxp || 0);
                    const pmHc = startingPm + (hiresByRole.pm || 0);
                    const maxJ3PerYear = 2; // 6 months each, sequential
                    const fdeUtil = (1.0 / fdeHc);
                    const cxUtil = (0.5 / cxHc);
                    const pmUtil = pmHc > 0 ? (0.5 / pmHc) : 1.0;
                    return `
                      <tr>
                        <td class="px-4 py-3 font-medium">${s.label} Scenario</td>
                        <td class="px-4 py-3 text-right">${quarterlyBudget[k].q4.cumHC}</td>
                        <td class="px-4 py-3 text-right">${maxJ3PerYear}</td>
                        <td class="px-4 py-3 text-right">${pct(fdeUtil)}</td>
                        <td class="px-4 py-3 text-right">${pct(cxUtil)}</td>
                        <td class="px-4 py-3 text-right">${pct(pmUtil)}</td>
                      </tr>
                    `;
                  }).join('')}
                </tbody>
              </table>
              <p class="text-xs text-slate-500 mt-3">Utilization shows the share of each role‚Äôs capacity consumed by a single concurrent J3 pod. Month‚Äëover‚Äëmonth capacity is managed by sequencing J3 starts every 6 months and filling remaining capacity with J2/J4 work.</p>
            </div>

            <div class="bg-amber-50 border border-amber-200 rounded-xl p-5">
              <h4 class="font-semibold text-amber-800 mb-3">Forecast Assumptions (Model Inputs)</h4>
              <div class="grid grid-cols-2 gap-4 text-sm text-amber-900">
                ${forecastAssumptions.map(a => `
                  <div class="bg-white rounded-lg p-3 border border-amber-200">
                    <p class="text-xs text-amber-700 font-semibold mb-1">${a.label}</p>
                    <p class="text-sm text-amber-900">${a.value}</p>
                  </div>
                `).join('')}
              </div>
              <p class="text-xs text-amber-800 mt-3">Source: IPE forecast model rollups and Master Tier 1 target list.</p>
            </div>
          </div>
        `;
      }

      container.innerHTML = html;
    }

    function render() {
      renderScenarioSelector();
      renderTabs();
      renderContent();
    }

    // Initialize
    render();
  </script>
</body>
</html>