<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IPE Investment Path Self-Assessment</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    .progress-bar { transition: width 0.3s ease; }
    .option-card { transition: all 0.2s; }
    .option-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .option-card.selected { border-color: #10b981; background: #ecfdf5; }
    .fade-in { animation: fadeIn 0.3s ease-in; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-white">
  <!-- Header -->
  <header class="bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 text-white">
    <div class="max-w-4xl mx-auto px-4 py-6">
      <div class="flex items-center gap-3 mb-2">
        <div class="w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center">
          <i data-lucide="activity" class="w-5 h-5 text-emerald-400"></i>
        </div>
        <div>
          <h1 class="text-2xl font-bold">IPE Investment Path Self-Assessment</h1>
          <p class="text-slate-300 text-sm">Evaluate your readiness for the Intelligent Product Engine</p>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main id="app" class="max-w-4xl mx-auto px-4 py-8">
    <!-- Assessment Form -->
    <div id="assessment-container" class="space-y-6">
      <!-- Progress Indicator -->
      <div class="bg-white rounded-xl border border-slate-200 p-4 shadow-sm">
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm font-medium text-slate-600">Assessment Progress</span>
          <span class="text-sm text-slate-500" id="progress-text">0%</span>
        </div>
        <div class="h-2 bg-slate-200 rounded-full overflow-hidden">
          <div id="progress-bar" class="h-full bg-emerald-500 progress-bar" style="width: 0%"></div>
        </div>
      </div>

      <!-- Current Question -->
      <div id="question-container" class="space-y-4"></div>
    </div>

    <!-- Results -->
    <div id="results-container" class="hidden space-y-6">
      <!-- Overall Score -->
      <div class="bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-xl p-6">
        <div class="flex items-center justify-between mb-4">
          <div>
            <p class="text-emerald-100 text-sm font-medium mb-1">IPE READINESS SCORE</p>
            <h2 class="text-4xl font-bold" id="overall-score">0</h2>
            <p class="text-emerald-100 text-sm mt-1">out of 100</p>
          </div>
          <div class="w-24 h-24 rounded-full bg-white/20 flex items-center justify-center">
            <i data-lucide="target" class="w-12 h-12"></i>
          </div>
        </div>
        <div class="grid grid-cols-3 gap-4 mt-4">
          <div class="bg-white/10 rounded-lg p-3">
            <p class="text-xs text-emerald-200 mb-1">Product System Foundation</p>
            <p class="text-xl font-bold" id="foundation-score">0</p>
            <p class="text-xs text-emerald-200">/ 40</p>
          </div>
          <div class="bg-white/10 rounded-lg p-3">
            <p class="text-xs text-emerald-200 mb-1">AI & Automation Readiness</p>
            <p class="text-xl font-bold" id="ai-score">0</p>
            <p class="text-xs text-emerald-200">/ 30</p>
          </div>
          <div class="bg-white/10 rounded-lg p-3">
            <p class="text-xs text-emerald-200 mb-1">Organizational Readiness</p>
            <p class="text-xl font-bold" id="org-score">0</p>
            <p class="text-xs text-emerald-200">/ 30</p>
          </div>
        </div>
      </div>

      <!-- Investment Path Recommendation -->
      <div class="bg-white rounded-xl border border-slate-200 p-6 shadow-sm">
        <h3 class="text-lg font-bold text-slate-900 mb-4 flex items-center gap-2">
          <i data-lucide="git-branch" class="w-5 h-5 text-emerald-600"></i>
          Recommended Investment Path
        </h3>
        <div id="path-recommendation" class="space-y-4"></div>
      </div>

      <!-- Deployment Tier -->
      <div class="bg-white rounded-xl border border-slate-200 p-6 shadow-sm">
        <h3 class="text-lg font-bold text-slate-900 mb-4 flex items-center gap-2">
          <i data-lucide="server" class="w-5 h-5 text-amber-600"></i>
          Deployment Tier Assessment
        </h3>
        <div id="deployment-recommendation"></div>
      </div>

      <!-- Detailed Breakdown -->
      <div class="bg-white rounded-xl border border-slate-200 p-6 shadow-sm">
        <h3 class="text-lg font-bold text-slate-900 mb-4 flex items-center gap-2">
          <i data-lucide="bar-chart-3" class="w-5 h-5 text-blue-600"></i>
          Assessment Breakdown
        </h3>
        <div id="breakdown-details" class="space-y-4"></div>
      </div>

      <!-- Next Steps -->
      <div class="bg-emerald-50 border-2 border-emerald-200 rounded-xl p-6">
        <h3 class="text-lg font-bold text-emerald-900 mb-4 flex items-center gap-2">
          <i data-lucide="arrow-right" class="w-5 h-5 text-emerald-600"></i>
          Recommended Next Steps
        </h3>
        <div id="next-steps" class="space-y-3"></div>
      </div>

      <!-- Restart Button -->
      <button onclick="resetAssessment()" class="w-full flex items-center justify-center gap-2 px-6 py-3 bg-slate-900 text-white rounded-lg font-medium hover:bg-slate-800 transition-colors">
        <i data-lucide="refresh-cw" class="w-5 h-5"></i>
        Start New Assessment
      </button>
    </div>
  </main>

  <script>
    // Assessment Questions
    const questions = [
      // Product System Foundation (40 points total)
      {
        category: 'Product System Foundation',
        weight: 40,
        question: 'What is the current state of your design system?',
        options: [
          { text: 'No design system exists', score: 0, value: 'none' },
          { text: 'Informal or scattered components', score: 5, value: 'informal' },
          { text: 'Design system exists but limited adoption', score: 10, value: 'limited' },
          { text: 'Design system deployed, moderate adoption (30-70%)', score: 15, value: 'moderate' },
          { text: 'Mature design system with high adoption (>70%)', score: 20, value: 'mature' }
        ]
      },
      {
        category: 'Product System Foundation',
        weight: 40,
        question: 'How is your design system governed?',
        options: [
          { text: 'No governance structure', score: 0, value: 'none' },
          { text: 'Informal or ad-hoc governance', score: 3, value: 'informal' },
          { text: 'Governance exists but not enforced', score: 6, value: 'exists' },
          { text: 'Active governance with decision authority', score: 10, value: 'active' },
          { text: 'Cross-system governance with clear rules', score: 12, value: 'cross-system' }
        ]
      },
      {
        category: 'Product System Foundation',
        weight: 40,
        question: 'What is the quality of your design system documentation?',
        options: [
          { text: 'No documentation', score: 0, value: 'none' },
          { text: 'Minimal or outdated documentation', score: 2, value: 'minimal' },
          { text: 'Basic documentation exists', score: 4, value: 'basic' },
          { text: 'Comprehensive, up-to-date documentation', score: 6, value: 'comprehensive' },
          { text: 'Living documentation integrated with code', score: 8, value: 'living' }
        ]
      },
      
      // AI & Automation Readiness (30 points total)
      {
        category: 'AI & Automation Readiness',
        weight: 30,
        question: 'How are your teams currently using AI coding tools?',
        options: [
          { text: 'No AI tools in use', score: 0, value: 'none' },
          { text: 'Limited experimentation', score: 3, value: 'experimental' },
          { text: 'Some teams using AI tools', score: 6, value: 'some' },
          { text: 'Widespread AI tool adoption', score: 10, value: 'widespread' },
          { text: 'AI tools integrated into workflows', score: 12, value: 'integrated' }
        ]
      },
      {
        category: 'AI & Automation Readiness',
        weight: 30,
        question: 'What is your API maturity and integration architecture?',
        options: [
          { text: 'No APIs or integration architecture', score: 0, value: 'none' },
          { text: 'Basic APIs exist', score: 3, value: 'basic' },
          { text: 'Well-defined APIs with documentation', score: 6, value: 'defined' },
          { text: 'Mature API architecture', score: 9, value: 'mature' },
          { text: 'API-first architecture with MCP compatibility', score: 12, value: 'mcp-ready' }
        ]
      },
      {
        category: 'AI & Automation Readiness',
        weight: 30,
        question: 'What is the quality of your product data and metadata?',
        options: [
          { text: 'No structured data', score: 0, value: 'none' },
          { text: 'Fragmented or inconsistent data', score: 2, value: 'fragmented' },
          { text: 'Some structured data exists', score: 4, value: 'some' },
          { text: 'Well-structured, consistent data', score: 6, value: 'structured' },
          { text: 'Rich metadata with semantic relationships', score: 8, value: 'rich' }
        ]
      },
      
      // Organizational Readiness (30 points total)
      {
        category: 'Organizational Readiness',
        weight: 30,
        question: 'Is there an executive sponsor for this initiative?',
        options: [
          { text: 'No sponsor identified', score: 0, value: 'none' },
          { text: 'Influencer only (IC or Manager)', score: 3, value: 'influencer' },
          { text: 'Director-level champion', score: 6, value: 'director' },
          { text: 'VP-level executive sponsor', score: 10, value: 'vp' },
          { text: 'C-level executive sponsor', score: 12, value: 'c-level' }
        ]
      },
      {
        category: 'Organizational Readiness',
        weight: 30,
        question: 'What is the status of budget for this investment?',
        options: [
          { text: 'No budget allocated', score: 0, value: 'none' },
          { text: 'Budget would need to be found', score: 3, value: 'find' },
          { text: 'Budget exists, needs approval', score: 6, value: 'approval' },
          { text: 'Budget allocated and approved', score: 10, value: 'allocated' },
          { text: 'Budget allocated with multi-year commitment', score: 12, value: 'multi-year' }
        ]
      },
      {
        category: 'Organizational Readiness',
        weight: 30,
        question: 'What is your team capacity for change management?',
        options: [
          { text: 'No capacity for change', score: 0, value: 'none' },
          { text: 'Limited capacity', score: 2, value: 'limited' },
          { text: 'Moderate capacity', score: 4, value: 'moderate' },
          { text: 'Dedicated change management resources', score: 6, value: 'dedicated' },
          { text: 'Strong change management capability', score: 8, value: 'strong' }
        ]
      },
      
      // Deployment Tier Questions
      {
        category: 'Deployment',
        weight: 0,
        question: 'What are your compliance and infrastructure requirements?',
        options: [
          { text: 'Standard SaaS acceptable (SOC 2)', score: 0, value: 'D1', tier: 'D1' },
          { text: 'Dedicated environment needed (SOC 2, GDPR)', score: 0, value: 'D2', tier: 'D2' },
          { text: 'Private cloud required (PCI, HIPAA)', score: 0, value: 'D3', tier: 'D3' },
          { text: 'Self-hosted/on-premises (FedRAMP, Defense)', score: 0, value: 'D4', tier: 'D4' },
          { text: 'Unknown - need to validate', score: 0, value: 'unknown', tier: 'D1' }
        ]
      }
    ];

    let currentQuestionIndex = 0;
    let answers = {};
    let deploymentTier = 'D1';

    const journeyDetails = {
      J1: {
        name: 'Foundation Path',
        color: 'slate',
        tcv: '$50-60K',
        arrShare: '10%',
        risk: 'Low',
        description: 'For organizations without a system of record. Build before governing.',
        path: 'Diagnostic → Foundation → Governance',
        motion: 'Light-touch nurturing. Monitor for maturity signals.',
        accounts: ['Early-stage design system orgs', 'No engineering ownership yet']
      },
      J2: {
        name: 'Acceleration Path',
        color: 'blue',
        tcv: '$50K diagnostic → $225-325K sprint',
        arrShare: '5%',
        risk: 'Low',
        description: 'For mature orgs with sudden trigger. Fast activation, minimal services.',
        path: 'Diagnostic → Rapid Activation',
        motion: 'Fast activation sprint. Confirm trigger is real and timeline achievable.',
        accounts: ['Adobe-profile accounts', 'Enterprise rollout triggers']
      },
      J3: {
        name: 'Activation Path',
        color: 'emerald',
        tcv: '$740K-1.6M over 40-68 weeks',
        arrShare: '60%',
        risk: 'High',
        description: 'For high-value accounts blocked on activation. Full transformation.',
        path: 'Diagnostic → (Phase 0) → Foundation → Activation → Intelligence',
        motion: 'Services-led transformation. Begin with diagnostic ($50-60K).',
        accounts: ['PNC', 'Edward Jones', 'DoubleVerify', 'Qualcomm', 'GSK US']
      },
      J4: {
        name: 'Intelligence Path',
        color: 'violet',
        tcv: '$165-325K MCP + platform expansion',
        arrShare: '25%',
        risk: 'Medium',
        description: 'For implemented accounts ready for AI enablement. Expansion-focused.',
        path: 'Diagnostic → MCP Activation → Expansion',
        motion: 'Monitor for trigger. When identified, propose Intelligence phase.',
        accounts: ['The Home Depot', 'CSX', 'GSK Global', 'Crown Equipment']
      }
    };

    const deploymentTiers = {
      D1: { name: 'Cloud Standard', premium: '—', time: '2-4 weeks', compliance: 'SOC 2' },
      D2: { name: 'Cloud Dedicated', premium: '+$50-100K', time: '4-8 weeks', compliance: 'SOC 2, GDPR' },
      D3: { name: 'Private Cloud', premium: '+$175-275K', time: '8-16 weeks', compliance: 'SOC 2, HIPAA, PCI-DSS' },
      D4: { name: 'Self-Hosted', premium: '+$350-550K', time: '16-24+ weeks', compliance: 'FedRAMP-ready, Custom' }
    };

    function renderQuestion() {
      if (currentQuestionIndex >= questions.length) {
        calculateResults();
        return;
      }

      const question = questions[currentQuestionIndex];
      const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
      
      document.getElementById('progress-text').textContent = `${Math.round(progress)}%`;
      document.getElementById('progress-bar').style.width = `${progress}%`;

      const categoryColors = {
        'Product System Foundation': 'emerald',
        'AI & Automation Readiness': 'violet',
        'Organizational Readiness': 'blue',
        'Deployment': 'amber'
      };

      const color = categoryColors[question.category] || 'slate';

      const optionsHtml = question.options.map((opt, idx) => {
        const isSelected = answers[currentQuestionIndex] === opt.value;
        return `
          <button
            onclick="selectOption(${idx})"
            class="option-card w-full text-left p-4 rounded-lg border-2 transition-all ${
              isSelected 
                ? 'border-emerald-500 bg-emerald-50' 
                : 'border-slate-200 bg-white hover:border-slate-300'
            }"
          >
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-slate-700">${opt.text}</span>
              ${isSelected ? '<i data-lucide="check-circle" class="w-5 h-5 text-emerald-600"></i>' : ''}
            </div>
          </button>
        `;
      }).join('');

      document.getElementById('question-container').innerHTML = `
        <div class="bg-white rounded-xl border border-slate-200 p-6 shadow-sm fade-in">
          <div class="flex items-center gap-2 mb-4">
            <span class="px-3 py-1 bg-${color}-100 text-${color}-700 rounded-lg text-xs font-semibold">
              ${question.category}
            </span>
            ${question.weight > 0 ? `<span class="text-xs text-slate-500">${question.weight} points max</span>` : ''}
          </div>
          <h2 class="text-lg font-semibold text-slate-900 mb-4">${question.question}</h2>
          <div class="space-y-3">${optionsHtml}</div>
          ${currentQuestionIndex > 0 ? `
            <button
              onclick="goBack()"
              class="mt-4 text-sm text-slate-500 hover:text-slate-700 flex items-center gap-1"
            >
              <i data-lucide="arrow-left" class="w-4 h-4"></i> Previous question
            </button>
          ` : ''}
        </div>
      `;

      lucide.createIcons();
    }

    function selectOption(index) {
      const question = questions[currentQuestionIndex];
      const option = question.options[index];
      
      answers[currentQuestionIndex] = option.value;
      
      if (option.tier) {
        deploymentTier = option.tier;
      }
      
      currentQuestionIndex++;
      setTimeout(() => renderQuestion(), 300);
    }

    function goBack() {
      if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        delete answers[currentQuestionIndex];
        renderQuestion();
      }
    }

    function calculateResults() {
      let foundationScore = 0;
      let aiScore = 0;
      let orgScore = 0;

      questions.forEach((q, idx) => {
        if (q.category === 'Deployment') return;
        
        const answerValue = answers[idx];
        const selectedOption = q.options.find(opt => opt.value === answerValue);
        
        if (selectedOption) {
          if (q.category === 'Product System Foundation') {
            foundationScore += selectedOption.score;
          } else if (q.category === 'AI & Automation Readiness') {
            aiScore += selectedOption.score;
          } else if (q.category === 'Organizational Readiness') {
            orgScore += selectedOption.score;
          }
        }
      });

      const totalScore = foundationScore + aiScore + orgScore;

      // Determine Investment Path
      let recommendedPath = 'J1';
      
      if (totalScore >= 70 && foundationScore >= 25 && orgScore >= 20) {
        recommendedPath = 'J4';
      } else if (totalScore >= 40 && foundationScore >= 15 && orgScore >= 15) {
        recommendedPath = 'J3';
      } else if (totalScore >= 50 && orgScore >= 20) {
        recommendedPath = 'J2';
      } else {
        recommendedPath = 'J1';
      }

      // Display results
      document.getElementById('assessment-container').classList.add('hidden');
      document.getElementById('results-container').classList.remove('hidden');
      
      document.getElementById('overall-score').textContent = totalScore;
      document.getElementById('foundation-score').textContent = foundationScore;
      document.getElementById('ai-score').textContent = aiScore;
      document.getElementById('org-score').textContent = orgScore;

      const journey = journeyDetails[recommendedPath];
      const tier = deploymentTiers[deploymentTier];

      // Investment Path Recommendation
      document.getElementById('path-recommendation').innerHTML = `
        <div class="bg-${journey.color}-50 border-2 border-${journey.color}-200 rounded-xl p-5">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-16 h-16 rounded-lg bg-${journey.color}-600 flex items-center justify-center text-white font-bold text-xl">
              ${recommendedPath}
            </div>
            <div class="flex-1">
              <h4 class="text-xl font-bold text-${journey.color}-900">${journey.name}</h4>
              <p class="text-sm text-${journey.color}-700">${journey.description}</p>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4 mb-4">
            <div class="bg-white rounded-lg p-3">
              <p class="text-xs text-slate-500 mb-1">TCV Range</p>
              <p class="font-bold text-slate-900">${journey.tcv}</p>
            </div>
            <div class="bg-white rounded-lg p-3">
              <p class="text-xs text-slate-500 mb-1">ARR Share</p>
              <p class="font-bold text-slate-900">${journey.arrShare}</p>
            </div>
            <div class="bg-white rounded-lg p-3">
              <p class="text-xs text-slate-500 mb-1">Risk Level</p>
              <p class="font-bold text-slate-900">${journey.risk}</p>
            </div>
            <div class="bg-white rounded-lg p-3">
              <p class="text-xs text-slate-500 mb-1">Path</p>
              <p class="font-bold text-slate-900 text-xs">${journey.path}</p>
            </div>
          </div>
          <div class="bg-white rounded-lg p-3">
            <p class="text-xs text-slate-500 mb-1">Recommended Motion</p>
            <p class="text-sm text-slate-700">${journey.motion}</p>
          </div>
        </div>
      `;

      // Deployment Tier
      document.getElementById('deployment-recommendation').innerHTML = `
        <div class="bg-amber-50 border-2 border-amber-200 rounded-xl p-5">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-16 h-16 rounded-lg bg-amber-600 flex items-center justify-center text-white font-bold text-xl">
              ${deploymentTier}
            </div>
            <div class="flex-1">
              <h4 class="text-xl font-bold text-amber-900">${tier.name}</h4>
              <p class="text-sm text-amber-700">${tier.compliance}</p>
            </div>
          </div>
          <div class="grid grid-cols-3 gap-4">
            <div class="bg-white rounded-lg p-3">
              <p class="text-xs text-slate-500 mb-1">Deploy Time</p>
              <p class="font-bold text-slate-900">${tier.time}</p>
            </div>
            <div class="bg-white rounded-lg p-3">
              <p class="text-xs text-slate-500 mb-1">Services Premium</p>
              <p class="font-bold text-emerald-600">${tier.premium}</p>
            </div>
            <div class="bg-white rounded-lg p-3">
              <p class="text-xs text-slate-500 mb-1">Compliance</p>
              <p class="font-bold text-slate-900 text-xs">${tier.compliance}</p>
            </div>
          </div>
          ${deploymentTier === 'D3' || deploymentTier === 'D4' ? `
            <div class="mt-4 bg-amber-100 rounded-lg p-3">
              <p class="text-xs font-semibold text-amber-800 mb-1">⚠️ Phase 0 Required</p>
              <p class="text-sm text-amber-700">D3/D4 deployments require Phase 0 (Deployment & Security) before Foundation can begin. This adds $175-450K and 8-16 weeks.</p>
            </div>
          ` : ''}
        </div>
      `;

      // Breakdown Details
      document.getElementById('breakdown-details').innerHTML = `
        <div class="grid grid-cols-3 gap-4">
          <div class="bg-emerald-50 rounded-lg p-4 border border-emerald-200">
            <h4 class="font-semibold text-emerald-900 mb-2">Product System Foundation</h4>
            <p class="text-2xl font-bold text-emerald-700 mb-1">${foundationScore}/40</p>
            <div class="h-2 bg-emerald-200 rounded-full overflow-hidden mt-2">
              <div class="h-full bg-emerald-600" style="width: ${(foundationScore/40)*100}%"></div>
            </div>
            <p class="text-xs text-emerald-700 mt-2">${foundationScore >= 30 ? 'Strong foundation' : foundationScore >= 15 ? 'Moderate foundation' : 'Foundation needed'}</p>
          </div>
          <div class="bg-violet-50 rounded-lg p-4 border border-violet-200">
            <h4 class="font-semibold text-violet-900 mb-2">AI & Automation Readiness</h4>
            <p class="text-2xl font-bold text-violet-700 mb-1">${aiScore}/30</p>
            <div class="h-2 bg-violet-200 rounded-full overflow-hidden mt-2">
              <div class="h-full bg-violet-600" style="width: ${(aiScore/30)*100}%"></div>
            </div>
            <p class="text-xs text-violet-700 mt-2">${aiScore >= 20 ? 'AI-ready' : aiScore >= 10 ? 'Moderate readiness' : 'AI prep needed'}</p>
          </div>
          <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
            <h4 class="font-semibold text-blue-900 mb-2">Organizational Readiness</h4>
            <p class="text-2xl font-bold text-blue-700 mb-1">${orgScore}/30</p>
            <div class="h-2 bg-blue-200 rounded-full overflow-hidden mt-2">
              <div class="h-full bg-blue-600" style="width: ${(orgScore/30)*100}%"></div>
            </div>
            <p class="text-xs text-blue-700 mt-2">${orgScore >= 20 ? 'Strong org readiness' : orgScore >= 10 ? 'Moderate readiness' : 'Org prep needed'}</p>
          </div>
        </div>
      `;

      // Next Steps
      const nextSteps = [];
      
      if (recommendedPath === 'J1') {
        nextSteps.push(
          'Schedule IPE Readiness Diagnostic ($50-60K) to establish baseline',
          'Identify executive sponsor and secure budget allocation',
          'Begin foundation-building activities',
          'Monitor for maturity signals before proposing platform'
        );
      } else if (recommendedPath === 'J2') {
        nextSteps.push(
          'Confirm trigger event and urgency timeline',
          'Schedule rapid activation sprint ($225-325K)',
          'Compress timeline with premium pricing',
          'Focus on speed, not education'
        );
      } else if (recommendedPath === 'J3') {
        nextSteps.push(
          'Begin with IPE Readiness Diagnostic ($50-60K)',
          'Quantify activation gaps and value blockers',
          'Propose Foundation Phase ($350-450K over 16-20 weeks)',
          deploymentTier === 'D3' || deploymentTier === 'D4' ? 'Plan Phase 0 (Deployment & Security) before Foundation' : '',
          'Do NOT propose expansion until production activation achieved'
        );
      } else if (recommendedPath === 'J4') {
        nextSteps.push(
          'Monitor for trigger events (org changes, AI initiatives, budget cycles)',
          'Have Intelligence Phase proposal ready ($165-325K)',
          'Move fast when timing aligns',
          'Focus on MCP activation and platform expansion'
        );
      }

      document.getElementById('next-steps').innerHTML = nextSteps.filter(s => s).map((step, idx) => `
        <div class="flex items-start gap-3 p-3 bg-white rounded-lg border border-emerald-200">
          <div class="w-6 h-6 rounded-full bg-emerald-600 text-white flex items-center justify-center text-xs font-bold flex-shrink-0">${idx + 1}</div>
          <p class="text-sm text-emerald-900">${step}</p>
        </div>
      `).join('');

      lucide.createIcons();
    }

    function resetAssessment() {
      currentQuestionIndex = 0;
      answers = {};
      deploymentTier = 'D1';
      document.getElementById('assessment-container').classList.remove('hidden');
      document.getElementById('results-container').classList.add('hidden');
      renderQuestion();
    }

    // Initialize
    renderQuestion();
    lucide.createIcons();
  </script>
</body>
</html>

