<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product System Maturity & AI Readiness Assessment</title>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #1a1a2e;
      color: #fff;
      min-height: 100vh;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }
    .card {
      background: linear-gradient(145deg, #16213e 0%, #1a1a2e 100%);
      border-radius: 16px;
      padding: 32px 48px;
      margin-bottom: 24px;
      border: 1px solid rgba(100, 54, 191, 0.3);
      box-shadow: 0 20px 60px rgba(0,0,0,0.4);
    }
    .progress-bar { transition: width 0.3s ease; }
    .option-card { 
      transition: all 0.2s; 
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(100, 54, 191, 0.3);
      color: rgba(255,255,255,0.8);
    }
    .option-card:hover { 
      transform: translateY(-2px); 
      box-shadow: 0 4px 12px rgba(100, 54, 191, 0.3);
      border-color: rgba(100, 54, 191, 0.5);
    }
    .option-card.selected { 
      border-color: #6436bf; 
      background: rgba(100, 54, 191, 0.15);
    }
    .fade-in { animation: fadeIn 0.3s ease-in; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    h1 {
      font-size: 2.4rem;
      font-weight: 700;
      line-height: 1.2;
      margin-bottom: 16px;
      background: linear-gradient(135deg, #fff 0%, #e0d4f7 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    h2 {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 24px;
      color: #fff;
    }
    h3 {
      font-size: 1.1rem;
      font-weight: 600;
      color: #a78bfa;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .logo-badge {
      display: inline-block;
      background: linear-gradient(135deg, #6436bf 0%, #42247f 100%);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 1px;
      margin-bottom: 24px;
    }
    .btn-primary {
      background: linear-gradient(135deg, #6436bf 0%, #42247f 100%);
      color: white;
      padding: 12px 32px;
      border-radius: 8px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(100, 54, 191, 0.4);
    }
    .content-box {
      background: rgba(255,255,255,0.03);
      border-radius: 12px;
      padding: 24px;
      border: 1px solid rgba(255,255,255,0.08);
    }
    .text-muted { color: rgba(255,255,255,0.6); }
    .text-light { color: rgba(255,255,255,0.8); }
  </style>
</head>
<body>
  <!-- Main Content -->
  <main id="app" class="container">
    <!-- Intro Section (shown before assessment starts) -->
    <div id="intro-container">
      <!-- Hero Section -->
      <div class="card" style="text-align: center;">
        <div class="logo-badge">KNAPSACK ASSESSMENT</div>
        <h1>Assess Your Product System Maturity & AI Readiness</h1>
        <p class="subtitle" style="max-width: 600px; margin: 0 auto 32px;">Benchmark your organization against industry standards and discover your personalized path to AI-accelerated product delivery.</p>
        <button onclick="startAssessment()" class="btn-primary" style="display: inline-flex; align-items: center; gap: 8px; font-size: 1rem; padding: 16px 32px;">
          <span>Start Assessment</span>
          <i data-lucide="arrow-right" style="width: 20px; height: 20px;"></i>
        </button>
        <p style="font-size: 0.875rem; color: rgba(255,255,255,0.5); margin-top: 24px;">Takes 5 minutes • No email required • Compare to 50+ enterprise organizations</p>
      </div>

      <!-- Quick Value Props -->
      <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px;">
        <div class="content-box" style="text-align: center;">
          <i data-lucide="bar-chart-3" style="width: 32px; height: 32px; color: #a78bfa; margin: 0 auto 12px; display: block;"></i>
          <p style="font-weight: 600; color: #fff; margin-bottom: 4px;">Benchmark Score</p>
          <p style="font-size: 0.875rem; color: rgba(255,255,255,0.6);">Compare to industry standards</p>
        </div>
        <div class="content-box" style="text-align: center;">
          <i data-lucide="git-branch" style="width: 32px; height: 32px; color: #3b82f6; margin: 0 auto 12px; display: block;"></i>
          <p style="font-weight: 600; color: #fff; margin-bottom: 4px;">Personalized Path</p>
          <p style="font-size: 0.875rem; color: rgba(255,255,255,0.6);">Get matched to your journey</p>
        </div>
        <div class="content-box" style="text-align: center;">
          <i data-lucide="arrow-right" style="width: 32px; height: 32px; color: #a78bfa; margin: 0 auto 12px; display: block;"></i>
          <p style="font-weight: 600; color: #fff; margin-bottom: 4px;">Action Plan</p>
          <p style="font-size: 0.875rem; color: rgba(255,255,255,0.6);">Clear next steps</p>
        </div>
      </div>

      <!-- Competitive Differentiation -->
      <div class="card" style="background: rgba(100, 54, 191, 0.1); border: 2px solid rgba(100, 54, 191, 0.3);">
        <h3 style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
          <i data-lucide="sparkles" style="width: 20px; height: 20px;"></i>
          Why This Assessment is Different
        </h3>
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
          <div class="content-box">
            <p style="font-size: 0.875rem; font-weight: 600; color: #fff; margin-bottom: 8px;">vs. Tool-Specific Assessments</p>
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.6);">Storybook and Chromatic focus on tool adoption. We evaluate governance, activation, and AI readiness—the real drivers of value.</p>
          </div>
          <div class="content-box">
            <p style="font-size: 0.875rem; font-weight: 600; color: #fff; margin-bottom: 8px;">vs. Design-Focused Evaluations</p>
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.6);">Figma assessments measure design consistency. We assess engineering execution and AI-assisted delivery capabilities.</p>
          </div>
          <div class="content-box">
            <p style="font-size: 0.875rem; font-weight: 600; color: #fff; margin-bottom: 8px;">vs. Generic Maturity Models</p>
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.6);">Most frameworks give you a score. We provide a personalized investment path with timelines, budgets, and success criteria.</p>
          </div>
          <div class="content-box">
            <p style="font-size: 0.875rem; font-weight: 600; color: #fff; margin-bottom: 8px;">vs. Consulting Assessments</p>
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.6);">Agency assessments take weeks and cost $50K+. Get actionable insights in 5 minutes, then connect with experts.</p>
          </div>
        </div>
      </div>

      <!-- Benchmarking Context -->
      <div class="card">
        <div style="display: flex; align-items: flex-start; gap: 16px;">
          <div style="width: 48px; height: 48px; background: rgba(59, 130, 246, 0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
            <i data-lucide="users" style="width: 24px; height: 24px; color: #3b82f6;"></i>
          </div>
          <div style="flex: 1;">
            <h3 style="font-size: 1.125rem; font-weight: 700; color: #fff; margin-bottom: 8px;">Benchmarked Against Industry Leaders</h3>
            <p style="font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 12px;">This assessment is based on analysis of 50+ enterprise product systems, including organizations like PNC, Edward Jones, The Home Depot, and CSX.</p>
            <div style="display: flex; flex-wrap: wrap; gap: 8px;">
              <span style="padding: 4px 12px; background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); border-radius: 8px; font-size: 0.75rem; font-weight: 500;">Financial Services</span>
              <span style="padding: 4px 12px; background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); border-radius: 8px; font-size: 0.75rem; font-weight: 500;">Retail</span>
              <span style="padding: 4px 12px; background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); border-radius: 8px; font-size: 0.75rem; font-weight: 500;">Technology</span>
              <span style="padding: 4px 12px; background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); border-radius: 8px; font-size: 0.75rem; font-weight: 500;">Healthcare</span>
            </div>
          </div>
        </div>
      </div>

      <!-- What is Assessed -->
      <div class="card" style="background: rgba(255,255,255,0.03);">
        <p style="font-size: 0.875rem; color: rgba(255,255,255,0.6); text-align: center; margin-bottom: 8px;">
          This assessment evaluates your <span style="font-weight: 600; color: #fff;">Product System</span> foundation, AI readiness, and organizational capacity to help you identify the right path forward.
        </p>
        <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); text-align: center;">
          The only assessment that evaluates AI readiness alongside product system maturity—because governance without AI execution is incomplete.
        </p>
      </div>
    </div>

    <!-- Assessment Form -->
    <div id="assessment-container" style="display: none;">
      <!-- Progress Indicator -->
      <div class="card" style="padding: 24px;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
          <span style="font-size: 0.875rem; font-weight: 500; color: rgba(255,255,255,0.6);">Assessment Progress</span>
          <span style="font-size: 0.875rem; color: rgba(255,255,255,0.5);" id="progress-text">0%</span>
        </div>
        <div style="height: 8px; background: rgba(255,255,255,0.1); border-radius: 9999px; overflow: hidden;">
          <div id="progress-bar" class="progress-bar" style="height: 100%; background: linear-gradient(90deg, #6436bf 0%, #a78bfa 100%); width: 0%;"></div>
        </div>
      </div>

      <!-- Current Question -->
      <div id="question-container"></div>
    </div>

    <!-- Results -->
    <div id="results-container" style="display: none;">
      <!-- Overall Score -->
      <div class="card" style="background: linear-gradient(135deg, #6436bf 0%, #42247f 100%); padding: 32px;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
          <div>
            <p style="color: rgba(255,255,255,0.8); font-size: 0.875rem; font-weight: 500; margin-bottom: 4px;">YOUR READINESS SCORE</p>
            <h2 style="font-size: 3rem; font-weight: 700; color: #fff; margin: 0;" id="overall-score">0</h2>
            <p style="color: rgba(255,255,255,0.8); font-size: 0.875rem; margin-top: 4px;">out of 100 • Benchmark against 50+ enterprises</p>
          </div>
          <div style="width: 96px; height: 96px; border-radius: 50%; background: rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center;">
            <i data-lucide="target" style="width: 48px; height: 48px; color: #fff;"></i>
          </div>
        </div>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 24px;">
          <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 12px;">
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.8); margin-bottom: 4px;">Product System Foundation</p>
            <p style="font-size: 1.5rem; font-weight: 700; color: #fff;" id="foundation-score">0</p>
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.8);">/ 40</p>
          </div>
          <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 12px;">
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.8); margin-bottom: 4px;">AI & Automation Readiness</p>
            <p style="font-size: 1.5rem; font-weight: 700; color: #fff;" id="ai-score">0</p>
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.8);">/ 30</p>
          </div>
          <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 12px;">
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.8); margin-bottom: 4px;">Organizational Readiness</p>
            <p style="font-size: 1.5rem; font-weight: 700; color: #fff;" id="org-score">0</p>
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.8);">/ 30</p>
          </div>
        </div>
      </div>

      <!-- Investment Path Recommendation -->
      <div class="card">
        <h3 style="display: flex; align-items: center; gap: 8px; margin-bottom: 24px;">
          <i data-lucide="git-branch" style="width: 20px; height: 20px; color: #a78bfa;"></i>
          Recommended Investment Path
        </h3>
        <div id="path-recommendation"></div>
      </div>

      <!-- Deployment Tier -->
      <div class="card">
        <h3 style="display: flex; align-items: center; gap: 8px; margin-bottom: 24px;">
          <i data-lucide="server" style="width: 20px; height: 20px; color: #fbbf24;"></i>
          Deployment Tier Assessment
        </h3>
        <div id="deployment-recommendation"></div>
      </div>

      <!-- Detailed Breakdown -->
      <div class="card">
        <h3 style="display: flex; align-items: center; gap: 8px; margin-bottom: 24px;">
          <i data-lucide="bar-chart-3" style="width: 20px; height: 20px; color: #3b82f6;"></i>
          Assessment Breakdown
        </h3>
        <div id="breakdown-details"></div>
      </div>

      <!-- Benchmark Comparison -->
      <div id="benchmark-comparison" class="card"></div>

      <!-- Next Steps -->
      <div class="card" style="background: rgba(100, 54, 191, 0.1); border: 2px solid rgba(100, 54, 191, 0.3);">
        <h3 style="display: flex; align-items: center; gap: 8px; margin-bottom: 24px; color: #fff;">
          <i data-lucide="arrow-right" style="width: 20px; height: 20px; color: #a78bfa;"></i>
          Recommended Next Steps
        </h3>
        <div id="next-steps"></div>
      </div>

      <!-- Personalized Insights -->
      <div id="personalized-insights" class="card"></div>

      <!-- Cost of Inaction -->
      <div id="cost-of-inaction" class="card" style="background: rgba(228, 58, 92, 0.1); border: 2px solid rgba(228, 58, 92, 0.3);"></div>

      <!-- Connect with Knapsack CTA -->
      <div class="card" style="background: linear-gradient(135deg, #6436bf 0%, #3b82f6 100%); padding: 32px;">
        <div style="display: flex; flex-direction: column; gap: 24px;">
          <div style="flex: 1;">
            <h3 style="font-size: 1.5rem; font-weight: 700; color: #fff; margin-bottom: 8px;">Ready to take the next step?</h3>
            <p style="color: rgba(255,255,255,0.85); margin-bottom: 16px;">Schedule a personalized consultation with our IPE experts to discuss your assessment results and explore how the Intelligent Product Engine can accelerate your product delivery.</p>
            <div style="display: flex; flex-wrap: wrap; gap: 12px; font-size: 0.875rem;">
              <div style="display: flex; align-items: center; gap: 8px; background: rgba(255,255,255,0.2); border-radius: 8px; padding: 8px 12px;">
                <i data-lucide="calendar" style="width: 16px; height: 16px;"></i>
                <span>30-minute consultation</span>
              </div>
              <div style="display: flex; align-items: center; gap: 8px; background: rgba(255,255,255,0.2); border-radius: 8px; padding: 8px 12px;">
                <i data-lucide="file-text" style="width: 16px; height: 16px;"></i>
                <span>Detailed roadmap</span>
              </div>
              <div style="display: flex; align-items: center; gap: 8px; background: rgba(255,255,255,0.2); border-radius: 8px; padding: 8px 12px;">
                <i data-lucide="users" style="width: 16px; height: 16px;"></i>
                <span>Expert guidance</span>
              </div>
            </div>
          </div>
          <div style="display: flex; flex-direction: column; gap: 12px;">
            <a href="mailto:ipe@knapsack.cloud?subject=Product System Maturity Assessment Results - Consultation Request" style="background: #fff; color: #6436bf; padding: 12px 24px; border-radius: 8px; font-weight: 600; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none; text-align: center;">
              <i data-lucide="mail" style="width: 20px; height: 20px;"></i>
              <span>Schedule Consultation</span>
            </a>
            <button onclick="downloadResults()" style="background: rgba(255,255,255,0.2); color: #fff; padding: 12px 24px; border-radius: 8px; font-weight: 500; border: 1px solid rgba(255,255,255,0.3); cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px;">
              <i data-lucide="download" style="width: 20px; height: 20px;"></i>
              <span>Download Results</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Restart Button -->
      <button onclick="resetAssessment()" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 24px; background: rgba(255,255,255,0.1); color: #fff; border-radius: 8px; font-weight: 500; border: 1px solid rgba(100, 54, 191, 0.3); cursor: pointer; transition: all 0.2s; margin-bottom: 24px;">
        <i data-lucide="refresh-cw" style="width: 20px; height: 20px;"></i>
        Start New Assessment
      </button>
    </div>
  </main>

  <script>
    // Assessment Questions
    const questions = [
      // Product System Foundation (40 points total)
      {
        category: 'Product System Foundation',
        weight: 40,
        question: 'What is the current state of your design system?',
        options: [
          { text: 'No design system exists', score: 0, value: 'none' },
          { text: 'Informal or scattered components', score: 5, value: 'informal' },
          { text: 'Design system exists but limited adoption', score: 10, value: 'limited' },
          { text: 'Design system deployed, moderate adoption (30-70%)', score: 15, value: 'moderate' },
          { text: 'Mature design system with high adoption (>70%)', score: 20, value: 'mature' }
        ]
      },
      {
        category: 'Product System Foundation',
        weight: 40,
        question: 'How is your design system governed?',
        options: [
          { text: 'No governance structure', score: 0, value: 'none' },
          { text: 'Informal or ad-hoc governance', score: 3, value: 'informal' },
          { text: 'Governance exists but not enforced', score: 6, value: 'exists' },
          { text: 'Active governance with decision authority', score: 10, value: 'active' },
          { text: 'Cross-system governance with clear rules', score: 12, value: 'cross-system' }
        ]
      },
      {
        category: 'Product System Foundation',
        weight: 40,
        question: 'What is the quality of your design system documentation?',
        options: [
          { text: 'No documentation', score: 0, value: 'none' },
          { text: 'Minimal or outdated documentation', score: 2, value: 'minimal' },
          { text: 'Basic documentation exists', score: 4, value: 'basic' },
          { text: 'Comprehensive, up-to-date documentation', score: 6, value: 'comprehensive' },
          { text: 'Living documentation integrated with code', score: 8, value: 'living' }
        ]
      },
      
      // AI & Automation Readiness (30 points total)
      {
        category: 'AI & Automation Readiness',
        weight: 30,
        question: 'How are your teams currently using AI coding tools?',
        options: [
          { text: 'No AI tools in use', score: 0, value: 'none' },
          { text: 'Limited experimentation', score: 3, value: 'experimental' },
          { text: 'Some teams using AI tools', score: 6, value: 'some' },
          { text: 'Widespread AI tool adoption', score: 10, value: 'widespread' },
          { text: 'AI tools integrated into workflows', score: 12, value: 'integrated' }
        ]
      },
      {
        category: 'AI & Automation Readiness',
        weight: 30,
        question: 'What is your API maturity and integration architecture?',
        options: [
          { text: 'No APIs or integration architecture', score: 0, value: 'none' },
          { text: 'Basic APIs exist', score: 3, value: 'basic' },
          { text: 'Well-defined APIs with documentation', score: 6, value: 'defined' },
          { text: 'Mature API architecture', score: 9, value: 'mature' },
          { text: 'API-first architecture with MCP compatibility', score: 12, value: 'mcp-ready' }
        ]
      },
      {
        category: 'AI & Automation Readiness',
        weight: 30,
        question: 'What is the quality of your product data and metadata?',
        options: [
          { text: 'No structured data', score: 0, value: 'none' },
          { text: 'Fragmented or inconsistent data', score: 2, value: 'fragmented' },
          { text: 'Some structured data exists', score: 4, value: 'some' },
          { text: 'Well-structured, consistent data', score: 6, value: 'structured' },
          { text: 'Rich metadata with semantic relationships', score: 8, value: 'rich' }
        ]
      },
      
      // Organizational Readiness (30 points total)
      {
        category: 'Organizational Readiness',
        weight: 30,
        question: 'Is there an executive sponsor for this initiative?',
        options: [
          { text: 'No sponsor identified', score: 0, value: 'none' },
          { text: 'Influencer only (IC or Manager)', score: 3, value: 'influencer' },
          { text: 'Director-level champion', score: 6, value: 'director' },
          { text: 'VP-level executive sponsor', score: 10, value: 'vp' },
          { text: 'C-level executive sponsor', score: 12, value: 'c-level' }
        ]
      },
      {
        category: 'Organizational Readiness',
        weight: 30,
        question: 'What is the status of budget for this investment?',
        options: [
          { text: 'No budget allocated', score: 0, value: 'none' },
          { text: 'Budget would need to be found', score: 3, value: 'find' },
          { text: 'Budget exists, needs approval', score: 6, value: 'approval' },
          { text: 'Budget allocated and approved', score: 10, value: 'allocated' },
          { text: 'Budget allocated with multi-year commitment', score: 12, value: 'multi-year' }
        ]
      },
      {
        category: 'Organizational Readiness',
        weight: 30,
        question: 'What is your team capacity for change management?',
        options: [
          { text: 'No capacity for change', score: 0, value: 'none' },
          { text: 'Limited capacity', score: 2, value: 'limited' },
          { text: 'Moderate capacity', score: 4, value: 'moderate' },
          { text: 'Dedicated change management resources', score: 6, value: 'dedicated' },
          { text: 'Strong change management capability', score: 8, value: 'strong' }
        ]
      },
      
      // Deployment Tier Questions
      {
        category: 'Deployment',
        weight: 0,
        question: 'What are your compliance and infrastructure requirements?',
        options: [
          { text: 'Standard SaaS acceptable (SOC 2)', score: 0, value: 'D1', tier: 'D1' },
          { text: 'Dedicated environment needed (SOC 2, GDPR)', score: 0, value: 'D2', tier: 'D2' },
          { text: 'Private cloud required (PCI, HIPAA)', score: 0, value: 'D3', tier: 'D3' },
          { text: 'Self-hosted/on-premises (FedRAMP, Defense)', score: 0, value: 'D4', tier: 'D4' },
          { text: 'Unknown - need to validate', score: 0, value: 'unknown', tier: 'D1' }
        ]
      }
    ];

    let currentQuestionIndex = 0;
    let answers = {};
    let deploymentTier = 'D1';
    let recommendedPath = 'J1';

    const journeyDetails = {
      J1: {
        name: 'Foundation Path',
        color: 'slate',
        tcv: '$50-60K',
        arrShare: '10%',
        risk: 'Low',
        description: 'For organizations without a system of record. Build before governing.',
        path: 'Diagnostic → Foundation → Governance',
        motion: 'Light-touch nurturing. Monitor for maturity signals.',
        accounts: ['Early-stage design system orgs', 'No engineering ownership yet']
      },
      J2: {
        name: 'Acceleration Path',
        color: 'blue',
        tcv: '$50K diagnostic → $225-325K sprint',
        arrShare: '5%',
        risk: 'Low',
        description: 'For mature orgs with sudden trigger. Fast activation, minimal services.',
        path: 'Diagnostic → Rapid Activation',
        motion: 'Fast activation sprint. Confirm trigger is real and timeline achievable.',
        accounts: ['Adobe-profile accounts', 'Enterprise rollout triggers']
      },
      J3: {
        name: 'Activation Path',
        color: 'emerald',
        tcv: '$740K-1.6M over 40-68 weeks',
        arrShare: '60%',
        risk: 'High',
        description: 'For high-value accounts blocked on activation. Full transformation.',
        path: 'Diagnostic → (Phase 0) → Foundation → Activation → Intelligence',
        motion: 'Services-led transformation. Begin with diagnostic ($50-60K).',
        accounts: ['PNC', 'Edward Jones', 'DoubleVerify', 'Qualcomm', 'GSK US']
      },
      J4: {
        name: 'Intelligence Path',
        color: 'violet',
        tcv: '$165-325K MCP + platform expansion',
        arrShare: '25%',
        risk: 'Medium',
        description: 'For implemented accounts ready for AI enablement. Expansion-focused.',
        path: 'Diagnostic → MCP Activation → Expansion',
        motion: 'Monitor for trigger. When identified, propose Intelligence phase.',
        accounts: ['The Home Depot', 'CSX', 'GSK Global', 'Crown Equipment']
      }
    };

    const deploymentTiers = {
      D1: { name: 'Cloud Standard', premium: '—', time: '2-4 weeks', compliance: 'SOC 2' },
      D2: { name: 'Cloud Dedicated', premium: '+$50-100K', time: '4-8 weeks', compliance: 'SOC 2, GDPR' },
      D3: { name: 'Private Cloud', premium: '+$175-275K', time: '8-16 weeks', compliance: 'SOC 2, HIPAA, PCI-DSS' },
      D4: { name: 'Self-Hosted', premium: '+$350-550K', time: '16-24+ weeks', compliance: 'FedRAMP-ready, Custom' }
    };

    function renderQuestion() {
      if (currentQuestionIndex >= questions.length) {
        calculateResults();
        return;
      }

      const question = questions[currentQuestionIndex];
      const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
      
      document.getElementById('progress-text').textContent = `${Math.round(progress)}%`;
      document.getElementById('progress-bar').style.width = `${progress}%`;

      const categoryColors = {
        'Product System Foundation': 'emerald',
        'AI & Automation Readiness': 'violet',
        'Organizational Readiness': 'blue',
        'Deployment': 'amber'
      };

      const color = categoryColors[question.category] || 'slate';

      const colorMap = {
        'emerald': { bg: 'rgba(16, 185, 129, 0.15)', border: 'rgba(16, 185, 129, 0.3)', text: '#10b981' },
        'violet': { bg: 'rgba(100, 54, 191, 0.15)', border: 'rgba(100, 54, 191, 0.3)', text: '#a78bfa' },
        'blue': { bg: 'rgba(59, 130, 246, 0.15)', border: 'rgba(59, 130, 246, 0.3)', text: '#3b82f6' },
        'amber': { bg: 'rgba(251, 191, 36, 0.15)', border: 'rgba(251, 191, 36, 0.3)', text: '#fbbf24' },
        'slate': { bg: 'rgba(255,255,255,0.05)', border: 'rgba(255,255,255,0.1)', text: '#fff' }
      };
      const colorStyle = colorMap[color] || colorMap.slate;

      const optionsHtml = question.options.map((opt, idx) => {
        const isSelected = answers[currentQuestionIndex] === opt.value;
        return `
          <button
            onclick="selectOption(${idx})"
            class="option-card"
            style="width: 100%; text-align: left; padding: 16px; border-radius: 8px; border: 2px solid ${isSelected ? '#6436bf' : 'rgba(100, 54, 191, 0.3)'}; background: ${isSelected ? 'rgba(100, 54, 191, 0.15)' : 'rgba(255,255,255,0.03)'}; margin-bottom: 12px; cursor: pointer;"
          >
            <div style="display: flex; align-items: center; justify-content: space-between;">
              <span style="font-size: 0.875rem; font-weight: 500; color: rgba(255,255,255,0.8);">${opt.text}</span>
              ${isSelected ? '<i data-lucide="check-circle" style="width: 20px; height: 20px; color: #6436bf;"></i>' : ''}
            </div>
          </button>
        `;
      }).join('');

      document.getElementById('question-container').innerHTML = `
        <div class="card fade-in">
          <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
            <span style="padding: 4px 12px; background: ${colorStyle.bg}; color: ${colorStyle.text}; border-radius: 8px; font-size: 0.75rem; font-weight: 600;">
              ${question.category}
            </span>
            ${question.weight > 0 ? `<span style="font-size: 0.75rem; color: rgba(255,255,255,0.5);">${question.weight} points max</span>` : ''}
          </div>
          <h2 style="font-size: 1.125rem; font-weight: 600; color: #fff; margin-bottom: 16px;">${question.question}</h2>
          <div style="display: flex; flex-direction: column; gap: 12px;">${optionsHtml}</div>
          ${currentQuestionIndex > 0 ? `
            <button
              onclick="goBack()"
              style="margin-top: 16px; font-size: 0.875rem; color: rgba(255,255,255,0.5); display: flex; align-items: center; gap: 4px; background: none; border: none; cursor: pointer;"
            >
              <i data-lucide="arrow-left" style="width: 16px; height: 16px;"></i> Previous question
            </button>
          ` : ''}
        </div>
      `;

      lucide.createIcons();
    }

    function selectOption(index) {
      const question = questions[currentQuestionIndex];
      const option = question.options[index];
      
      answers[currentQuestionIndex] = option.value;
      
      if (option.tier) {
        deploymentTier = option.tier;
      }
      
      currentQuestionIndex++;
      setTimeout(() => renderQuestion(), 300);
    }

    function goBack() {
      if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        delete answers[currentQuestionIndex];
        renderQuestion();
      }
    }

    function calculateResults() {
      let foundationScore = 0;
      let aiScore = 0;
      let orgScore = 0;

      questions.forEach((q, idx) => {
        if (q.category === 'Deployment') return;
        
        const answerValue = answers[idx];
        const selectedOption = q.options.find(opt => opt.value === answerValue);
        
        if (selectedOption) {
          if (q.category === 'Product System Foundation') {
            foundationScore += selectedOption.score;
          } else if (q.category === 'AI & Automation Readiness') {
            aiScore += selectedOption.score;
          } else if (q.category === 'Organizational Readiness') {
            orgScore += selectedOption.score;
          }
        }
      });

      const totalScore = foundationScore + aiScore + orgScore;

      // Determine Investment Path
      recommendedPath = 'J1';
      
      if (totalScore >= 70 && foundationScore >= 25 && orgScore >= 20) {
        recommendedPath = 'J4';
      } else if (totalScore >= 40 && foundationScore >= 15 && orgScore >= 15) {
        recommendedPath = 'J3';
      } else if (totalScore >= 50 && orgScore >= 20) {
        recommendedPath = 'J2';
      } else {
        recommendedPath = 'J1';
      }

      // Display results
      document.getElementById('assessment-container').style.display = 'none';
      document.getElementById('results-container').style.display = 'block';
      // Scroll to top of results
      window.scrollTo({ top: 0, behavior: 'smooth' });
      
      document.getElementById('overall-score').textContent = totalScore;
      document.getElementById('foundation-score').textContent = foundationScore;
      document.getElementById('ai-score').textContent = aiScore;
      document.getElementById('org-score').textContent = orgScore;

      const journey = journeyDetails[recommendedPath];
      const tier = deploymentTiers[deploymentTier];

      const journeyColorMap = {
        'slate': { bg: 'rgba(255,255,255,0.05)', border: 'rgba(255,255,255,0.1)', text: '#fff', badge: '#64748b' },
        'blue': { bg: 'rgba(59, 130, 246, 0.15)', border: 'rgba(59, 130, 246, 0.3)', text: '#93c5fd', badge: '#3b82f6' },
        'emerald': { bg: 'rgba(16, 185, 129, 0.15)', border: 'rgba(16, 185, 129, 0.3)', text: '#6ee7b7', badge: '#10b981' },
        'violet': { bg: 'rgba(100, 54, 191, 0.15)', border: 'rgba(100, 54, 191, 0.3)', text: '#c4b5fd', badge: '#6436bf' }
      };
      const journeyColor = journeyColorMap[journey.color] || journeyColorMap.slate;

      // Investment Path Recommendation
      document.getElementById('path-recommendation').innerHTML = `
        <div style="background: ${journeyColor.bg}; border: 2px solid ${journeyColor.border}; border-radius: 12px; padding: 20px;">
          <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
            <div style="width: 64px; height: 64px; border-radius: 8px; background: ${journeyColor.badge}; display: flex; align-items: center; justify-content: center; color: #fff; font-weight: 700; font-size: 1.25rem;">
              ${recommendedPath}
            </div>
            <div style="flex: 1;">
              <h4 style="font-size: 1.25rem; font-weight: 700; color: #fff;">${journey.name}</h4>
              <p style="font-size: 0.875rem; color: ${journeyColor.text};">${journey.description}</p>
            </div>
          </div>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 16px;">
            <div class="content-box">
              <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">TCV Range</p>
              <p style="font-weight: 700; color: #fff;">${journey.tcv}</p>
            </div>
            <div class="content-box">
              <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">ARR Share</p>
              <p style="font-weight: 700; color: #fff;">${journey.arrShare}</p>
            </div>
            <div class="content-box">
              <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">Risk Level</p>
              <p style="font-weight: 700; color: #fff;">${journey.risk}</p>
            </div>
            <div class="content-box">
              <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">Path</p>
              <p style="font-weight: 700; color: #fff; font-size: 0.75rem;">${journey.path}</p>
            </div>
          </div>
          <div class="content-box">
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">Recommended Motion</p>
            <p style="font-size: 0.875rem; color: rgba(255,255,255,0.8);">${journey.motion}</p>
          </div>
        </div>
      `;

      // Deployment Tier
      document.getElementById('deployment-recommendation').innerHTML = `
        <div style="background: rgba(251, 191, 36, 0.15); border: 2px solid rgba(251, 191, 36, 0.3); border-radius: 12px; padding: 20px;">
          <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
            <div style="width: 64px; height: 64px; border-radius: 8px; background: #fbbf24; display: flex; align-items: center; justify-content: center; color: #000; font-weight: 700; font-size: 1.25rem;">
              ${deploymentTier}
            </div>
            <div style="flex: 1;">
              <h4 style="font-size: 1.25rem; font-weight: 700; color: #fff;">${tier.name}</h4>
              <p style="font-size: 0.875rem; color: #fde047;">${tier.compliance}</p>
            </div>
          </div>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
            <div class="content-box">
              <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">Deploy Time</p>
              <p style="font-weight: 700; color: #fff;">${tier.time}</p>
            </div>
            <div class="content-box">
              <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">Services Premium</p>
              <p style="font-weight: 700; color: #4ade80;">${tier.premium}</p>
            </div>
            <div class="content-box">
              <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">Compliance</p>
              <p style="font-weight: 700; color: #fff; font-size: 0.75rem;">${tier.compliance}</p>
            </div>
          </div>
          ${deploymentTier === 'D3' || deploymentTier === 'D4' ? `
            <div style="margin-top: 16px; background: rgba(251, 191, 36, 0.2); border-radius: 8px; padding: 12px;">
              <p style="font-size: 0.75rem; font-weight: 600; color: #fde047; margin-bottom: 4px;">⚠️ Phase 0 Required</p>
              <p style="font-size: 0.875rem; color: #fde047;">D3/D4 deployments require Phase 0 (Deployment & Security) before Foundation can begin. This adds $175-450K and 8-16 weeks.</p>
            </div>
          ` : ''}
        </div>
      `;

      // Breakdown Details
      document.getElementById('breakdown-details').innerHTML = `
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
          <div style="background: rgba(16, 185, 129, 0.15); border-radius: 12px; padding: 16px; border: 1px solid rgba(16, 185, 129, 0.3);">
            <h4 style="font-weight: 600; color: #6ee7b7; margin-bottom: 8px;">Product System Foundation</h4>
            <p style="font-size: 1.5rem; font-weight: 700; color: #6ee7b7; margin-bottom: 4px;">${foundationScore}/40</p>
            <div style="height: 8px; background: rgba(16, 185, 129, 0.2); border-radius: 9999px; overflow: hidden; margin-top: 8px;">
              <div style="height: 100%; background: #10b981; width: ${(foundationScore/40)*100}%"></div>
            </div>
            <p style="font-size: 0.75rem; color: #6ee7b7; margin-top: 8px;">${foundationScore >= 30 ? 'Strong foundation' : foundationScore >= 15 ? 'Moderate foundation' : 'Foundation needed'}</p>
          </div>
          <div style="background: rgba(100, 54, 191, 0.15); border-radius: 12px; padding: 16px; border: 1px solid rgba(100, 54, 191, 0.3);">
            <h4 style="font-weight: 600; color: #c4b5fd; margin-bottom: 8px;">AI & Automation Readiness</h4>
            <p style="font-size: 1.5rem; font-weight: 700; color: #c4b5fd; margin-bottom: 4px;">${aiScore}/30</p>
            <div style="height: 8px; background: rgba(100, 54, 191, 0.2); border-radius: 9999px; overflow: hidden; margin-top: 8px;">
              <div style="height: 100%; background: #6436bf; width: ${(aiScore/30)*100}%"></div>
            </div>
            <p style="font-size: 0.75rem; color: #c4b5fd; margin-top: 8px;">${aiScore >= 20 ? 'AI-ready' : aiScore >= 10 ? 'Moderate readiness' : 'AI prep needed'}</p>
          </div>
          <div style="background: rgba(59, 130, 246, 0.15); border-radius: 12px; padding: 16px; border: 1px solid rgba(59, 130, 246, 0.3);">
            <h4 style="font-weight: 600; color: #93c5fd; margin-bottom: 8px;">Organizational Readiness</h4>
            <p style="font-size: 1.5rem; font-weight: 700; color: #93c5fd; margin-bottom: 4px;">${orgScore}/30</p>
            <div style="height: 8px; background: rgba(59, 130, 246, 0.2); border-radius: 9999px; overflow: hidden; margin-top: 8px;">
              <div style="height: 100%; background: #3b82f6; width: ${(orgScore/30)*100}%"></div>
            </div>
            <p style="font-size: 0.75rem; color: #93c5fd; margin-top: 8px;">${orgScore >= 20 ? 'Strong org readiness' : orgScore >= 10 ? 'Moderate readiness' : 'Org prep needed'}</p>
          </div>
        </div>
      `;

      // Benchmark Comparison
      const benchmarkData = generateBenchmarkComparison(totalScore, foundationScore, aiScore, orgScore, recommendedPath);
      document.getElementById('benchmark-comparison').innerHTML = `
        <h3 style="font-size: 1.125rem; font-weight: 700; color: #fff; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
          <i data-lucide="trending-up" style="width: 20px; height: 20px; color: #3b82f6;"></i>
          How You Compare to Similar Organizations
        </h3>
        <div style="display: flex; flex-direction: column; gap: 16px;">
          <div style="background: rgba(59, 130, 246, 0.15); border-radius: 12px; padding: 16px; border: 1px solid rgba(59, 130, 246, 0.3);">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
              <p style="font-weight: 600; color: #93c5fd;">Your Overall Score</p>
              <p style="font-size: 1.5rem; font-weight: 700; color: #93c5fd;">${totalScore}/100</p>
            </div>
            <div style="display: flex; flex-direction: column; gap: 8px;">
              <div style="display: flex; align-items: center; justify-content: space-between; font-size: 0.875rem;">
                <span style="color: rgba(255,255,255,0.6);">Industry Average</span>
                <span style="font-weight: 500; color: rgba(255,255,255,0.8);">${benchmarkData.industryAvg}/100</span>
              </div>
              <div style="height: 8px; background: rgba(59, 130, 246, 0.2); border-radius: 9999px; overflow: hidden;">
                <div style="height: 100%; background: #60a5fa; width: ${benchmarkData.industryAvg}%"></div>
              </div>
              <div style="display: flex; align-items: center; justify-content: space-between; font-size: 0.875rem;">
                <span style="color: rgba(255,255,255,0.6);">Top Quartile</span>
                <span style="font-weight: 500; color: rgba(255,255,255,0.8);">${benchmarkData.topQuartile}/100</span>
              </div>
              <div style="height: 8px; background: rgba(59, 130, 246, 0.2); border-radius: 9999px; overflow: hidden;">
                <div style="height: 100%; background: #3b82f6; width: ${benchmarkData.topQuartile}%"></div>
              </div>
            </div>
            <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(59, 130, 246, 0.3);">
              <p style="font-size: 0.75rem; color: #93c5fd;">
                <span style="font-weight: 600;">${benchmarkData.comparison}</span> ${benchmarkData.comparisonDetail}
              </p>
            </div>
          </div>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
            <div class="content-box">
              <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">Foundation</p>
              <p style="font-size: 0.875rem; font-weight: 600; color: #fff;">${foundationScore >= 30 ? 'Top 25%' : foundationScore >= 20 ? 'Top 50%' : foundationScore >= 10 ? 'Bottom 50%' : 'Bottom 25%'}</p>
            </div>
            <div class="content-box">
              <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">AI Readiness</p>
              <p style="font-size: 0.875rem; font-weight: 600; color: #fff;">${aiScore >= 20 ? 'Top 25%' : aiScore >= 10 ? 'Top 50%' : aiScore >= 5 ? 'Bottom 50%' : 'Bottom 25%'}</p>
            </div>
            <div class="content-box">
              <p style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px;">Org Readiness</p>
              <p style="font-size: 0.875rem; font-weight: 600; color: #fff;">${orgScore >= 20 ? 'Top 25%' : orgScore >= 10 ? 'Top 50%' : orgScore >= 5 ? 'Bottom 50%' : 'Bottom 25%'}</p>
            </div>
          </div>
          <div class="content-box">
            <p style="font-size: 0.75rem; color: rgba(255,255,255,0.6);">
              <span style="font-weight: 600;">Based on analysis of 50+ enterprise organizations</span> including PNC, Edward Jones, The Home Depot, CSX, and others across Financial Services, Retail, Technology, and Healthcare industries.
            </p>
          </div>
        </div>
      `;

      // Next Steps
      const nextSteps = [];
      
      if (recommendedPath === 'J1') {
        nextSteps.push(
          'Schedule IPE Readiness Diagnostic ($50-60K) to establish baseline',
          'Identify executive sponsor and secure budget allocation',
          'Begin foundation-building activities',
          'Monitor for maturity signals before proposing platform'
        );
      } else if (recommendedPath === 'J2') {
        nextSteps.push(
          'Confirm trigger event and urgency timeline',
          'Schedule rapid activation sprint ($225-325K)',
          'Compress timeline with premium pricing',
          'Focus on speed, not education'
        );
      } else if (recommendedPath === 'J3') {
        nextSteps.push(
          'Begin with IPE Readiness Diagnostic ($50-60K)',
          'Quantify activation gaps and value blockers',
          'Propose Foundation Phase ($350-450K over 16-20 weeks)',
          deploymentTier === 'D3' || deploymentTier === 'D4' ? 'Plan Phase 0 (Deployment & Security) before Foundation' : '',
          'Do NOT propose expansion until production activation achieved'
        );
      } else if (recommendedPath === 'J4') {
        nextSteps.push(
          'Monitor for trigger events (org changes, AI initiatives, budget cycles)',
          'Have Intelligence Phase proposal ready ($165-325K)',
          'Move fast when timing aligns',
          'Focus on MCP activation and platform expansion'
        );
      }

      document.getElementById('next-steps').innerHTML = nextSteps.filter(s => s).map((step, idx) => `
        <div style="display: flex; align-items: flex-start; gap: 12px; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 8px; border: 1px solid rgba(100, 54, 191, 0.3); margin-bottom: 12px;">
          <div style="width: 24px; height: 24px; border-radius: 50%; background: #6436bf; color: #fff; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 700; flex-shrink: 0;">${idx + 1}</div>
          <p style="font-size: 0.875rem; color: rgba(255,255,255,0.9);">${step}</p>
        </div>
      `).join('');

      // Personalized Insights
      const insights = generatePersonalizedInsights(foundationScore, aiScore, orgScore, totalScore, recommendedPath);
      if (insights.length > 0) {
        const insightColorMap = {
          'emerald': { bg: 'rgba(16, 185, 129, 0.15)', border: 'rgba(16, 185, 129, 0.3)', text: '#6ee7b7', badge: '#10b981' },
          'violet': { bg: 'rgba(100, 54, 191, 0.15)', border: 'rgba(100, 54, 191, 0.3)', text: '#c4b5fd', badge: '#6436bf' },
          'blue': { bg: 'rgba(59, 130, 246, 0.15)', border: 'rgba(59, 130, 246, 0.3)', text: '#93c5fd', badge: '#3b82f6' },
          'amber': { bg: 'rgba(251, 191, 36, 0.15)', border: 'rgba(251, 191, 36, 0.3)', text: '#fde047', badge: '#fbbf24' }
        };
        document.getElementById('personalized-insights').innerHTML = `
          <h3 style="font-size: 1.125rem; font-weight: 700; color: #fff; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
            <i data-lucide="lightbulb" style="width: 20px; height: 20px; color: #fbbf24;"></i>
            Personalized Insights for Your Organization
          </h3>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
            ${insights.map(insight => {
              const colors = insightColorMap[insight.color] || insightColorMap.emerald;
              return `
              <div style="background: ${colors.bg}; border-radius: 12px; padding: 16px; border: 1px solid ${colors.border};">
                <div style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 12px;">
                  <div style="width: 40px; height: 40px; border-radius: 8px; background: ${colors.badge}; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                    <i data-lucide="${insight.icon}" style="width: 20px; height: 20px; color: #fff;"></i>
                  </div>
                  <div style="flex: 1;">
                    <h4 style="font-weight: 600; color: #fff; margin-bottom: 4px;">${insight.title}</h4>
                    <p style="font-size: 0.875rem; color: ${colors.text}; margin-bottom: 8px;">${insight.text}</p>
                    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 8px; border: 1px solid ${colors.border};">
                      <p style="font-size: 0.75rem; font-weight: 600; color: ${colors.text}; margin-bottom: 4px;">Value Insight</p>
                      <p style="font-size: 0.75rem; color: ${colors.text};">${insight.value}</p>
                    </div>
                  </div>
                </div>
              </div>
            `;
            }).join('')}
          </div>
        `;
      } else {
        document.getElementById('personalized-insights').innerHTML = '';
      }

      // Cost of Inaction
      const inactionCosts = generateCostOfInaction(foundationScore, aiScore, orgScore, totalScore, recommendedPath);
      document.getElementById('cost-of-inaction').innerHTML = `
        <h3 style="font-size: 1.125rem; font-weight: 700; color: #fff; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
          <i data-lucide="alert-triangle" style="width: 20px; height: 20px; color: #f87171;"></i>
          The Cost of Not Taking Action
        </h3>
        <p style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 16px;">Based on your assessment, here's what happens if you delay IPE activation:</p>
        <div style="display: flex; flex-direction: column; gap: 12px;">
          ${inactionCosts.map(cost => `
            <div style="background: rgba(255,255,255,0.03); border-radius: 12px; padding: 16px; border: 1px solid rgba(228, 58, 92, 0.3);">
              <div style="display: flex; align-items: flex-start; gap: 12px;">
                <div style="width: 32px; height: 32px; border-radius: 8px; background: #e43a5c; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                  <i data-lucide="${cost.icon}" style="width: 16px; height: 16px; color: #fff;"></i>
                </div>
                <div style="flex: 1;">
                  <h4 style="font-weight: 600; color: #fff; margin-bottom: 4px;">${cost.title}</h4>
                  <p style="font-size: 0.875rem; color: rgba(255,255,255,0.8);">${cost.description}</p>
                  ${cost.impact ? `<p style="font-size: 0.75rem; font-weight: 600; color: #f87171; margin-top: 8px;">Impact: ${cost.impact}</p>` : ''}
                </div>
              </div>
            </div>
          `).join('')}
        </div>
        <div style="margin-top: 16px; background: rgba(228, 58, 92, 0.15); border-radius: 12px; padding: 16px; border: 1px solid rgba(228, 58, 92, 0.3);">
          <p style="font-size: 0.875rem; font-weight: 600; color: #fff; margin-bottom: 4px;">The Opportunity Cost</p>
          <p style="font-size: 0.875rem; color: rgba(255,255,255,0.8);">${getOpportunityCostMessage(recommendedPath, totalScore)} Organizations that act now see measurable improvements within 8-12 weeks.</p>
        </div>
      `;

      lucide.createIcons();
    }

    function startAssessment() {
      document.getElementById('intro-container').style.display = 'none';
      document.getElementById('assessment-container').style.display = 'block';
      renderQuestion();
    }

    function resetAssessment() {
      currentQuestionIndex = 0;
      answers = {};
      deploymentTier = 'D1';
      document.getElementById('intro-container').style.display = 'block';
      document.getElementById('assessment-container').style.display = 'none';
      document.getElementById('results-container').style.display = 'none';
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function downloadResults() {
      const results = {
        overallScore: document.getElementById('overall-score').textContent,
        foundationScore: document.getElementById('foundation-score').textContent,
        aiScore: document.getElementById('ai-score').textContent,
        orgScore: document.getElementById('org-score').textContent,
        deploymentTier: deploymentTier,
        recommendedPath: recommendedPath,
        timestamp: new Date().toISOString()
      };
      
      const blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `ipe-assessment-results-${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function generatePersonalizedInsights(foundationScore, aiScore, orgScore, totalScore, recommendedPath) {
      const insights = [];
      
      // Foundation insights
      if (foundationScore < 15) {
        insights.push({
          type: 'foundation',
          icon: 'building',
          color: 'emerald',
          title: 'Foundation Building Opportunity',
          text: 'Your design system foundation needs strengthening. This is actually an advantage—you can build governance in from the start rather than retrofitting it later.',
          value: 'Organizations that build governance early see 3x faster activation timelines.'
        });
      } else if (foundationScore >= 30) {
        insights.push({
          type: 'foundation',
          icon: 'check-circle',
          color: 'emerald',
          title: 'Strong Foundation Detected',
          text: 'Your mature design system positions you well for rapid IPE activation. The Control Plane can leverage your existing system immediately.',
          value: 'Mature design systems typically see ROI within 8-12 weeks of IPE activation.'
        });
      }

      // AI readiness insights
      if (aiScore < 10) {
        insights.push({
          type: 'ai',
          icon: 'sparkles',
          color: 'violet',
          title: 'AI Adoption Window',
          text: 'Low AI tool adoption suggests your organization is early in the AI journey. IPE can help establish best practices from the start.',
          value: 'Early AI governance prevents technical debt that costs 2-3x more to fix later.'
        });
      } else if (aiScore >= 20) {
        insights.push({
          type: 'ai',
          icon: 'zap',
          color: 'violet',
          title: 'AI-Ready Organization',
          text: 'Your teams are already using AI tools. IPE\'s Control Plane will help ensure AI-generated code aligns with your design system standards.',
          value: 'Organizations with AI tool adoption see 40-60% improvement in AI output quality with IPE context.'
        });
      }

      // Organizational insights
      if (orgScore < 10) {
        insights.push({
          type: 'org',
          icon: 'users',
          color: 'blue',
          title: 'Sponsorship Strategy Needed',
          text: 'Securing executive sponsorship is critical for IPE success. Consider starting with a pilot program to demonstrate value.',
          value: 'Pilot programs with clear ROI metrics help secure executive buy-in in 60% of cases.'
        });
      } else if (orgScore >= 20) {
        insights.push({
          type: 'org',
          icon: 'trending-up',
          color: 'blue',
          title: 'Strong Organizational Readiness',
          text: 'Your executive sponsorship and budget alignment indicate readiness for transformation. This positions you for accelerated value delivery.',
          value: 'Organizations with strong sponsorship see 50% faster time-to-value.'
        });
      }

      // Path-specific insights
      if (recommendedPath === 'J3') {
        insights.push({
          type: 'path',
          icon: 'rocket',
          color: 'emerald',
          title: 'High-Value Transformation Opportunity',
          text: 'The Activation Path represents 60% of IPE ARR. Your organization shows the right signals for a full transformation journey.',
          value: 'J3 accounts typically see $2-5M in value unlocked over 18-24 months.'
        });
      } else if (recommendedPath === 'J4') {
        insights.push({
          type: 'path',
          icon: 'brain',
          color: 'violet',
          title: 'Intelligence Phase Ready',
          text: 'Your mature foundation and AI readiness make you an ideal candidate for Intelligence Phase activation. Focus on MCP integration and expansion.',
          value: 'J4 accounts see fastest ROI—typically 6-8 weeks to first AI-assisted production deployment.'
        });
      }

      return insights;
    }

    function generateCostOfInaction(foundationScore, aiScore, orgScore, totalScore, recommendedPath) {
      const costs = [];

      // Foundation-related costs
      if (foundationScore < 20) {
        costs.push({
          icon: 'trending-down',
          title: 'Design System Fragmentation Accelerates',
          description: 'Without governance, inconsistent patterns multiply. Each new team builds their own components, creating technical debt that costs 2-3x more to fix later.',
          impact: 'Technical debt compounds 15-25% per quarter without intervention'
        });
      } else if (foundationScore >= 20 && foundationScore < 30) {
        costs.push({
          icon: 'users-x',
          title: 'Adoption Plateaus Without Activation',
          description: 'Your design system exists but teams aren\'t getting full value. "Implemented but not activated" means you\'re paying for infrastructure without realizing ROI.',
          impact: '30-70% adoption typically stalls without governance activation'
        });
      }

      // AI-related costs
      if (aiScore >= 10) {
        costs.push({
          icon: 'code',
          title: 'AI Tools Generate Inconsistent Code',
          description: 'Your teams are using AI coding tools, but without IPE\'s Control Plane, AI generates code that doesn\'t match your design system standards. This creates rework and slows velocity.',
          impact: '40-60% of AI-generated code requires manual fixes without governed context'
        });
      } else if (aiScore < 10) {
        costs.push({
          icon: 'clock',
          title: 'You\'ll Play Catch-Up Later',
          description: 'AI adoption is accelerating. Organizations that establish governance now avoid the expensive retrofit later. Early governance prevents technical debt that costs 2-3x more to fix.',
          impact: 'Delayed governance costs 2-3x more than building it early'
        });
      }

      // Organizational costs
      if (orgScore < 15) {
        costs.push({
          icon: 'dollar-sign',
          title: 'Budget Windows Close',
          description: 'Without executive sponsorship and budget alignment, opportunities pass. Budget cycles reset, priorities shift, and the window for transformation narrows.',
          impact: 'Budget cycles typically reset every 6-12 months'
        });
      }

      // Path-specific costs
      if (recommendedPath === 'J3') {
        costs.push({
          icon: 'x-circle',
          title: 'Activation Value Remains Trapped',
          description: 'J3 accounts have the highest potential value ($2-5M over 18-24 months), but it stays locked without activation. Every month of delay is missed value.',
          opportunityCost: '$200K-400K in trapped value per quarter'
        });
      } else if (recommendedPath === 'J4') {
        costs.push({
          icon: 'zap',
          title: 'Competitive Advantage Slips Away',
          description: 'Your mature foundation positions you for rapid AI enablement. Competitors are moving fast—delaying means losing first-mover advantage in AI-assisted product delivery.',
          opportunityCost: '6-8 week head start on competitors'
        });
      } else if (recommendedPath === 'J2') {
        costs.push({
          icon: 'calendar-x',
          title: 'Trigger Events Have Expiration Dates',
          description: 'Acceleration Path accounts have time-sensitive triggers (rollouts, launches, org changes). Delaying means missing the window for rapid activation.',
          impact: 'Trigger windows typically last 3-6 months'
        });
      } else if (recommendedPath === 'J1') {
        costs.push({
          icon: 'building',
          title: 'Foundation Gets Harder to Build',
          description: 'The longer you wait, the more teams build their own solutions. Establishing governance early is 3x easier than retrofitting it across existing implementations.',
          impact: 'Each quarter of delay makes foundation 15-20% harder to establish'
        });
      }

      // Velocity cost (always relevant)
      costs.push({
        icon: 'gauge',
        title: 'Development Velocity Stays Flat',
        description: 'Organizations with IPE activation see 40-60% faster development cycles. Without it, your teams continue working at current velocity while competitors accelerate.',
        impact: 'Missing 40-60% potential velocity improvement'
      });

      return costs.slice(0, 4); // Limit to 4 most relevant costs
    }

    function getOpportunityCostMessage(recommendedPath, totalScore) {
      const messages = {
        'J1': 'Every quarter you delay, foundation-building becomes 15-20% harder as teams build their own solutions.',
        'J2': 'Trigger events have expiration dates—typically 3-6 months. Missing the window means losing rapid activation opportunity.',
        'J3': 'Every quarter you delay, you\'re missing out on $200K-400K in trapped value. J3 accounts unlock $2-5M over 18-24 months when activated.',
        'J4': 'Your mature foundation positions you for rapid ROI (6-8 weeks). Every month of delay is a missed competitive advantage.'
      };
      return messages[recommendedPath] || 'Every quarter you delay, you\'re missing out on significant value and competitive advantage.';
    }

    function generateBenchmarkComparison(totalScore, foundationScore, aiScore, orgScore, recommendedPath) {
      // Industry benchmarks based on typical enterprise distribution
      const industryAvg = 45; // Average score across 50+ organizations
      const topQuartile = 70; // Top 25% threshold
      
      let comparison = '';
      let comparisonDetail = '';
      
      if (totalScore >= topQuartile) {
        comparison = 'You\'re in the top quartile';
        comparisonDetail = '—organizations at this level typically see 40-60% faster development cycles with IPE activation.';
      } else if (totalScore >= industryAvg) {
        comparison = 'You\'re above industry average';
        comparisonDetail = '—organizations in this range unlock significant value through targeted activation programs.';
      } else if (totalScore >= 30) {
        comparison = 'You\'re below industry average';
        comparisonDetail = '—but within range for transformation. Organizations at this level see the highest ROI from foundation-building.';
      } else {
        comparison = 'You\'re in the early stages';
        comparisonDetail = '—organizations starting here benefit most from building governance early, before technical debt compounds.';
      }
      
      return {
        industryAvg,
        topQuartile,
        comparison,
        comparisonDetail
      };
    }

    // Initialize
    lucide.createIcons();
  </script>
</body>
</html>

