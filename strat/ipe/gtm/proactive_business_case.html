<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proactive Business Case Generator | IPE Sales Tool</title>
  <meta name="description" content="Generate preliminary business cases for target accounts to drive PCRI assessment conversations.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    /* ==========================================================================
       DESIGN TOKENS (Matched to GTM Playbook)
       ========================================================================== */
    :root {
      --spectrum-gray-50: #fafafa;
      --spectrum-gray-100: #f5f5f5;
      --spectrum-gray-200: #e8e8e8;
      --spectrum-gray-300: #d1d1d1;
      --spectrum-gray-400: #b4b4b4;
      --spectrum-gray-500: #909090;
      --spectrum-gray-600: #6d6d6d;
      --spectrum-gray-700: #464646;
      --spectrum-gray-800: #222222;
      --spectrum-gray-900: #131313;
      
      --spectrum-purple-900: #42247f;
      --spectrum-purple-700: #6436bf;
      --spectrum-purple-500: #8b5cf6;
      --spectrum-purple-400: #a78bfa;
      --spectrum-purple-300: #c4b5fd;
      --spectrum-purple-100: #e0d4f7;
      
      --spectrum-blue-500: #3b82f6;
      --spectrum-blue-400: #60a5fa;
      --spectrum-blue-300: #93c5fd;
      
      --spectrum-green-500: #10b981;
      --spectrum-green-400: #34d399;
      --spectrum-green-300: #6ee7b7;
      
      --spectrum-yellow-500: #f59e0b;
      --spectrum-yellow-400: #fbbf24;
      
      --spectrum-red-500: #ef4444;
      --spectrum-red-400: #f87171;
      
      --spectrum-cyan-500: #0ea5e9;
      --spectrum-cyan-400: #22d3ee;
      
      --spectrum-orange-500: #f97316;
      --spectrum-orange-400: #fb923c;
      
      --spectrum-bg-base: #0f0f1a;
      --spectrum-bg-layer-1: #16213e;
      --spectrum-bg-layer-2: #1a1a2e;
      --spectrum-bg-surface: rgba(22, 33, 62, 0.7);
      --spectrum-bg-elevated: rgba(255,255,255,0.05);
      
      --spectrum-text-primary: #ffffff;
      --spectrum-text-secondary: rgba(255,255,255,0.9);
      --spectrum-text-tertiary: rgba(255,255,255,0.8);
      --spectrum-text-muted: rgba(255,255,255,0.55);
      
      --spectrum-border-default: rgba(100, 54, 191, 0.3);
      --spectrum-border-subtle: rgba(255,255,255,0.08);
      --spectrum-border-hover: rgba(100, 54, 191, 0.5);
      
      --spectrum-font-size-75: 0.75rem;
      --spectrum-font-size-100: 0.875rem;
      --spectrum-font-size-200: 1rem;
      --spectrum-font-size-300: 1.125rem;
      --spectrum-font-size-400: 1.25rem;
      --spectrum-font-size-500: 1.5rem;
      --spectrum-font-size-600: 1.75rem;
      --spectrum-font-size-700: 2rem;
      --spectrum-font-size-800: 2.5rem;
      
      --spectrum-spacing-100: 0.25rem;
      --spectrum-spacing-200: 0.5rem;
      --spectrum-spacing-300: 1rem;
      --spectrum-spacing-400: 1.5rem;
      --spectrum-spacing-500: 2rem;
      --spectrum-spacing-600: 3rem;
      
      --spectrum-radius-sm: 4px;
      --spectrum-radius-md: 8px;
      --spectrum-radius-lg: 12px;
      --spectrum-radius-xl: 16px;
      --spectrum-radius-full: 9999px;
    }
    
    /* ==========================================================================
       BASE STYLES
       ========================================================================== */
    *, *::before, *::after { box-sizing: border-box; }
    
    html { scroll-behavior: smooth; }
    
    body {
      margin: 0;
      padding: 0;
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      font-size: var(--spectrum-font-size-200);
      line-height: 1.6;
      color: var(--spectrum-text-primary);
      background: var(--spectrum-bg-base);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: 
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(249, 115, 22, 0.12) 0%, transparent 50%),
        radial-gradient(ellipse 60% 40% at 100% 100%, rgba(59, 130, 246, 0.08) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: var(--spectrum-spacing-400);
      position: relative;
      z-index: 1;
    }
    
    .font-mono { font-family: 'JetBrains Mono', monospace; }
    .text-muted { color: var(--spectrum-text-muted); }
    .text-green { color: var(--spectrum-green-400); }
    
    /* ==========================================================================
       NAVIGATION
       ========================================================================== */
    nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(15, 15, 26, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--spectrum-border-default);
      padding: var(--spectrum-spacing-200) var(--spectrum-spacing-400);
    }
    
    .nav-inner {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--spectrum-spacing-300);
    }
    
    .nav-brand {
      display: flex;
      align-items: center;
      gap: var(--spectrum-spacing-200);
    }
    
    .nav-logo {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--spectrum-orange-500), var(--spectrum-yellow-500));
      border-radius: var(--spectrum-radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .nav-logo i { width: 20px; height: 20px; color: white; }
    
    .nav-title {
      font-weight: 700;
      font-size: var(--spectrum-font-size-300);
      background: linear-gradient(135deg, #fff, var(--spectrum-orange-400));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .nav-badge {
      font-family: 'JetBrains Mono', monospace;
      font-size: var(--spectrum-font-size-75);
      background: rgba(249, 115, 22, 0.2);
      color: var(--spectrum-orange-400);
      padding: 4px 10px;
      border-radius: var(--spectrum-radius-full);
      border: 1px solid rgba(249, 115, 22, 0.3);
    }
    
    .nav-links {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .nav-link {
      color: var(--spectrum-text-muted);
      text-decoration: none;
      font-size: var(--spectrum-font-size-100);
      padding: 6px 12px;
      border-radius: var(--spectrum-radius-md);
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .nav-link:hover {
      color: var(--spectrum-text-primary);
      background: var(--spectrum-bg-elevated);
    }
    
    .nav-link i { width: 14px; height: 14px; }
    
    /* ==========================================================================
       HEADER
       ========================================================================== */
    header {
      text-align: center;
      padding: var(--spectrum-spacing-500) 0 var(--spectrum-spacing-400);
    }
    
    header h1 {
      font-size: var(--spectrum-font-size-700);
      font-weight: 700;
      margin: 0 0 var(--spectrum-spacing-200);
      background: linear-gradient(135deg, #fff 0%, var(--spectrum-orange-300) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .header-subtitle {
      font-size: var(--spectrum-font-size-200);
      color: var(--spectrum-text-muted);
      max-width: 700px;
      margin: 0 auto;
    }
    
    .header-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: var(--spectrum-font-size-75);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--spectrum-orange-400);
      background: rgba(249, 115, 22, 0.15);
      padding: 6px 14px;
      border-radius: var(--spectrum-radius-full);
      border: 1px solid rgba(249, 115, 22, 0.3);
      margin-bottom: var(--spectrum-spacing-300);
    }
    
    .header-badge i { width: 14px; height: 14px; }
    
    /* ==========================================================================
       ACCOUNT SELECTOR
       ========================================================================== */
    .account-selector {
      background: var(--spectrum-bg-surface);
      border: 2px solid var(--spectrum-border-default);
      border-radius: var(--spectrum-radius-xl);
      padding: var(--spectrum-spacing-400);
      margin-bottom: var(--spectrum-spacing-400);
    }
    
    .account-selector h2 {
      font-size: var(--spectrum-font-size-400);
      font-weight: 600;
      margin: 0 0 var(--spectrum-spacing-300);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .account-selector h2 i {
      color: var(--spectrum-orange-400);
    }
    
    .search-container {
      position: relative;
      margin-bottom: var(--spectrum-spacing-300);
    }
    
    .search-input {
      width: 100%;
      padding: 14px 16px 14px 48px;
      font-family: 'DM Sans', sans-serif;
      font-size: var(--spectrum-font-size-200);
      color: var(--spectrum-text-primary);
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--spectrum-border-default);
      border-radius: var(--spectrum-radius-lg);
      outline: none;
      transition: all 0.2s;
    }
    
    .search-input:focus {
      border-color: var(--spectrum-orange-400);
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.2);
    }
    
    .search-input::placeholder {
      color: var(--spectrum-text-muted);
    }
    
    .search-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--spectrum-text-muted);
      pointer-events: none;
    }
    
    .search-icon i {
      width: 20px;
      height: 20px;
    }
    
    .filter-row {
      display: flex;
      gap: 12px;
      margin-bottom: var(--spectrum-spacing-300);
      flex-wrap: wrap;
    }
    
    .filter-select {
      padding: 10px 14px;
      font-family: 'DM Sans', sans-serif;
      font-size: var(--spectrum-font-size-100);
      color: var(--spectrum-text-primary);
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--spectrum-border-subtle);
      border-radius: var(--spectrum-radius-md);
      outline: none;
      cursor: pointer;
      min-width: 160px;
    }
    
    .filter-select:focus {
      border-color: var(--spectrum-purple-400);
    }
    
    .account-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: var(--spectrum-spacing-200);
      max-height: 400px;
      overflow-y: auto;
      padding-right: 8px;
    }
    
    .account-card {
      background: rgba(0, 0, 0, 0.2);
      border: 2px solid var(--spectrum-border-subtle);
      border-radius: var(--spectrum-radius-lg);
      padding: var(--spectrum-spacing-300);
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .account-card:hover {
      border-color: var(--spectrum-border-default);
      background: rgba(249, 115, 22, 0.05);
    }
    
    .account-card.selected {
      border-color: var(--spectrum-orange-400);
      background: rgba(249, 115, 22, 0.1);
    }
    
    .account-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }
    
    .account-name {
      font-weight: 600;
      font-size: var(--spectrum-font-size-200);
      color: var(--spectrum-text-primary);
    }
    
    .account-tier {
      font-size: var(--spectrum-font-size-75);
      font-weight: 600;
      padding: 2px 8px;
      border-radius: var(--spectrum-radius-full);
    }
    
    .account-tier.tier-1 {
      background: rgba(16, 185, 129, 0.2);
      color: var(--spectrum-green-400);
    }
    
    .account-tier.tier-2 {
      background: rgba(59, 130, 246, 0.2);
      color: var(--spectrum-blue-400);
    }
    
    .account-tier.tier-3 {
      background: rgba(139, 92, 246, 0.2);
      color: var(--spectrum-purple-400);
    }
    
    .account-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
    }
    
    .account-tag {
      font-size: var(--spectrum-font-size-75);
      color: var(--spectrum-text-muted);
      background: rgba(255, 255, 255, 0.05);
      padding: 2px 8px;
      border-radius: var(--spectrum-radius-sm);
    }
    
    .account-signals {
      display: flex;
      gap: 6px;
      margin-top: 8px;
    }
    
    .signal-badge {
      font-size: 10px;
      font-weight: 600;
      padding: 2px 6px;
      border-radius: var(--spectrum-radius-sm);
    }
    
    .signal-badge.j1 { background: rgba(99, 102, 241, 0.2); color: #a5b4fc; }
    .signal-badge.j2 { background: rgba(16, 185, 129, 0.2); color: #6ee7b7; }
    .signal-badge.j3 { background: rgba(245, 158, 11, 0.2); color: #fcd34d; }
    .signal-badge.j4 { background: rgba(6, 182, 212, 0.2); color: #67e8f9; }
    
    .signal-badge.readiness-a { background: rgba(16, 185, 129, 0.2); color: #6ee7b7; }
    .signal-badge.readiness-b { background: rgba(245, 158, 11, 0.2); color: #fcd34d; }
    .signal-badge.readiness-c { background: rgba(239, 68, 68, 0.2); color: #fca5a5; }
    
    /* ==========================================================================
       BUSINESS CASE OUTPUT
       ========================================================================== */
    .business-case-container {
      display: none;
    }
    
    .business-case-container.visible {
      display: block;
    }
    
    .business-case-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--spectrum-spacing-400);
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .selected-account-display {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .selected-account-name {
      font-size: var(--spectrum-font-size-600);
      font-weight: 700;
      background: linear-gradient(135deg, #fff, var(--spectrum-orange-300));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .preliminary-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: var(--spectrum-font-size-75);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--spectrum-yellow-400);
      background: rgba(245, 158, 11, 0.15);
      padding: 6px 14px;
      border-radius: var(--spectrum-radius-full);
      border: 1px solid rgba(245, 158, 11, 0.3);
    }
    
    .preliminary-badge i { width: 14px; height: 14px; }
    
    .btn-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      font-family: 'DM Sans', sans-serif;
      font-size: var(--spectrum-font-size-100);
      font-weight: 600;
      color: white;
      background: linear-gradient(135deg, var(--spectrum-orange-500), var(--spectrum-orange-500));
      border: none;
      border-radius: var(--spectrum-radius-md);
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
    }
    
    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);
    }
    
    .btn i { width: 16px; height: 16px; }
    
    .btn-secondary {
      background: transparent;
      border: 1px solid var(--spectrum-border-default);
      color: var(--spectrum-text-secondary);
    }
    
    .btn-secondary:hover {
      background: var(--spectrum-bg-elevated);
      box-shadow: none;
    }
    
    .btn-cta {
      background: linear-gradient(135deg, var(--spectrum-green-500), var(--spectrum-cyan-500));
    }
    
    .btn-cta:hover {
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
    }
    
    /* ==========================================================================
       ESTIMATED PCRI SECTION
       ========================================================================== */
    .estimated-pcri-section {
      background: linear-gradient(145deg, rgba(245, 158, 11, 0.1), rgba(22, 33, 62, 0.9));
      border: 2px dashed rgba(245, 158, 11, 0.4);
      border-radius: var(--spectrum-radius-xl);
      padding: var(--spectrum-spacing-400);
      margin-bottom: var(--spectrum-spacing-400);
    }
    
    .estimated-pcri-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--spectrum-spacing-300);
    }
    
    .estimated-pcri-header h3 {
      font-size: var(--spectrum-font-size-300);
      font-weight: 600;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--spectrum-yellow-400);
    }
    
    .estimated-pcri-header h3 i {
      width: 20px;
      height: 20px;
    }
    
    .estimated-disclaimer {
      font-size: var(--spectrum-font-size-75);
      color: var(--spectrum-text-muted);
      background: rgba(0, 0, 0, 0.3);
      padding: 4px 10px;
      border-radius: var(--spectrum-radius-full);
    }
    
    .estimated-pcri-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
      margin-bottom: var(--spectrum-spacing-300);
    }
    
    @media (max-width: 800px) {
      .estimated-pcri-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    .pcri-pillar-card {
      background: rgba(0, 0, 0, 0.2);
      border-radius: var(--spectrum-radius-md);
      padding: 12px;
      text-align: center;
    }
    
    .pillar-label {
      font-size: var(--spectrum-font-size-75);
      color: var(--spectrum-text-muted);
      margin-bottom: 6px;
    }
    
    .pillar-score {
      font-family: 'JetBrains Mono', monospace;
      font-size: var(--spectrum-font-size-500);
      font-weight: 700;
    }
    
    .pillar-score.foundation { color: var(--spectrum-purple-400); }
    .pillar-score.ai { color: var(--spectrum-blue-400); }
    .pillar-score.governance { color: var(--spectrum-green-400); }
    .pillar-score.delivery { color: var(--spectrum-yellow-400); }
    .pillar-score.culture { color: var(--spectrum-cyan-400); }
    
    .pillar-bar {
      height: 4px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }
    
    .pillar-fill {
      height: 100%;
      border-radius: 2px;
      transition: width 0.5s ease;
    }
    
    .pillar-fill.foundation { background: var(--spectrum-purple-400); }
    .pillar-fill.ai { background: var(--spectrum-blue-400); }
    .pillar-fill.governance { background: var(--spectrum-green-400); }
    .pillar-fill.delivery { background: var(--spectrum-yellow-400); }
    .pillar-fill.culture { background: var(--spectrum-cyan-400); }
    
    .pcri-composite-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 24px;
      padding: 16px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: var(--spectrum-radius-md);
    }
    
    .composite-item {
      text-align: center;
    }
    
    .composite-label {
      font-size: var(--spectrum-font-size-75);
      color: var(--spectrum-text-muted);
      margin-bottom: 4px;
    }
    
    .composite-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: var(--spectrum-font-size-500);
      font-weight: 700;
      color: var(--spectrum-yellow-400);
    }
    
    .journey-badge {
      padding: 6px 14px;
      border-radius: var(--spectrum-radius-full);
      font-size: var(--spectrum-font-size-200);
      font-weight: 600;
    }
    
    .journey-badge.j1 { background: rgba(99, 102, 241, 0.2); color: #a5b4fc; }
    .journey-badge.j2 { background: rgba(16, 185, 129, 0.2); color: #6ee7b7; }
    .journey-badge.j3 { background: rgba(245, 158, 11, 0.2); color: #fcd34d; }
    .journey-badge.j4 { background: rgba(6, 182, 212, 0.2); color: #67e8f9; }
    
    .validate-cta {
      margin-top: var(--spectrum-spacing-300);
      padding: 16px;
      background: linear-gradient(145deg, rgba(16, 185, 129, 0.1), rgba(22, 33, 62, 0.8));
      border: 1px solid rgba(16, 185, 129, 0.3);
      border-radius: var(--spectrum-radius-md);
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
    }
    
    .validate-cta-text {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .validate-cta-text i {
      width: 24px;
      height: 24px;
      color: var(--spectrum-green-400);
    }
    
    .validate-cta-text p {
      margin: 0;
      font-size: var(--spectrum-font-size-100);
      color: var(--spectrum-text-secondary);
    }
    
    .validate-cta-text strong {
      color: var(--spectrum-green-400);
    }
    
    /* ==========================================================================
       RESULTS GRID
       ========================================================================== */
    .results-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--spectrum-spacing-300);
      margin-bottom: var(--spectrum-spacing-400);
    }
    
    @media (max-width: 900px) {
      .results-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .result-card {
      background: var(--spectrum-bg-surface);
      border: 1px solid var(--spectrum-border-default);
      border-radius: var(--spectrum-radius-lg);
      padding: var(--spectrum-spacing-400);
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .result-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
    }
    
    .result-card.roi::before { background: linear-gradient(90deg, var(--spectrum-green-400), var(--spectrum-green-500)); }
    .result-card.tcv::before { background: linear-gradient(90deg, var(--spectrum-blue-400), var(--spectrum-blue-500)); }
    .result-card.ttv::before { background: linear-gradient(90deg, var(--spectrum-cyan-400), var(--spectrum-cyan-500)); }
    
    .result-icon {
      width: 48px;
      height: 48px;
      margin: 0 auto 16px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .result-card.roi .result-icon { background: rgba(16, 185, 129, 0.15); }
    .result-card.tcv .result-icon { background: rgba(59, 130, 246, 0.15); }
    .result-card.ttv .result-icon { background: rgba(6, 182, 212, 0.15); }
    
    .result-icon i {
      width: 24px;
      height: 24px;
    }
    
    .result-card.roi .result-icon i { color: var(--spectrum-green-400); }
    .result-card.tcv .result-icon i { color: var(--spectrum-blue-400); }
    .result-card.ttv .result-icon i { color: var(--spectrum-cyan-400); }
    
    .result-title {
      font-size: var(--spectrum-font-size-100);
      color: var(--spectrum-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 8px;
    }
    
    .result-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: var(--spectrum-font-size-700);
      font-weight: 700;
    }
    
    .result-card.roi .result-value { color: var(--spectrum-green-400); }
    .result-card.tcv .result-value { color: var(--spectrum-blue-400); }
    .result-card.ttv .result-value { color: var(--spectrum-cyan-400); }
    
    .result-detail {
      font-size: var(--spectrum-font-size-100);
      color: var(--spectrum-text-secondary);
      margin-top: 8px;
    }
    
    /* ==========================================================================
       SECTION CARDS
       ========================================================================== */
    .section-card {
      background: var(--spectrum-bg-surface);
      border: 1px solid var(--spectrum-border-default);
      border-radius: var(--spectrum-radius-lg);
      padding: var(--spectrum-spacing-400);
      margin-bottom: var(--spectrum-spacing-400);
    }
    
    .section-card h3 {
      font-size: var(--spectrum-font-size-300);
      font-weight: 600;
      margin: 0 0 var(--spectrum-spacing-300);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .section-card h3 i {
      width: 18px;
      height: 18px;
      color: var(--spectrum-purple-400);
    }
    
    /* ==========================================================================
       JOURNEY MESSAGE
       ========================================================================== */
    .journey-message-card {
      background: linear-gradient(145deg, rgba(139, 92, 246, 0.1), rgba(22, 33, 62, 0.9));
      border: 1px solid rgba(139, 92, 246, 0.3);
      border-radius: var(--spectrum-radius-lg);
      padding: var(--spectrum-spacing-400);
      margin-bottom: var(--spectrum-spacing-400);
    }
    
    .journey-message-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: var(--spectrum-spacing-200);
    }
    
    .journey-message-header i {
      width: 20px;
      height: 20px;
      color: var(--spectrum-purple-400);
    }
    
    .journey-message-header h4 {
      margin: 0;
      font-size: var(--spectrum-font-size-200);
      color: var(--spectrum-purple-400);
    }
    
    .journey-message-content {
      font-size: var(--spectrum-font-size-200);
      color: var(--spectrum-text-secondary);
      line-height: 1.7;
      margin-bottom: var(--spectrum-spacing-200);
    }
    
    .journey-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .journey-tag {
      font-size: var(--spectrum-font-size-75);
      padding: 4px 10px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: var(--spectrum-radius-sm);
      color: var(--spectrum-text-muted);
    }
    
    /* ==========================================================================
       VALUE BREAKDOWN
       ========================================================================== */
    .value-breakdown-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spectrum-spacing-300);
    }
    
    @media (max-width: 900px) {
      .value-breakdown-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .breakdown-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .breakdown-table th,
    .breakdown-table td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid var(--spectrum-border-subtle);
    }
    
    .breakdown-table th {
      font-size: var(--spectrum-font-size-75);
      font-weight: 600;
      color: var(--spectrum-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .breakdown-table td {
      font-size: var(--spectrum-font-size-100);
    }
    
    .breakdown-table .value-cell {
      font-family: 'JetBrains Mono', monospace;
      text-align: right;
      color: var(--spectrum-green-400);
    }
    
    .breakdown-table tr:last-child td {
      border-bottom: none;
    }
    
    .breakdown-table .total-row {
      background: rgba(16, 185, 129, 0.1);
      font-weight: 600;
    }
    
    .breakdown-table .total-row td {
      border-top: 2px solid var(--spectrum-green-500);
    }
    
    /* ==========================================================================
       ACCOUNT PROFILE
       ========================================================================== */
    .account-profile-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--spectrum-spacing-200);
      margin-bottom: var(--spectrum-spacing-300);
    }
    
    @media (max-width: 800px) {
      .account-profile-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .profile-item {
      background: rgba(0, 0, 0, 0.2);
      border-radius: var(--spectrum-radius-md);
      padding: 12px;
    }
    
    .profile-label {
      font-size: var(--spectrum-font-size-75);
      color: var(--spectrum-text-muted);
      margin-bottom: 4px;
    }
    
    .profile-value {
      font-size: var(--spectrum-font-size-100);
      font-weight: 600;
      color: var(--spectrum-text-primary);
    }
    
    /* ==========================================================================
       EXECUTIVE SUMMARY
       ========================================================================== */
    .executive-summary {
      background: rgba(0, 0, 0, 0.2);
      border-radius: var(--spectrum-radius-md);
      padding: var(--spectrum-spacing-400);
      font-size: var(--spectrum-font-size-100);
      line-height: 1.7;
    }
    
    .executive-summary p {
      margin: 0 0 12px;
    }
    
    .executive-summary p:last-child {
      margin-bottom: 0;
    }
    
    .executive-summary strong {
      color: var(--spectrum-green-400);
    }
    
    .executive-summary .highlight-value {
      font-family: 'JetBrains Mono', monospace;
      font-weight: 600;
    }
    
    /* ==========================================================================
       CALLOUTS
       ========================================================================== */
    .callout {
      padding: var(--spectrum-spacing-200);
      border-radius: var(--spectrum-radius-md);
      margin: var(--spectrum-spacing-200) 0;
      font-size: var(--spectrum-font-size-100);
    }
    
    .callout.info {
      background: rgba(59, 130, 246, 0.1);
      border-left: 3px solid var(--spectrum-blue-400);
    }
    
    .callout.success {
      background: rgba(16, 185, 129, 0.1);
      border-left: 3px solid var(--spectrum-green-400);
    }
    
    .callout.warning {
      background: rgba(245, 158, 11, 0.1);
      border-left: 3px solid var(--spectrum-yellow-400);
    }
    
    /* ==========================================================================
       FOOTER
       ========================================================================== */
    footer {
      text-align: center;
      padding: var(--spectrum-spacing-400) 0;
      border-top: 1px solid var(--spectrum-border-default);
      margin-top: var(--spectrum-spacing-400);
    }
    
    .footer-text {
      font-size: var(--spectrum-font-size-100);
      color: var(--spectrum-text-muted);
      margin: 0;
    }
    
    /* ==========================================================================
       EMAIL MODAL
       ========================================================================== */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(4px);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: var(--spectrum-spacing-400);
    }
    
    .modal-overlay.visible {
      display: flex;
    }
    
    .modal-content {
      background: var(--spectrum-bg-layer-1);
      border: 1px solid var(--spectrum-border-default);
      border-radius: var(--spectrum-radius-xl);
      max-width: 800px;
      width: 100%;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--spectrum-spacing-300) var(--spectrum-spacing-400);
      border-bottom: 1px solid var(--spectrum-border-subtle);
    }
    
    .modal-header h3 {
      margin: 0;
      font-size: var(--spectrum-font-size-400);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .modal-header h3 i {
      color: var(--spectrum-orange-400);
    }
    
    .modal-close {
      background: transparent;
      border: none;
      color: var(--spectrum-text-muted);
      cursor: pointer;
      padding: 8px;
      border-radius: var(--spectrum-radius-md);
      transition: all 0.2s;
    }
    
    .modal-close:hover {
      background: var(--spectrum-bg-elevated);
      color: var(--spectrum-text-primary);
    }
    
    .modal-close i {
      width: 20px;
      height: 20px;
    }
    
    .modal-body {
      padding: var(--spectrum-spacing-400);
      overflow-y: auto;
      flex: 1;
    }
    
    .email-template-tabs {
      display: flex;
      gap: 4px;
      background: rgba(0, 0, 0, 0.3);
      padding: 4px;
      border-radius: var(--spectrum-radius-lg);
      margin-bottom: var(--spectrum-spacing-300);
    }
    
    .email-tab {
      flex: 1;
      padding: 10px 16px;
      font-size: var(--spectrum-font-size-100);
      font-weight: 600;
      color: var(--spectrum-text-muted);
      background: transparent;
      border: none;
      border-radius: var(--spectrum-radius-md);
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .email-tab:hover {
      color: var(--spectrum-text-secondary);
      background: rgba(255, 255, 255, 0.05);
    }
    
    .email-tab.active {
      color: var(--spectrum-text-primary);
      background: var(--spectrum-purple-700);
    }
    
    .email-field {
      margin-bottom: var(--spectrum-spacing-300);
    }
    
    .email-field-label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    
    .email-field-label span {
      font-size: var(--spectrum-font-size-100);
      font-weight: 600;
      color: var(--spectrum-text-secondary);
    }
    
    .email-field-label button {
      font-size: var(--spectrum-font-size-75);
      color: var(--spectrum-purple-400);
      background: rgba(139, 92, 246, 0.15);
      border: none;
      padding: 4px 10px;
      border-radius: var(--spectrum-radius-sm);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: all 0.2s;
    }
    
    .email-field-label button:hover {
      background: rgba(139, 92, 246, 0.25);
    }
    
    .email-field-label button i {
      width: 12px;
      height: 12px;
    }
    
    .email-input {
      width: 100%;
      padding: 12px 14px;
      font-family: 'DM Sans', sans-serif;
      font-size: var(--spectrum-font-size-100);
      color: var(--spectrum-text-primary);
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--spectrum-border-default);
      border-radius: var(--spectrum-radius-md);
      outline: none;
    }
    
    .email-input:focus {
      border-color: var(--spectrum-purple-400);
    }
    
    .email-textarea {
      width: 100%;
      min-height: 300px;
      padding: 14px;
      font-family: 'DM Sans', sans-serif;
      font-size: var(--spectrum-font-size-100);
      line-height: 1.6;
      color: var(--spectrum-text-primary);
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--spectrum-border-default);
      border-radius: var(--spectrum-radius-md);
      outline: none;
      resize: vertical;
    }
    
    .email-textarea:focus {
      border-color: var(--spectrum-purple-400);
    }
    
    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      padding: var(--spectrum-spacing-300) var(--spectrum-spacing-400);
      border-top: 1px solid var(--spectrum-border-subtle);
    }
    
    .email-hint {
      font-size: var(--spectrum-font-size-75);
      color: var(--spectrum-text-muted);
      margin-top: 8px;
    }
    
    /* ==========================================================================
       PRINT STYLES
       ========================================================================== */
    @media print {
      body { background: white; color: black; }
      nav { display: none; }
      .account-selector { display: none; }
      .btn { display: none !important; }
      .estimated-pcri-section { border-style: solid; }
      .modal-overlay { display: none !important; }
    }
    
    /* ==========================================================================
       NO ACCOUNTS STATE
       ========================================================================== */
    .no-accounts {
      text-align: center;
      padding: var(--spectrum-spacing-500);
      color: var(--spectrum-text-muted);
    }
    
    .no-accounts i {
      width: 48px;
      height: 48px;
      margin-bottom: 16px;
      opacity: 0.5;
    }
    
    .account-count {
      font-size: var(--spectrum-font-size-75);
      color: var(--spectrum-text-muted);
      margin-bottom: var(--spectrum-spacing-200);
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav>
    <div class="nav-inner">
      <div class="nav-brand">
        <div class="nav-logo">
          <i data-lucide="target"></i>
        </div>
        <span class="nav-title">Proactive Business Case</span>
        <span class="nav-badge">Account-Powered</span>
      </div>
      <div class="nav-links">
        <a href="roi_calculator.html" class="nav-link">
          <i data-lucide="calculator"></i>
          Full Calculator
        </a>
        <a href="../assess/alpha/ipe_assessment_ab.html" class="nav-link">
          <i data-lucide="clipboard-check"></i>
          PCRI Assessment
        </a>
        <a href="gtm_playbook.html" class="nav-link">
          <i data-lucide="book-open"></i>
          Playbook
        </a>
      </div>
    </div>
  </nav>
  
  <div class="container">
    <!-- Header -->
    <header>
      <div class="header-badge">
        <i data-lucide="zap"></i>
        Drive PCRI Assessment Conversations
      </div>
      <h1>Proactive Business Case Generator</h1>
      <p class="header-subtitle">Select a target account to generate a preliminary business case based on existing intelligence. Use this to excite prospects about validating with a full PCRI assessment.</p>
    </header>
    
    <!-- Account Selector -->
    <div class="account-selector">
      <h2><i data-lucide="building-2"></i> Select Target Account</h2>
      
      <div class="search-container">
        <div class="search-icon"><i data-lucide="search"></i></div>
        <input type="text" class="search-input" id="accountSearch" placeholder="Search accounts by name, industry, or segment...">
      </div>
      
      <div class="filter-row">
        <select class="filter-select" id="filterTier" onchange="filterAccounts()">
          <option value="">All Tiers</option>
          <option value="Tier 1">Tier 1</option>
          <option value="Tier 2">Tier 2</option>
          <option value="Tier 3">Tier 3</option>
        </select>
        
        <select class="filter-select" id="filterJourney" onchange="filterAccounts()">
          <option value="">All Journeys</option>
          <option value="J1">J1 - Foundation</option>
          <option value="J2">J2 - Fast Activation</option>
          <option value="J3">J3 - Control Plane</option>
          <option value="J4">J4 - Trigger Ready</option>
        </select>
        
        <select class="filter-select" id="filterIndustry" onchange="filterAccounts()">
          <option value="">All Industries</option>
        </select>
        
        <select class="filter-select" id="filterReadiness" onchange="filterAccounts()">
          <option value="">All Readiness</option>
          <option value="A">A - Fast-path</option>
          <option value="B">B - Ready with sequencing</option>
          <option value="C">C - Foundation needed</option>
        </select>
      </div>
      
      <div class="account-count" id="accountCount">Loading accounts...</div>
      
      <div class="account-grid" id="accountGrid">
        <div class="no-accounts">
          <i data-lucide="loader"></i>
          <p>Loading target accounts...</p>
        </div>
      </div>
    </div>
    
    <!-- Business Case Output (initially hidden) -->
    <div class="business-case-container" id="businessCaseContainer">
      
      <!-- Header with account name and actions -->
      <div class="business-case-header">
        <div class="selected-account-display">
          <span class="selected-account-name" id="selectedAccountName">Account Name</span>
          <span class="preliminary-badge">
            <i data-lucide="alert-circle"></i>
            Preliminary Estimate
          </span>
        </div>
        <div class="btn-group">
          <button class="btn btn-secondary" onclick="copyBusinessCase()">
            <i data-lucide="copy"></i>
            Copy Summary
          </button>
          <button class="btn btn-secondary" onclick="showEmailModal()">
            <i data-lucide="mail"></i>
            Generate Email
          </button>
          <button class="btn btn-secondary" onclick="openInROICalculator()">
            <i data-lucide="calculator"></i>
            Open in ROI Calculator
          </button>
          <button class="btn btn-secondary" onclick="window.print()">
            <i data-lucide="printer"></i>
            Print / PDF
          </button>
          <a href="../assess/alpha/ipe_assessment_ab.html" class="btn btn-cta">
            <i data-lucide="clipboard-check"></i>
            Start PCRI Assessment
          </a>
        </div>
      </div>
      
      <!-- Estimated PCRI Section -->
      <div class="estimated-pcri-section">
        <div class="estimated-pcri-header">
          <h3><i data-lucide="gauge"></i> Estimated PCRI Scores</h3>
          <span class="estimated-disclaimer">Based on available account intelligence</span>
        </div>
        
        <div class="estimated-pcri-grid">
          <div class="pcri-pillar-card">
            <div class="pillar-label">Foundation</div>
            <div class="pillar-score foundation" id="estFoundation">65</div>
            <div class="pillar-bar"><div class="pillar-fill foundation" id="estFoundationBar" style="width: 65%;"></div></div>
          </div>
          <div class="pcri-pillar-card">
            <div class="pillar-label">AI Ready</div>
            <div class="pillar-score ai" id="estAI">55</div>
            <div class="pillar-bar"><div class="pillar-fill ai" id="estAIBar" style="width: 55%;"></div></div>
          </div>
          <div class="pcri-pillar-card">
            <div class="pillar-label">Governance</div>
            <div class="pillar-score governance" id="estGovernance">60</div>
            <div class="pillar-bar"><div class="pillar-fill governance" id="estGovernanceBar" style="width: 60%;"></div></div>
          </div>
          <div class="pcri-pillar-card">
            <div class="pillar-label">Delivery</div>
            <div class="pillar-score delivery" id="estDelivery">50</div>
            <div class="pillar-bar"><div class="pillar-fill delivery" id="estDeliveryBar" style="width: 50%;"></div></div>
          </div>
          <div class="pcri-pillar-card">
            <div class="pillar-label">Culture</div>
            <div class="pillar-score culture" id="estCulture">70</div>
            <div class="pillar-bar"><div class="pillar-fill culture" id="estCultureBar" style="width: 70%;"></div></div>
          </div>
        </div>
        
        <div class="pcri-composite-row">
          <div class="composite-item">
            <div class="composite-label">Estimated Composite</div>
            <div class="composite-value" id="estComposite">61</div>
          </div>
          <div class="composite-item">
            <div class="composite-label">Recommended Path</div>
            <div class="journey-badge j3" id="estJourney">J3</div>
          </div>
          <div class="composite-item">
            <div class="composite-label">Readiness Band</div>
            <div class="composite-value" style="font-size: var(--spectrum-font-size-300);" id="estReadiness">B</div>
          </div>
        </div>
        
        <div class="validate-cta">
          <div class="validate-cta-text">
            <i data-lucide="sparkles"></i>
            <p><strong>Want accurate projections?</strong> These estimates are based on public signals and account intelligence. A 15-minute PCRI assessment will provide validated scores and a precise business case.</p>
          </div>
          <a href="../assess/alpha/ipe_assessment_ab.html" class="btn btn-cta">
            <i data-lucide="clipboard-check"></i>
            Take PCRI Assessment
          </a>
        </div>
      </div>
      
      <!-- Key Metrics -->
      <div class="results-grid">
        <div class="result-card roi">
          <div class="result-icon"><i data-lucide="trending-up"></i></div>
          <div class="result-title">Estimated 3-Year ROI</div>
          <div class="result-value" id="resultROI">285%</div>
          <div class="result-detail">Payback in <span id="resultPayback">8</span> months</div>
        </div>
        <div class="result-card tcv">
          <div class="result-icon"><i data-lucide="wallet"></i></div>
          <div class="result-title">Forecast TCV (Year 1)</div>
          <div class="result-value" id="resultTCV">$716K</div>
          <div class="result-detail">Based on <span id="resultPath">J3</span> investment</div>
        </div>
        <div class="result-card ttv">
          <div class="result-icon"><i data-lucide="clock"></i></div>
          <div class="result-title">Time to Value</div>
          <div class="result-value" id="resultTTV">12 wks</div>
          <div class="result-detail">Full team activation</div>
        </div>
      </div>
      
      <!-- Account Profile -->
      <div class="section-card">
        <h3><i data-lucide="building"></i> Account Profile</h3>
        
        <div class="account-profile-grid">
          <div class="profile-item">
            <div class="profile-label">Industry</div>
            <div class="profile-value" id="profileIndustry">Enterprise Software</div>
          </div>
          <div class="profile-item">
            <div class="profile-label">Company Size</div>
            <div class="profile-value" id="profileSize">1k-9.9k employees</div>
          </div>
          <div class="profile-item">
            <div class="profile-label">Developer Scale</div>
            <div class="profile-value" id="profileDevs">100+ devs</div>
          </div>
          <div class="profile-item">
            <div class="profile-label">Design System</div>
            <div class="profile-value" id="profileDS">Public</div>
          </div>
          <div class="profile-item">
            <div class="profile-label">AI Signal</div>
            <div class="profile-value" id="profileAI">Strong</div>
          </div>
          <div class="profile-item">
            <div class="profile-label">Deployment Model</div>
            <div class="profile-value" id="profileDeployment">SaaS</div>
          </div>
          <div class="profile-item">
            <div class="profile-label">Design Maturity</div>
            <div class="profile-value" id="profileMaturity">L4</div>
          </div>
          <div class="profile-item">
            <div class="profile-label">Campaign Motion</div>
            <div class="profile-value" id="profileCampaign">Fast Activation</div>
          </div>
        </div>
        
        <div class="callout info" id="whyTargetCallout" style="display: none;">
          <strong>Why This Account:</strong> <span id="whyTargetText"></span>
        </div>
      </div>
      
      <!-- Journey Message -->
      <div class="journey-message-card">
        <div class="journey-message-header">
          <i data-lucide="message-square"></i>
          <h4 id="journeyMessageTitle">J3 Value Frame</h4>
        </div>
        <div class="journey-message-content" id="journeyMessageContent">
          Your AI is scaling faster than product governanceâ€”activate the control plane first.
        </div>
        <div class="journey-tags" id="journeyMessageTags">
          <span class="journey-tag">AI Governance</span>
          <span class="journey-tag">Control Plane</span>
          <span class="journey-tag">Risk Reduction</span>
        </div>
      </div>
      
      <!-- Value Breakdown -->
      <div class="section-card">
        <h3><i data-lucide="bar-chart-2"></i> Estimated Value Breakdown</h3>
        
        <div class="value-breakdown-grid">
          <div>
            <table class="breakdown-table">
              <thead>
                <tr>
                  <th>Value Driver</th>
                  <th style="text-align: right;">Annual Est.</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Developer productivity gains</td>
                  <td class="value-cell" id="valueDevProd">$324,000</td>
                </tr>
                <tr>
                  <td>Designer efficiency</td>
                  <td class="value-cell" id="valueDesigner">$90,000</td>
                </tr>
                <tr>
                  <td>AI token optimization</td>
                  <td class="value-cell" id="valueAI">$28,800</td>
                </tr>
                <tr>
                  <td>Tool consolidation</td>
                  <td class="value-cell" id="valueTools">$38,500</td>
                </tr>
                <tr class="total-row">
                  <td><strong>Est. Annual Value</strong></td>
                  <td class="value-cell"><strong id="valueTotal">$481,300</strong></td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <div>
            <table class="breakdown-table">
              <thead>
                <tr>
                  <th>Investment</th>
                  <th style="text-align: right;">Amount</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Year 1 Services</td>
                  <td class="value-cell" id="investServices">$175,000</td>
                </tr>
                <tr>
                  <td>Year 1 Software</td>
                  <td class="value-cell" id="investSoftware">$180,000</td>
                </tr>
                <tr class="total-row">
                  <td><strong>Year 1 Total</strong></td>
                  <td class="value-cell"><strong id="investTotal">$355,000</strong></td>
                </tr>
                <tr>
                  <td>Forecast ARR Potential</td>
                  <td class="value-cell" id="investARR">$374,000</td>
                </tr>
                <tr>
                  <td>Forecast ACV Potential</td>
                  <td class="value-cell" id="investACV">$621,000</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <!-- Executive Summary -->
      <div class="section-card">
        <h3><i data-lucide="file-text"></i> Preliminary Executive Summary</h3>
        <div class="executive-summary" id="executiveSummary">
          <!-- Generated dynamically -->
        </div>
      </div>
      
      <!-- Disclaimer -->
      <div class="callout warning">
        <strong>âš ï¸ Preliminary Estimates:</strong> This business case is based on available account intelligence and industry benchmarks. For validated projections grounded in your specific context, schedule a PCRI Assessment with the prospect. The assessment takes ~15 minutes and provides precise, defensible numbers.
      </div>
      
    </div>
    
    <!-- Footer -->
    <footer>
      <p class="footer-text">Proactive Business Case Generator v1.0 â€¢ Account-Powered IPE Sales Tool â€¢ For Internal Use Only</p>
    </footer>
  </div>
  
  <!-- Email Template Modal -->
  <div class="modal-overlay" id="emailModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i data-lucide="mail"></i> Email Template Generator</h3>
        <button class="modal-close" onclick="closeEmailModal()">
          <i data-lucide="x"></i>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="email-template-tabs">
          <button class="email-tab active" onclick="switchEmailTemplate('initial')">Initial Outreach</button>
          <button class="email-tab" onclick="switchEmailTemplate('followup')">Follow-up</button>
          <button class="email-tab" onclick="switchEmailTemplate('executive')">Executive Brief</button>
        </div>
        
        <div class="email-field">
          <div class="email-field-label">
            <span>Subject Line</span>
            <button onclick="copyField('emailSubject')">
              <i data-lucide="copy"></i>
              Copy
            </button>
          </div>
          <input type="text" class="email-input" id="emailSubject" readonly>
        </div>
        
        <div class="email-field">
          <div class="email-field-label">
            <span>Email Body</span>
            <button onclick="copyField('emailBody')">
              <i data-lucide="copy"></i>
              Copy
            </button>
          </div>
          <textarea class="email-textarea" id="emailBody" readonly></textarea>
          <p class="email-hint">ðŸ’¡ Tip: Personalize the opening line and add any recent news or triggers you've observed about the account.</p>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="copyFullEmail()">
          <i data-lucide="copy"></i>
          Copy Full Email
        </button>
        <button class="btn" onclick="openInMailClient()">
          <i data-lucide="send"></i>
          Open in Mail Client
        </button>
      </div>
    </div>
  </div>
  
  <script>
    // Initialize Lucide icons
    lucide.createIcons();
    
    // ==========================================================================
    // DATA & CONFIGURATION
    // ==========================================================================
    
    // Journey messaging (from playbook)
    const journeyMessaging = {
      J1: {
        title: 'J1 Value Frame: Foundation Building',
        content: 'AI execution fails without operational product intent. IPE helps establish the governance basics needed to control AI costs before they scale uncontrollably.',
        tags: ['Education', 'Cost Foundation', 'Governance Basics'],
        offer: 'Maturity POV + readiness checklist'
      },
      J2: {
        title: 'J2 Value Frame: Fast Activation',
        content: 'Activate IPE fastâ€”governed AI usage + measurable cost control in ~90 days. Transform your design system team into an AI cost governance function.',
        tags: ['90-Day ROI', 'Cost Control', 'Quick Win'],
        offer: 'IPE Activation Sprint'
      },
      J3: {
        title: 'J3 Value Frame: AI Cost Control',
        content: 'Your AI spend is scaling faster than governanceâ€”activate the cost control plane first. IPE transforms your team from cost center to value driver by controlling AI token waste and tool sprawl.',
        tags: ['Cost Governance', 'Value Driver', 'Token Optimization'],
        offer: 'Activation Assessment â†’ Context & Control Foundation'
      },
      J4: {
        title: 'J4 Value Frame: Enterprise AI Governance',
        content: 'Control AI costs at enterprise scale. IPE provides the governance layer to manage tokenized commercial models across business units, transforming distributed cost centers into a unified value creation engine.',
        tags: ['Enterprise Scale', 'Token Governance', 'Value Center'],
        offer: 'Executive Activation Readiness Brief'
      }
    };
    
    // Path pricing
    const pathPricing = {
      J1: { services: 50000, software: 48000, name: 'J1 Foundation' },
      J2: { services: 100000, software: 96000, name: 'J2 Acceleration' },
      J3: { services: 175000, software: 180000, name: 'J3 Transformation' },
      J4: { services: 300000, software: 300000, name: 'J4 Enterprise' }
    };
    
    // Developer scale estimates
    const devScaleMap = {
      '<100 devs': { devs: 30, designers: 8 },
      '100+ devs': { devs: 75, designers: 20 },
      '500+ devs': { devs: 200, designers: 50 },
      '1000+ devs': { devs: 400, designers: 100 }
    };
    
    // State
    let accounts = [];
    let filteredAccounts = [];
    let selectedAccount = null;
    
    // ==========================================================================
    // ACCOUNT LOADING
    // ==========================================================================
    
    async function loadAccounts() {
      try {
        const response = await fetch('target_accounts.json');
        accounts = await response.json();
        
        // Filter to only targets with journey data
        accounts = accounts.filter(a => a.journey && a.journey !== '');
        
        // Populate industry filter
        const industries = [...new Set(accounts.map(a => a.industryGroup).filter(i => i))];
        const industrySelect = document.getElementById('filterIndustry');
        industries.forEach(ind => {
          const option = document.createElement('option');
          option.value = ind;
          option.textContent = ind;
          industrySelect.appendChild(option);
        });
        
        filterAccounts();
      } catch (error) {
        console.error('Error loading accounts:', error);
        document.getElementById('accountGrid').innerHTML = `
          <div class="no-accounts">
            <i data-lucide="alert-circle"></i>
            <p>Error loading accounts. Make sure target_accounts.json exists.</p>
          </div>
        `;
        lucide.createIcons();
      }
    }
    
    // ==========================================================================
    // FILTERING
    // ==========================================================================
    
    function filterAccounts() {
      const searchTerm = document.getElementById('accountSearch').value.toLowerCase();
      const tierFilter = document.getElementById('filterTier').value;
      const journeyFilter = document.getElementById('filterJourney').value;
      const industryFilter = document.getElementById('filterIndustry').value;
      const readinessFilter = document.getElementById('filterReadiness').value;
      
      filteredAccounts = accounts.filter(account => {
        // Search filter
        const searchMatch = !searchTerm || 
          account.company.toLowerCase().includes(searchTerm) ||
          (account.industry || '').toLowerCase().includes(searchTerm) ||
          (account.segment || '').toLowerCase().includes(searchTerm);
        
        // Tier filter
        const tierMatch = !tierFilter || account.tier === tierFilter;
        
        // Journey filter
        const journeyMatch = !journeyFilter || account.journey === journeyFilter;
        
        // Industry filter
        const industryMatch = !industryFilter || account.industryGroup === industryFilter;
        
        // Readiness filter
        const readinessMatch = !readinessFilter || 
          (account.readinessBand && account.readinessBand.startsWith(readinessFilter));
        
        return searchMatch && tierMatch && journeyMatch && industryMatch && readinessMatch;
      });
      
      renderAccounts();
    }
    
    // ==========================================================================
    // RENDERING
    // ==========================================================================
    
    function renderAccounts() {
      const grid = document.getElementById('accountGrid');
      const countEl = document.getElementById('accountCount');
      
      countEl.textContent = `Showing ${filteredAccounts.length} of ${accounts.length} accounts`;
      
      if (filteredAccounts.length === 0) {
        grid.innerHTML = `
          <div class="no-accounts">
            <i data-lucide="search-x"></i>
            <p>No accounts match your filters</p>
          </div>
        `;
        lucide.createIcons();
        return;
      }
      
      grid.innerHTML = filteredAccounts.map(account => `
        <div class="account-card ${selectedAccount?.company === account.company ? 'selected' : ''}" 
             onclick="selectAccount('${account.company.replace(/'/g, "\\'")}')">
          <div class="account-card-header">
            <span class="account-name">${account.company}</span>
            <span class="account-tier ${getTierClass(account.tier)}">${account.tier}</span>
          </div>
          <div class="account-meta">
            <span class="account-tag">${account.industryGroup || account.industry || 'Unknown'}</span>
            <span class="account-tag">${account.companySize || 'Unknown size'}</span>
          </div>
          <div class="account-signals">
            <span class="signal-badge ${account.journey?.toLowerCase() || 'j3'}">${account.journey || 'J3'}</span>
            <span class="signal-badge ${getReadinessClass(account.readinessBand)}">${getReadinessLabel(account.readinessBand)}</span>
            ${account.publicDS === 'Yes' ? '<span class="signal-badge" style="background: rgba(139, 92, 246, 0.2); color: #c4b5fd;">Public DS</span>' : ''}
          </div>
        </div>
      `).join('');
      
      lucide.createIcons();
    }
    
    function getTierClass(tier) {
      if (tier === 'Tier 1') return 'tier-1';
      if (tier === 'Tier 2') return 'tier-2';
      return 'tier-3';
    }
    
    function getReadinessClass(band) {
      if (!band) return 'readiness-c';
      if (band.startsWith('A')) return 'readiness-a';
      if (band.startsWith('B')) return 'readiness-b';
      return 'readiness-c';
    }
    
    function getReadinessLabel(band) {
      if (!band) return 'C';
      return band.charAt(0);
    }
    
    // ==========================================================================
    // ACCOUNT SELECTION
    // ==========================================================================
    
    function selectAccount(companyName) {
      selectedAccount = accounts.find(a => a.company === companyName);
      
      if (!selectedAccount) return;
      
      // Update UI
      document.querySelectorAll('.account-card').forEach(card => {
        card.classList.remove('selected');
        if (card.querySelector('.account-name').textContent === companyName) {
          card.classList.add('selected');
        }
      });
      
      // Show business case container
      document.getElementById('businessCaseContainer').classList.add('visible');
      
      // Generate business case
      generateBusinessCase();
      
      // Scroll to business case
      document.getElementById('businessCaseContainer').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    
    // ==========================================================================
    // BUSINESS CASE GENERATION
    // ==========================================================================
    
    function generateBusinessCase() {
      if (!selectedAccount) return;
      
      const account = selectedAccount;
      const journey = account.journey || 'J3';
      const pricing = pathPricing[journey];
      
      // Update account name
      document.getElementById('selectedAccountName').textContent = account.company;
      
      // Estimate PCRI scores from available data
      const pcriEstimates = estimatePCRI(account);
      updatePCRIDisplay(pcriEstimates, journey);
      
      // Update profile
      updateAccountProfile(account);
      
      // Update journey messaging
      updateJourneyMessage(journey, account.industryGroup);
      
      // Calculate and display value
      calculateValue(account, pcriEstimates, pricing);
      
      // Generate executive summary
      generateExecutiveSummary(account, pcriEstimates, pricing);
      
      lucide.createIcons();
    }
    
    function estimatePCRI(account) {
      // Foundation: Based on design maturity and public DS
      let foundation = 50;
      if (account.designMaturity >= 4) foundation = 75;
      else if (account.designMaturity >= 3) foundation = 65;
      else if (account.designMaturity >= 2) foundation = 55;
      if (account.publicDS === 'Yes') foundation += 10;
      foundation = Math.min(100, foundation);
      
      // AI Ready: Based on AI signal
      let ai = 50;
      if (account.aiSignal && account.aiSignal.toLowerCase().includes('ai')) ai = 70;
      if (account.aiSignal && account.aiSignal.toLowerCase().includes('strong')) ai = 80;
      if (account.aiSignal && account.aiSignal.toLowerCase().includes('feature')) ai = 75;
      
      // Governance: Based on industry and deployment
      let governance = 55;
      if (['Financial Services', 'Healthcare / Life Sciences'].includes(account.industryGroup)) governance = 70;
      if (account.deploymentModel && account.deploymentModel.includes('On-prem')) governance += 10;
      governance = Math.min(100, governance);
      
      // Delivery: Based on company size and dev scale
      let delivery = 50;
      if (account.developerScale === '100+ devs') delivery = 60;
      if (account.developerScale === '500+ devs') delivery = 70;
      if (account.developerScale === '1000+ devs') delivery = 75;
      
      // Culture: Based on readiness band and campaign motion
      let culture = 55;
      if (account.readinessBand && account.readinessBand.startsWith('A')) culture = 80;
      else if (account.readinessBand && account.readinessBand.startsWith('B')) culture = 65;
      if (account.campaignMotion && account.campaignMotion.includes('Fast')) culture += 10;
      culture = Math.min(100, culture);
      
      // Use readiness score if available as a sanity check
      if (account.readinessScore > 0) {
        const avgEstimate = (foundation + ai + governance + delivery + culture) / 5;
        // Blend with actual readiness score
        const blend = (avgEstimate * 0.4) + (account.readinessScore * 0.6);
        // Re-distribute
        const factor = blend / avgEstimate;
        foundation = Math.min(100, Math.round(foundation * factor));
        ai = Math.min(100, Math.round(ai * factor));
        governance = Math.min(100, Math.round(governance * factor));
        delivery = Math.min(100, Math.round(delivery * factor));
        culture = Math.min(100, Math.round(culture * factor));
      }
      
      // Calculate composite (weighted)
      const composite = Math.round(
        (foundation * 0.20) +
        (ai * 0.20) +
        (governance * 0.20) +
        (delivery * 0.15) +
        (culture * 0.25)
      );
      
      return { foundation, ai, governance, delivery, culture, composite };
    }
    
    function updatePCRIDisplay(pcri, journey) {
      document.getElementById('estFoundation').textContent = pcri.foundation;
      document.getElementById('estAI').textContent = pcri.ai;
      document.getElementById('estGovernance').textContent = pcri.governance;
      document.getElementById('estDelivery').textContent = pcri.delivery;
      document.getElementById('estCulture').textContent = pcri.culture;
      document.getElementById('estComposite').textContent = pcri.composite;
      
      document.getElementById('estFoundationBar').style.width = pcri.foundation + '%';
      document.getElementById('estAIBar').style.width = pcri.ai + '%';
      document.getElementById('estGovernanceBar').style.width = pcri.governance + '%';
      document.getElementById('estDeliveryBar').style.width = pcri.delivery + '%';
      document.getElementById('estCultureBar').style.width = pcri.culture + '%';
      
      const journeyBadge = document.getElementById('estJourney');
      journeyBadge.textContent = journey;
      journeyBadge.className = 'journey-badge ' + journey.toLowerCase();
      
      const readinessBand = pcri.composite >= 80 ? 'A' : (pcri.composite >= 55 ? 'B' : 'C');
      document.getElementById('estReadiness').textContent = readinessBand;
    }
    
    function updateAccountProfile(account) {
      document.getElementById('profileIndustry').textContent = account.industryGroup || account.industry || 'Unknown';
      document.getElementById('profileSize').textContent = account.companySize || 'Unknown';
      document.getElementById('profileDevs').textContent = account.developerScale || 'Unknown';
      document.getElementById('profileDS').textContent = account.publicDS === 'Yes' ? 'Public' : 'Internal';
      document.getElementById('profileAI').textContent = account.aiSignal || 'Unknown';
      document.getElementById('profileDeployment').textContent = account.deploymentModel || 'SaaS';
      document.getElementById('profileMaturity').textContent = 'L' + (account.designMaturity || 3);
      document.getElementById('profileCampaign').textContent = account.campaignMotion || 'Standard';
      
      const whyTargetCallout = document.getElementById('whyTargetCallout');
      const whyTargetText = document.getElementById('whyTargetText');
      if (account.whyTarget) {
        whyTargetCallout.style.display = 'block';
        whyTargetText.textContent = account.whyTarget;
      } else if (account.journeyRationale) {
        whyTargetCallout.style.display = 'block';
        whyTargetText.textContent = account.journeyRationale;
      } else {
        whyTargetCallout.style.display = 'none';
      }
    }
    
    function updateJourneyMessage(journey, industry) {
      const msg = journeyMessaging[journey] || journeyMessaging.J3;
      
      document.getElementById('journeyMessageTitle').textContent = msg.title;
      document.getElementById('journeyMessageContent').textContent = msg.content;
      document.getElementById('journeyMessageTags').innerHTML = msg.tags.map(tag => 
        `<span class="journey-tag">${tag}</span>`
      ).join('');
    }
    
    function calculateValue(account, pcri, pricing) {
      // Estimate team size from developer scale
      const devScale = devScaleMap[account.developerScale] || devScaleMap['100+ devs'];
      const numDevs = devScale.devs;
      const numDesigners = devScale.designers;
      
      // Cost assumptions
      const devCost = 180000;
      const designerCost = 150000;
      
      // Productivity calculations
      const productivityRate = 0.25 + (pcri.composite / 500); // 25-45% based on readiness
      const devProdValue = numDevs * devCost * productivityRate * 0.5;
      const designerProdValue = numDesigners * designerCost * 0.15;
      
      // AI savings (estimate based on scale)
      const aiMonthlySpend = numDevs * 200; // ~$200/dev/month AI spend estimate
      const aiAnnualSavings = aiMonthlySpend * 12 * 0.25;
      
      // Tool consolidation
      const toolSavings = numDevs * 500; // ~$500/dev savings from consolidation
      
      const totalAnnualValue = devProdValue + designerProdValue + aiAnnualSavings + toolSavings;
      
      // ROI calculation
      const yearOneInvestment = pricing.services + pricing.software;
      const threeYearValue = totalAnnualValue * 3;
      const threeYearCost = yearOneInvestment + (pricing.software * 2);
      const threeYearROI = Math.round(((threeYearValue - threeYearCost) / threeYearCost) * 100);
      const paybackMonths = Math.ceil(yearOneInvestment / (totalAnnualValue / 12));
      
      // TTV based on readiness
      let ttvWeeks = 14;
      if (pcri.composite >= 80) ttvWeeks = 10;
      else if (pcri.composite >= 65) ttvWeeks = 12;
      else if (pcri.composite < 50) ttvWeeks = 18;
      
      // Update display
      document.getElementById('resultROI').textContent = threeYearROI + '%';
      document.getElementById('resultPayback').textContent = paybackMonths;
      document.getElementById('resultTCV').textContent = formatCurrency(account.forecastTCV || yearOneInvestment);
      document.getElementById('resultPath').textContent = pricing.name;
      document.getElementById('resultTTV').textContent = ttvWeeks + ' wks';
      
      document.getElementById('valueDevProd').textContent = formatCurrencyFull(devProdValue);
      document.getElementById('valueDesigner').textContent = formatCurrencyFull(designerProdValue);
      document.getElementById('valueAI').textContent = formatCurrencyFull(aiAnnualSavings);
      document.getElementById('valueTools').textContent = formatCurrencyFull(toolSavings);
      document.getElementById('valueTotal').textContent = formatCurrencyFull(totalAnnualValue);
      
      document.getElementById('investServices').textContent = formatCurrencyFull(pricing.services);
      document.getElementById('investSoftware').textContent = formatCurrencyFull(pricing.software);
      document.getElementById('investTotal').textContent = formatCurrencyFull(yearOneInvestment);
      document.getElementById('investARR').textContent = formatCurrencyFull(account.forecastARR || pricing.software);
      document.getElementById('investACV').textContent = formatCurrencyFull(account.forecastACV || yearOneInvestment);
      
      // Store for summary
      account._calculated = {
        devProdValue, designerProdValue, aiAnnualSavings, toolSavings,
        totalAnnualValue, threeYearROI, paybackMonths, ttvWeeks, yearOneInvestment
      };
    }
    
    function generateExecutiveSummary(account, pcri, pricing) {
      const calc = account._calculated;
      const journey = account.journey || 'J3';
      const msg = journeyMessaging[journey];
      
      const summary = `
        <p><strong>Preliminary Business Case for ${account.company}</strong></p>
        
        <p>Based on available account intelligence, ${account.company} is a strong candidate for IPE 
        with an estimated PCRI composite score of <span class="highlight-value">${pcri.composite}</span>, 
        placing them in the <strong>${pricing.name}</strong> investment path.</p>
        
        <p><strong>Key Account Signals:</strong></p>
        <ul style="margin: 8px 0; padding-left: 20px;">
          <li>Industry: ${account.industryGroup || account.industry}</li>
          <li>Design Maturity: Level ${account.designMaturity || 3} ${account.publicDS === 'Yes' ? '(Public Design System)' : ''}</li>
          <li>Developer Scale: ${account.developerScale || 'Unknown'}</li>
          ${account.aiSignal ? `<li>AI Signal: ${account.aiSignal}</li>` : ''}
          <li>Deployment Model: ${account.deploymentModel || 'SaaS'}</li>
        </ul>
        
        <p><strong>Estimated Value Creation:</strong></p>
        <ul style="margin: 8px 0; padding-left: 20px;">
          <li>Annual Value: <span class="highlight-value">${formatCurrencyFull(calc.totalAnnualValue)}</span></li>
          <li>3-Year ROI: <span class="highlight-value">${calc.threeYearROI}%</span></li>
          <li>Payback Period: <span class="highlight-value">${calc.paybackMonths} months</span></li>
          <li>Time to Value: <span class="highlight-value">${calc.ttvWeeks} weeks</span></li>
        </ul>
        
        <p><strong>Recommended Approach (${journey}):</strong> ${msg.content}</p>
        
        <p><strong>Suggested Offer:</strong> ${msg.offer}</p>
        
        <p style="background: rgba(245, 158, 11, 0.1); padding: 12px; border-radius: 8px; margin-top: 16px;">
          <strong>âš ï¸ Next Step:</strong> These are preliminary estimates based on available intelligence. 
          To provide a validated business case with precise projections, schedule a 15-minute 
          <strong>PCRI Assessment</strong> with the prospect. This will ground the conversation in 
          their specific context and demonstrate the rigor of the Knapsack framework.
        </p>
      `;
      
      document.getElementById('executiveSummary').innerHTML = summary;
    }
    
    // ==========================================================================
    // UTILITY FUNCTIONS
    // ==========================================================================
    
    function formatCurrency(value) {
      if (!value || value === 0) return '$0';
      if (value >= 1000000) {
        return '$' + (value / 1000000).toFixed(2) + 'M';
      } else if (value >= 1000) {
        return '$' + Math.round(value / 1000) + 'K';
      }
      return '$' + Math.round(value).toLocaleString();
    }
    
    function formatCurrencyFull(value) {
      if (!value || value === 0) return '$0';
      return '$' + Math.round(value).toLocaleString();
    }
    
    function copyBusinessCase() {
      const summary = document.getElementById('executiveSummary').innerText;
      navigator.clipboard.writeText(summary).then(() => {
        alert('Business case summary copied to clipboard!');
      });
    }
    
    // ==========================================================================
    // EMAIL TEMPLATE GENERATION
    // ==========================================================================
    
    let currentEmailTemplate = 'initial';
    
    const emailTemplates = {
      initial: {
        getSubject: (account) => `${account.company}: Estimated ${formatCurrency(account._calculated?.totalAnnualValue || 500000)}/year value from AI-ready design operations`,
        getBody: (account, pcri, pricing) => {
          const calc = account._calculated || {};
          const journey = account.journey || 'J3';
          const msg = journeyMessaging[journey];
          
          return `Hi [First Name],

I've been researching ${account.company}'s design and development operations, and I wanted to share some insights that might be valuable as you scale your AI initiatives.

Based on public signals about your organizationâ€”including your ${account.publicDS === 'Yes' ? 'public design system' : 'design system maturity'}, ${account.developerScale || 'development scale'}, and ${account.aiSignal || 'technology investments'}â€”I ran a preliminary analysis using our PCRI framework (Product & Code Readiness Index).

**Estimated Annual Value: ${formatCurrencyFull(calc.totalAnnualValue || 500000)}**

Here's what we're seeing:
â€¢ Developer productivity gains: ${formatCurrencyFull(calc.devProdValue || 300000)}
â€¢ Designer efficiency improvements: ${formatCurrencyFull(calc.designerProdValue || 80000)}
â€¢ AI token optimization savings: ${formatCurrencyFull(calc.aiAnnualSavings || 30000)}
â€¢ Tool consolidation savings: ${formatCurrencyFull(calc.toolSavings || 40000)}

This translates to an estimated **${calc.threeYearROI || 280}% 3-year ROI** with payback in approximately **${calc.paybackMonths || 8} months**.

${msg.content}

Of course, these are preliminary estimates based on available intelligence. To provide you with validated projections specific to ${account.company}'s context, I'd love to schedule a 15-minute PCRI Assessment.

The assessment helps us understand:
âœ“ Your current design system maturity
âœ“ AI readiness across your development workflow
âœ“ Governance and delivery capabilities
âœ“ Cultural adoption factors

Would you have 15 minutes this week or next to run through the assessment together?

Best,
[Your Name]

P.S. ${account.whyTarget || account.journeyRationale || `Companies in ${account.industryGroup || 'your space'} are seeing significant value from governing their AI-assisted development workflows.`}`;
        }
      },
      
      followup: {
        getSubject: (account) => `Re: ${account.company} - Quick PCRI Assessment follow-up`,
        getBody: (account, pcri, pricing) => {
          const calc = account._calculated || {};
          const journey = account.journey || 'J3';
          
          return `Hi [First Name],

Following up on my previous note about the potential value we've identified for ${account.company}.

I wanted to highlight one specific insight: based on your ${account.developerScale || 'development team size'}, we estimate you could be losing approximately **${formatCurrencyFull((calc.aiAnnualSavings || 30000) * 1.5)}** annually to AI token waste and regeneration cycles.

This happens when AI coding assistants lack proper context about your design system, leading to:
â€¢ Code that doesn't match your component patterns
â€¢ Multiple regeneration attempts to get it right
â€¢ Manual cleanup of AI-generated output

Our PCRI Assessment specifically identifies these gaps and quantifies the opportunity.

Here's a quick scheduling link: [INSERT CALENDLY LINK]

Or just reply with a few times that work for you.

Thanks,
[Your Name]

P.S. The assessment only takes 15 minutes and you'll walk away with actionable insights regardless of whether we work together.`;
        }
      },
      
      executive: {
        getSubject: (account) => `${account.company}: Executive Brief - ${formatCurrency(account._calculated?.threeYearROI || 280)}% ROI opportunity in design operations`,
        getBody: (account, pcri, pricing) => {
          const calc = account._calculated || {};
          const journey = account.journey || 'J3';
          const msg = journeyMessaging[journey];
          
          return `Dear [Executive Name],

I'm reaching out regarding a strategic opportunity we've identified for ${account.company} in the intersection of design systems and AI-assisted development.

**EXECUTIVE SUMMARY**

Based on preliminary analysis of ${account.company}'s technology footprint, we've identified potential value creation of **${formatCurrencyFull(calc.totalAnnualValue || 500000)} annually** through our Intelligent Product Engine (IPE) platform.

**KEY METRICS**
â€¢ Estimated 3-Year ROI: ${calc.threeYearROI || 280}%
â€¢ Payback Period: ${calc.paybackMonths || 8} months
â€¢ Time to Value: ${calc.ttvWeeks || 12} weeks

**THE OPPORTUNITY**

${msg.content}

As AI adoption accelerates across your development organization, the gap between "implemented design systems" and "activated design systems" becomes critical. Organizations that close this gap are transforming their design system teams from cost centers into strategic value drivers for AI initiatives.

**RECOMMENDED INVESTMENT PATH: ${pricing.name}**
â€¢ Year 1 Services: ${formatCurrencyFull(pricing.services)}
â€¢ Annual Software: ${formatCurrencyFull(pricing.software)}
â€¢ Total Year 1: ${formatCurrencyFull(pricing.services + pricing.software)}

**NEXT STEP**

I would welcome the opportunity to present a validated business case for ${account.company}. Our PCRI Assessment takes approximately 15 minutes and provides precise projections based on your specific context.

Would you or a member of your team have availability for a brief assessment session?

Respectfully,
[Your Name]
[Title]

CONFIDENTIAL: This analysis is based on publicly available information and industry benchmarks. Validated projections require direct engagement through our PCRI Assessment framework.`;
        }
      }
    };
    
    function showEmailModal() {
      if (!selectedAccount) return;
      
      document.getElementById('emailModal').classList.add('visible');
      generateEmailContent('initial');
      lucide.createIcons();
    }
    
    function closeEmailModal() {
      document.getElementById('emailModal').classList.remove('visible');
    }
    
    function switchEmailTemplate(template) {
      currentEmailTemplate = template;
      
      document.querySelectorAll('.email-tab').forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');
      
      generateEmailContent(template);
    }
    
    function generateEmailContent(template) {
      if (!selectedAccount) return;
      
      const account = selectedAccount;
      const journey = account.journey || 'J3';
      const pricing = pathPricing[journey];
      const pcri = estimatePCRI(account);
      
      const tmpl = emailTemplates[template];
      
      document.getElementById('emailSubject').value = tmpl.getSubject(account);
      document.getElementById('emailBody').value = tmpl.getBody(account, pcri, pricing);
    }
    
    function copyField(fieldId) {
      const field = document.getElementById(fieldId);
      navigator.clipboard.writeText(field.value).then(() => {
        const btn = event.target.closest('button');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="check"></i> Copied!';
        lucide.createIcons();
        setTimeout(() => {
          btn.innerHTML = originalText;
          lucide.createIcons();
        }, 2000);
      });
    }
    
    function copyFullEmail() {
      const subject = document.getElementById('emailSubject').value;
      const body = document.getElementById('emailBody').value;
      const fullEmail = `Subject: ${subject}\n\n${body}`;
      
      navigator.clipboard.writeText(fullEmail).then(() => {
        alert('Full email copied to clipboard!');
      });
    }
    
    function openInMailClient() {
      const subject = encodeURIComponent(document.getElementById('emailSubject').value);
      const body = encodeURIComponent(document.getElementById('emailBody').value);
      window.open(`mailto:?subject=${subject}&body=${body}`);
    }
    
    // ==========================================================================
    // ROI CALCULATOR INTEGRATION
    // ==========================================================================
    
    function openInROICalculator() {
      if (!selectedAccount) return;
      
      const account = selectedAccount;
      const pcri = estimatePCRI(account);
      const journey = account.journey || 'J3';
      
      // Estimate team size from developer scale
      const devScale = devScaleMap[account.developerScale] || devScaleMap['100+ devs'];
      
      // Map industry to preset
      let industryPreset = 'custom';
      if (account.industryGroup === 'Financial Services') industryPreset = 'fss';
      else if (account.industryGroup === 'Enterprise Software') industryPreset = 'tech';
      else if (account.industryGroup === 'Healthcare / Life Sciences') industryPreset = 'healthcare';
      else if (account.industryGroup === 'Retail / E-commerce') industryPreset = 'retail';
      else if (account.industryGroup === 'Media & Entertainment') industryPreset = 'media';
      
      // Build query parameters
      const params = new URLSearchParams({
        company: account.company,
        numEngineers: devScale.devs,
        numDesigners: devScale.designers,
        industryPreset: industryPreset,
        investmentPath: journey.toLowerCase(),
        pcriFoundation: pcri.foundation,
        pcriAI: pcri.ai,
        pcriGovernance: pcri.governance,
        pcriDelivery: pcri.delivery,
        pcriCulture: pcri.culture,
        source: 'proactive'
      });
      
      // Open ROI calculator with pre-populated data
      window.open(`roi_calculator.html?${params.toString()}`, '_blank');
    }
    
    // ==========================================================================
    // INITIALIZATION
    // ==========================================================================
    
    document.addEventListener('DOMContentLoaded', function() {
      loadAccounts();
      
      // Search input handler
      document.getElementById('accountSearch').addEventListener('input', filterAccounts);
      
      // Modal close handlers
      document.getElementById('emailModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeEmailModal();
        }
      });
      
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closeEmailModal();
        }
      });
    });
  </script>
</body>
</html>

