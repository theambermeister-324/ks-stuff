<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enterprise Partnership Programs | Knapsack IPE</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    .tab-active { border-color: #10b981; color: #047857; background: #ecfdf5; }
    .phase-btn-active { background: rgba(255,255,255,0.1); }
    .nav-active { background: white; color: #0f172a; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-white">
  <header class="bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 text-white">
    <div class="max-w-6xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
          <div class="w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center">
            <i data-lucide="cpu" class="w-4 h-4 text-emerald-400"></i>
          </div>
          <span class="font-semibold">Knapsack IPE</span>
        </div>
        <span class="text-xs text-slate-400">Enterprise Partnership Programs</span>
      </div>
      <div class="flex gap-2">
        <button onclick="setView('strategy')" id="nav-strategy" class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all nav-active">
          <span class="flex items-center gap-2"><i data-lucide="compass" class="w-4 h-4"></i> IPE GTM Strategy</span>
        </button>
        <button onclick="setView('companies')" id="nav-companies" class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all bg-white/10 text-white hover:bg-white/20">
          <span class="flex items-center gap-2"><i data-lucide="building-2" class="w-4 h-4"></i> Partnership Programs</span>
        </button>
      </div>
    </div>
  </header>

  <div id="company-nav" class="hidden bg-slate-100 border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-3">
      <div class="flex items-center gap-4">
        <span class="text-xs text-slate-500 font-medium">SELECT ACCOUNT:</span>
        <div id="company-tabs" class="flex gap-2 overflow-x-auto"></div>
      </div>
    </div>
  </div>

  <div id="sub-tabs" class="hidden max-w-6xl mx-auto px-4 py-3">
    <div class="flex gap-2 border-b border-slate-200">
      <button onclick="setActiveTab('overview')" id="tab-overview" class="flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-all tab-active rounded-t-lg whitespace-nowrap">
        <i data-lucide="target" class="w-4 h-4"></i> Partnership Overview
      </button>
      <button onclick="setActiveTab('battlecard')" id="tab-battlecard" class="flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 border-transparent text-slate-500 hover:text-slate-700 transition-all rounded-t-lg whitespace-nowrap">
        <i data-lucide="flag" class="w-4 h-4"></i> Battle Card
      </button>
    </div>
  </div>

  <main id="main-content" class="max-w-6xl mx-auto px-4 py-6 space-y-8"></main>

  <footer class="bg-slate-100 border-t border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-6">
      <div class="flex items-center justify-between">
        <div>
          <p class="font-semibold text-slate-900 text-sm">Knapsack</p>
          <p class="text-xs text-slate-500">Intelligent Product Engine</p>
        </div>
        <div id="footer-company" class="text-right">
          <p class="text-xs text-slate-500">IPE Strategic Framework</p>
          <p class="text-xs text-slate-400">Confidential</p>
        </div>
      </div>
    </div>
  </footer>

<script>
const companies = [
  {
    id: 'cardinal', name: 'Cardinal Health', industry: 'Healthcare & Pharma Distribution',
    deploymentTier: 'D3', deploymentName: 'Private Cloud',
    compliance: ['SOC 2', 'HIPAA', 'FDA 21 CFR Part 11', 'DSCSA'],
    journey: 'J3', tcv: '$1.0M - $1.4M', timeline: '48-64 weeks',
    currentState: [
      ['System Maturity', 'Level 2 → Level 3', 'Level 4: Scaled Product System'],
      ['Implementation', 'Fragmented across business units', 'Unified healthcare platform'],
      ['Governance', 'Compliance-driven but siloed', 'Enterprise-wide governance'],
      ['Control Plane', 'Not established', 'Active enforcement with audit trail']
    ],
    keyInsight: 'Cardinal Health operates across pharmaceutical distribution, medical products, and healthcare services. FDA and DSCSA compliance requirements demand rigorous change management and audit trails that a governed control plane can systematize.',
    objectives: ['Unify digital experiences across distribution and services', 'Establish HIPAA and FDA-compliant governance model', 'Enable audit-ready change propagation', 'Prepare foundation for AI-assisted supply chain interfaces'],
    battleCard: {
      idealBuyer: 'Chief Digital Officer, VP Product Engineering, Head of Regulatory Technology',
      painPoints: ['FDA compliance burden on product changes', 'Siloed systems across business units', 'Manual audit trail management', 'Slow time-to-market for digital products'],
      competitors: ['Healthcare-specific vendors', 'Internal platform teams', 'Big 4 consulting implementations'],
      differentiators: ['Healthcare regulatory expertise', 'Automated audit trail generation', 'Cross-BU unification capability'],
      discoveryQuestions: ['How do you currently manage FDA compliance for digital product changes?', 'What is the process for propagating updates across pharmaceutical and medical product systems?', 'How do you generate audit trails for regulatory submissions today?', 'What role do you see AI playing in supply chain and distribution interfaces?', 'Who owns governance decisions that span multiple business units?'],
      objections: [{ objection: 'Healthcare has unique regulatory requirements', response: 'Our platform is designed for regulated industries. How much time does your team spend on compliance documentation vs. innovation?' }, { objection: 'We have existing vendor relationships', response: 'Existing vendors handle point solutions. Who governs the system of systems and ensures consistent compliance across all touchpoints?' }],
      successMetrics: ['Audit generation time', 'Compliance coverage rate', 'Cross-BU adoption', 'Time to production']
    }
  },
  {
    id: 'hsbc', name: 'HSBC', industry: 'Global Financial Services',
    deploymentTier: 'D3', deploymentName: 'Private Cloud',
    compliance: ['SOC 2', 'PCI-DSS', 'FCA', 'MAS', 'HKMA', 'OCC Guidelines', 'GDPR'],
    journey: 'J3', tcv: '$1.3M - $1.8M', timeline: '56-72 weeks',
    currentState: [
      ['System Maturity', 'Level 3 → early Level 4', 'Level 5: Intelligent System'],
      ['Implementation', 'Regional DS variations', 'Global unified system'],
      ['Governance', 'Strong but regionally fragmented', 'Global governance with regional flexibility'],
      ['Control Plane', 'Multiple regional implementations', 'Unified global control plane']
    ],
    keyInsight: 'HSBC operates across 60+ countries with varying regulatory requirements. The challenge is establishing a global control plane that maintains consistency while allowing for regional regulatory compliance (FCA, MAS, HKMA, etc.).',
    objectives: ['Unify regional design systems into global standard', 'Establish multi-jurisdictional governance framework', 'Enable compliant AI tooling across all regions', 'Create regional flexibility within global governance'],
    battleCard: {
      idealBuyer: 'Global Head of Digital, Chief Technology Officer, Regional Heads of Engineering',
      painPoints: ['Regional DS fragmentation', 'Multi-jurisdiction compliance complexity', 'Inconsistent customer experience globally', 'AI governance across regulatory regimes'],
      competitors: ['Global consulting firms', 'Regional platform investments', 'Internal enterprise architecture'],
      differentiators: ['Multi-jurisdiction governance expertise', 'Global-local flexibility model', 'AI governance for regulated environments'],
      discoveryQuestions: ['How do you balance global consistency with regional regulatory requirements today?', 'What is the governance model for design decisions that span multiple jurisdictions?', 'How do you approach AI tooling adoption given varying regulatory environments?', 'What percentage of engineering effort is spent on regional customization vs. global innovation?', 'How do you ensure consistent customer experience across Asia, Europe, and Americas?'],
      objections: [{ objection: 'Our regional structure requires local autonomy', response: 'A control plane enables local flexibility within global guardrails. How do you currently prevent regional drift from creating compliance gaps?' }, { objection: 'Global initiatives have failed before', response: 'Previous initiatives likely focused on standardization, not governance. What if regions kept autonomy but shared a common control plane?' }],
      successMetrics: ['Global adoption rate', 'Regional compliance coverage', 'Cross-region consistency score', 'AI governance activation']
    }
  },
  {
    id: 'pnc', name: 'PNC', industry: 'Financial Services',
    deploymentTier: 'D3', deploymentName: 'Private Cloud',
    compliance: ['SOC 2', 'PCI-DSS', 'OCC Guidelines', 'FFIEC', 'BCBS 239'],
    journey: 'J3', tcv: '$300K', timeline: '52 weeks (12 months)',
    currentState: [
      ['System Maturity', 'Level 3: Integrated Product System', 'Level 4: Scaled Product System'],
      ['Token Strategy', 'Undefined across systems', 'System-wide standards with theming & density'],
      ['Governance', 'Fragmented across workspaces', 'RACI-defined operating model'],
      ['Documentation', 'Inconsistent standards', 'Consolidated documentation & onboarding assets']
    ],
    keyInsight: 'PNC Ledger Design System requires modernization focused on token strategy, governance frameworks, and a durable operating model. The engagement uses hypothesis-driven consulting with a Week 12 Adaptation Gate to validate and adjust priorities.',
    objectives: ['Establish system-wide token standards (color, spacing, density, typography)', 'Create token governance framework with cross-platform consistency', 'De-risk platform upgrades via migration playbooks and pilot validations', 'Build durable design system operating model with documentation standards'],
    battleCard: {
      idealBuyer: 'Design & Engineering Leads, Executive Sponsors, Design System Lead',
      painPoints: ['Undefined token strategy creating inconsistency across theming and density modes', 'Platform modernization risk without validated migration approach', 'Fragmented documentation preventing team self-service', 'No clear governance RACI across workspaces'],
      competitors: ['Internal platform team expansion', 'Consulting firm engagements', 'Point solution vendors'],
      differentiators: ['Hypothesis-driven methodology with formal adaptation gates', 'Token strategy and governance expertise', 'Operating model creation with knowledge transfer focus'],
      discoveryQuestions: ['How do you currently manage token consistency across theming and density modes?', 'What is the risk profile for your planned platform upgrades and Angular migrations?', 'How do teams onboard to the Ledger design system today?', 'Who owns governance decisions that span multiple workspaces?', 'What would a durable, self-sustaining operating model look like for your organization?'],
      objections: [{ objection: 'We need to see validation before committing to later phases', response: 'The Week 12 Adaptation Gate is designed exactly for this. We will confirm or resequence Phase 2-3 priorities based on validated learnings within the approved scope and fee.' }, { objection: 'Our platform upgrades are complex and risky', response: 'Workstream B specifically addresses modernization enablement with migration playbooks, dependency documentation, and 1-2 pilot migrations for validation before any scaled adoption.' }, { objection: 'Previous design system initiatives have not stuck', response: 'Our focus is building a durable operating model with documentation standards, governance RACI, and onboarding assets so teams can operate independently after engagement.' }, { objection: 'We are not sure what token strategy we need', response: 'Phase 1 includes a Design Maturity Assessment that generates testable hypotheses. We will validate color and spacing strategy before moving to typography and density in Phase 2.' }],
      successMetrics: ['Token standard adoption rate', 'Migration playbook validation', 'Documentation consolidation', 'Team self-service rate', 'Operating model activation']
    }
  },
  {
    id: 'alaska', name: 'Alaska Airlines', industry: 'Transportation & Travel',
    deploymentTier: 'D2', deploymentName: 'Cloud Dedicated',
    compliance: ['SOC 2', 'PCI-DSS', 'FAA Requirements', 'DOT Accessibility'],
    journey: 'J3', tcv: '$680K - $900K', timeline: '36-48 weeks',
    currentState: [
      ['System Maturity', 'Level 2 → Level 3', 'Level 4: Scaled Product System'],
      ['Implementation', 'Web and mobile separate systems', 'Unified experience platform'],
      ['Governance', 'App-team ownership', 'Cross-channel governance'],
      ['Control Plane', 'Limited coordination', 'Operational control plane']
    ],
    keyInsight: "Alaska Airlines' merger integration and competitive positioning require a unified digital experience across web, mobile, kiosk, and operational systems. Speed and reliability are critical for customer satisfaction and operational efficiency.",
    objectives: ['Unify web, mobile, and kiosk design systems', 'Establish governance for customer-facing and operational interfaces', 'Enable rapid, safe updates across all touchpoints', 'Build foundation for AI-enhanced customer service'],
    battleCard: {
      idealBuyer: 'VP Digital Experience, Head of Product, Chief Information Officer',
      painPoints: ['Fragmented web and mobile experiences', 'Slow update cycles across channels', 'Integration complexity post-merger', 'Competitive pressure from larger carriers'],
      competitors: ['Airline industry vendors', 'Internal development teams', 'Travel tech platforms'],
      differentiators: ['Cross-channel unification', 'Rapid deployment capability', 'Operational system integration'],
      discoveryQuestions: ['How do you ensure consistency between web, mobile, and airport kiosk experiences?', 'What is the current timeline for deploying a change across all customer touchpoints?', 'How has the merger affected your digital platform strategy?', 'What role do you see AI playing in customer service over the next 2 years?', 'How do operational systems (crew, gate) connect to customer-facing experiences?'],
      objections: [{ objection: 'We have other integration priorities', response: 'A control plane accelerates integration by providing a unified foundation. How much time is currently spent on cross-system coordination?' }, { objection: 'Our budget is constrained', response: 'What is the cost of inconsistent experiences and slow deployment cycles? How does that compare to competitive positioning risk?' }],
      successMetrics: ['Cross-channel consistency', 'Deployment velocity', 'Customer satisfaction scores', 'Operational efficiency']
    }
  },
  {
    id: 'wells', name: 'Wells Fargo', industry: 'Financial Services',
    deploymentTier: 'D3', deploymentName: 'Private Cloud',
    compliance: ['SOC 2', 'PCI-DSS', 'OCC Guidelines', 'BCBS 239', 'SR 11-7', 'Consent Order Requirements'],
    journey: 'J3', tcv: '$1.2M - $1.6M', timeline: '52-68 weeks',
    currentState: [
      ['System Maturity', 'Level 3', 'Level 4: Scaled Product System'],
      ['Implementation', 'Multiple DS initiatives in progress', 'Enterprise-unified system'],
      ['Governance', 'Strong regulatory focus', 'AI-enabled governance with audit'],
      ['Control Plane', 'Infrastructure investments made', 'Full activation and enforcement']
    ],
    keyInsight: 'Wells Fargo operates under heightened regulatory scrutiny with consent order requirements. A governed control plane provides the audit trail and change management rigor required for regulatory compliance while enabling safe innovation.',
    objectives: ['Unify design system initiatives across consumer and commercial', 'Establish governance framework meeting consent order requirements', 'Enable auditable AI tooling adoption', 'Create compliant change propagation with full traceability'],
    battleCard: {
      idealBuyer: 'Chief Digital Officer, SVP Platform Engineering, Head of Regulatory Technology',
      painPoints: ['Consent order compliance burden', 'Multiple DS initiatives lacking unification', 'Regulatory scrutiny on technology changes', 'AI adoption under compliance constraints'],
      competitors: ['Internal enterprise architecture', 'Big 4 consulting', 'RegTech vendors'],
      differentiators: ['Consent order compliance expertise', 'Auditable change management', 'AI governance for regulated environments'],
      discoveryQuestions: ['How do consent order requirements affect your technology change management process?', 'What is the governance model for design decisions across consumer and commercial banking?', 'How do you demonstrate technology control effectiveness to regulators?', 'What is your approach to AI tooling adoption given current regulatory environment?', 'How do you balance innovation velocity with compliance requirements?'],
      objections: [{ objection: 'We are under regulatory constraints for new vendors', response: 'Understood. How do you currently demonstrate control over existing technology changes? A control plane strengthens that position.' }, { objection: 'Our compliance team needs extensive review', response: 'We have experience with regulated financial services reviews. What information would your compliance team need to begin assessment?' }],
      successMetrics: ['Regulatory audit readiness', 'Change traceability coverage', 'AI governance compliance', 'Time to compliant deployment']
    }
  },
  {
    id: 'columbia', name: 'Columbia Sportswear', industry: 'Retail & Consumer Goods',
    deploymentTier: 'D2', deploymentName: 'Cloud Dedicated',
    compliance: ['SOC 2', 'PCI-DSS', 'GDPR', 'CCPA'],
    journey: 'J3', tcv: '$620K - $850K', timeline: '32-44 weeks',
    currentState: [
      ['System Maturity', 'Level 2 → Level 3', 'Level 4: Scaled Product System'],
      ['Implementation', 'Brand-specific systems', 'Multi-brand unified platform'],
      ['Governance', 'Brand autonomy with gaps', 'Cross-brand governance with flexibility'],
      ['Control Plane', 'Not established', 'Active governance and enforcement']
    ],
    keyInsight: 'Columbia Sportswear manages multiple brands (Columbia, SOREL, Mountain Hardwear, prAna) each with distinct identities. The challenge is establishing governance that maintains brand differentiation while enabling operational efficiency.',
    objectives: ['Create multi-brand design system architecture', 'Establish governance that preserves brand identity', 'Enable rapid deployment across all brand properties', 'Build foundation for AI-assisted commerce experiences'],
    battleCard: {
      idealBuyer: 'VP Digital Experience, Head of E-Commerce, Chief Marketing Officer',
      painPoints: ['Brand-specific silos creating inefficiency', 'Inconsistent commerce experiences', 'Slow time-to-market for campaigns', 'AI readiness across brands'],
      competitors: ['Commerce platform vendors', 'Agency partnerships', 'Internal development'],
      differentiators: ['Multi-brand architecture expertise', 'Brand flexibility within governance', 'Retail and commerce focus'],
      discoveryQuestions: ['How do you balance brand differentiation with operational efficiency today?', 'What is the process for deploying a campaign across Columbia, SOREL, and other brands?', 'How do you ensure consistent commerce experiences while preserving brand identity?', 'What role do you see AI playing in personalization and customer experience?', 'Who owns governance decisions that span multiple brands?'],
      objections: [{ objection: 'Each brand has unique requirements', response: 'A control plane enables brand flexibility within shared governance. How much duplicate effort exists across brands today?' }, { objection: 'Our commerce platform handles this', response: 'Commerce platforms handle transactions, not design governance. How do you ensure brand consistency across all customer touchpoints?' }],
      successMetrics: ['Cross-brand deployment time', 'Brand consistency scores', 'Campaign velocity', 'AI personalization activation']
    }
  }
];

const pncPhases = [
  { id: 1, name: 'Stabilize & Complete', subtitle: 'Q1 2026', goal: 'Assessment, access enablement, color and spacing token strategy.', accomplishments: ['Design Maturity Assessment across people, process, technology', 'Generate testable hypotheses with validation planning', 'Establish color and spacing token standards', 'Enable workspace access and entitlements'], exitCriteria: ['Maturity assessment complete with documented findings', 'Color and spacing token strategy approved', 'All access and entitlement blockers resolved'], deliverables: ['Design Maturity Assessment', 'Hypothesis Documentation', 'Color Token Strategy', 'Spacing Token Strategy'], color: 'slate', icon: 'shield', mcp: 'locked' },
  { id: 2, name: 'Governance Activation', subtitle: 'Q2 2026 (Week 12 Adaptation Gate)', goal: 'Token governance framework, typography standards, documentation consolidation.', accomplishments: ['Establish typography token standards', 'Define token governance framework with RACI', 'Consolidate documentation standards', 'Conduct Week 12 Adaptation Gate review'], exitCriteria: ['Typography token strategy approved and documented', 'Governance RACI operating across stakeholders', 'Adaptation Gate confirms Phase 3 priorities'], deliverables: ['Typography Token Strategy', 'Token Governance Framework', 'Documentation Standards', 'Adaptation Gate Report'], color: 'blue', icon: 'settings', mcp: 'locked' },
  { id: 3, name: 'Execution Enablement', subtitle: 'Q3–Q4 2026', goal: 'Scaled adoption, modernization support, and knowledge transfer.', accomplishments: ['Execute 1-2 pilot migrations for validation', 'Create migration playbooks and dependency documentation', 'Deliver bi-weekly office hours for modernization support', 'Complete knowledge transfer and onboarding assets'], exitCriteria: ['Pilot migrations validated without regressions', 'Migration playbooks ready for scaled adoption', 'Teams operating independently with onboarding assets'], deliverables: ['Migration Playbooks', 'Dependency Documentation', 'Onboarding Assets', 'Operating Model Documentation'], color: 'emerald', icon: 'zap', mcp: 'prep' }
];

const defaultPhases = [
  { id: 1, name: 'Stabilize & Complete', goal: 'Make the platform reliably usable for real teams, without heroics.', accomplishments: ['Complete workspace stabilization and readiness', 'Resolve entitlements, access, and publishing blockers', 'Establish deployment checklists and operational definitions', 'Enable teams to publish and update independently'], exitCriteria: ['Teams can publish and update without Knapsack intervention', 'All workspaces live or date-certain', 'All access and entitlement blockers resolved'], deliverables: ['Workspace Go-Live Checklists', 'RACI Documentation', 'Deployment Definition of Done'], color: 'slate', icon: 'shield', mcp: 'locked' },
  { id: 2, name: 'Control Plane & Governance', goal: 'Transform individual systems into a unified system of record with decision authority.', accomplishments: ['Establish comprehensive token strategy', 'Define and activate cross-system governance model', 'Create system-of-systems architecture documentation', 'Clarify decision rights across platforms'], exitCriteria: ['Token strategy approved and actively enforced', 'Governance model operating beyond initial scope', 'Clear, documented rules for cross-system interaction'], deliverables: ['Control Plane Definition', 'Token Ownership Documentation', 'Cross-System Governance Model', 'System Charter'], color: 'blue', icon: 'settings', mcp: 'locked' },
  { id: 3, name: 'Execution Enablement', goal: 'Prove that governed intent can safely become production change.', accomplishments: ['Establish governed CI/CD pipelines', 'Implement safe change propagation with quality gates', 'Plan and validate technology upgrade paths', 'Enable predictable, regression-free deployments'], exitCriteria: ['One meaningful change ships end-to-end via Knapsack', 'Upgrade path validated without regressions', 'Teams trust the system to enforce standards'], deliverables: ['Governed Pipelines', 'Safe Propagation Mechanisms', 'Quality Gates', 'Upgrade Processes'], color: 'emerald', icon: 'zap', mcp: 'prep' },
  { id: 4, name: 'Signals & Intelligence', goal: 'Introduce intelligence capabilities only after trust is fully established.', accomplishments: ['Deploy signal capture and health dashboards', 'Conduct maturity and AI readiness assessment', 'Launch scoped MCP pilot (1-2 use cases)', 'Establish ROI measurement framework'], exitCriteria: ['Signals demonstrate faster, safer change', 'MCP adds measurable value without introducing risk', 'Leadership can clearly articulate ROI and next investments'], deliverables: ['Signal Dashboards', 'AI Readiness Assessment', 'MCP Pilot', 'ROI Framework'], color: 'violet', icon: 'bar-chart-3', mcp: 'active' }
];

const deploymentTiers = {
  D2: { name: 'Cloud Dedicated', premium: '+$50-100K', time: '4-8 weeks', bg: 'bg-blue-50', border: 'border-blue-200', text: 'text-blue-700' },
  D3: { name: 'Private Cloud', premium: '+$175-275K', time: '8-16 weeks', bg: 'bg-amber-50', border: 'border-amber-200', text: 'text-amber-700' },
  D4: { name: 'Self-Hosted', premium: '+$350-550K', time: '16-24+ weeks', bg: 'bg-rose-50', border: 'border-rose-200', text: 'text-rose-700' }
};

const colorClasses = {
  slate: { bg: 'bg-slate-100', border: 'border-slate-300', text: 'text-slate-700', accent: 'bg-slate-600' },
  blue: { bg: 'bg-blue-50', border: 'border-blue-300', text: 'text-blue-700', accent: 'bg-blue-600' },
  emerald: { bg: 'bg-emerald-50', border: 'border-emerald-300', text: 'text-emerald-700', accent: 'bg-emerald-600' },
  violet: { bg: 'bg-violet-50', border: 'border-violet-300', text: 'text-violet-700', accent: 'bg-violet-600' }
};

let currentView = 'strategy';
let selectedCompany = 'pnc';
let activePhase = null;
let activeTab = 'overview';

function init() {
  renderCompanyTabs();
  render();
  lucide.createIcons();
}

function setView(view) {
  currentView = view;
  document.getElementById('nav-strategy').className = `px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${view === 'strategy' ? 'nav-active' : 'bg-white/10 text-white hover:bg-white/20'}`;
  document.getElementById('nav-companies').className = `px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${view === 'companies' ? 'nav-active' : 'bg-white/10 text-white hover:bg-white/20'}`;
  document.getElementById('company-nav').className = view === 'companies' ? 'bg-slate-100 border-b border-slate-200' : 'hidden';
  document.getElementById('sub-tabs').className = view === 'companies' ? 'max-w-6xl mx-auto px-4 py-3' : 'hidden';
  render();
  lucide.createIcons();
}

function renderCompanyTabs() {
  const container = document.getElementById('company-tabs');
  container.innerHTML = companies.map(c => `
    <button onclick="selectCompany('${c.id}')" class="px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${selectedCompany === c.id ? 'bg-emerald-600 text-white' : 'bg-white text-slate-700 hover:bg-slate-50 border border-slate-200'}">${c.name}</button>
  `).join('');
}

function selectCompany(id) {
  selectedCompany = id;
  activePhase = null;
  renderCompanyTabs();
  render();
  lucide.createIcons();
}

function setActiveTab(tab) {
  activeTab = tab;
  document.getElementById('tab-overview').className = `flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-all rounded-t-lg whitespace-nowrap ${tab === 'overview' ? 'tab-active' : 'border-transparent text-slate-500 hover:text-slate-700'}`;
  document.getElementById('tab-battlecard').className = `flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-all rounded-t-lg whitespace-nowrap ${tab === 'battlecard' ? 'tab-active' : 'border-transparent text-slate-500 hover:text-slate-700'}`;
  render();
  lucide.createIcons();
}

function togglePhase(id) {
  activePhase = activePhase === id ? null : id;
  render();
  lucide.createIcons();
}

function render() {
  const company = companies.find(c => c.id === selectedCompany);
  const tier = deploymentTiers[company.deploymentTier];
  const phases = selectedCompany === 'pnc' ? pncPhases : defaultPhases;
  const isPNC = selectedCompany === 'pnc';
  
  if (currentView === 'strategy') {
    document.getElementById('footer-company').innerHTML = `<p class="text-xs text-slate-500">IPE Strategic Framework</p><p class="text-xs text-slate-400">Confidential</p>`;
  } else {
    document.getElementById('footer-company').innerHTML = `<p class="text-xs text-slate-500">Prepared for ${company.name} Partnership Team</p><p class="text-xs text-slate-400">Confidential</p>`;
  }
  
  const main = document.getElementById('main-content');
  
  if (currentView === 'strategy') {
    main.innerHTML = renderStrategy();
  } else if (activeTab === 'overview') {
    main.innerHTML = renderOverview(company, tier, phases, isPNC);
  } else {
    main.innerHTML = renderBattleCard(company, isPNC);
  }
}

function renderStrategy() {
  return `
    <section class="bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-xl p-6 mb-2">
      <div class="flex items-center gap-3 mb-2">
        <div class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
          <i data-lucide="book-open" class="w-5 h-5"></i>
        </div>
        <div>
          <p class="text-emerald-100 text-sm font-medium">READ THIS FIRST</p>
          <h2 class="text-xl font-bold">IPE Go-to-Market Strategy</h2>
        </div>
      </div>
      <p class="text-emerald-50">This strategic framework provides the foundational context needed to understand our customer partnership programs. Review this material before exploring individual account pages.</p>
    </section>

    <section class="bg-gradient-to-r from-slate-900 to-slate-800 text-white rounded-xl p-6">
      <p class="text-emerald-400 text-sm font-semibold mb-2">THE STRATEGIC NORTH STAR</p>
      <h2 class="text-2xl font-bold mb-3">Knapsack is the governable control plane for AI-assisted product delivery.</h2>
      <p class="text-slate-300 mb-4">We convert fragmented product knowledge into executable intelligence that AI can use safely—giving enterprises the confidence to let AI act, not just advise.</p>
      <div class="grid grid-cols-3 gap-4 mt-4">
        <div class="bg-white/10 rounded-lg p-3">
          <p class="text-emerald-400 text-xs font-semibold mb-1">Market Position</p>
          <p class="text-white text-sm">First-mover in "digital thread" category</p>
        </div>
        <div class="bg-white/10 rounded-lg p-3">
          <p class="text-blue-400 text-xs font-semibold mb-1">Primary ICP</p>
          <p class="text-white text-sm">Enterprise product teams at AI adoption inflection</p>
        </div>
        <div class="bg-white/10 rounded-lg p-3">
          <p class="text-violet-400 text-xs font-semibold mb-1">Core Differentiator</p>
          <p class="text-white text-sm">MCP + Governance = Safe AI execution</p>
        </div>
      </div>
    </section>

    <section class="bg-amber-50 border border-amber-200 rounded-xl p-5">
      <h3 class="font-semibold text-amber-800 mb-2 flex items-center gap-2">
        <i data-lucide="alert-triangle" class="w-5 h-5"></i>
        The Critical Insight
      </h3>
      <p class="text-amber-800 font-medium text-lg">"Implemented" does not equal "Activated."</p>
      <p class="text-sm text-amber-700 mt-2">Most of our existing customers have Knapsack installed but aren't extracting value. The path to revenue is activation (J3), not new logos. Services capacity is the bottleneck—not top-of-funnel GTM.</p>
    </section>

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
        <i data-lucide="clipboard-check" class="w-5 h-5 text-blue-600"></i>
        IPE Readiness Assessment
      </h2>
      <p class="text-slate-600 mb-4">Score every account. Route by quadrant. Never skip assessment. The IPE Readiness Score (0-100) determines investment path hypothesis.</p>
      
      <div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl p-5 mb-4">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
            <i data-lucide="gauge" class="w-5 h-5"></i>
          </div>
          <div>
            <h3 class="font-bold">IPE Readiness Score</h3>
            <p class="text-blue-100 text-sm">0-100 points across three weighted dimensions</p>
          </div>
        </div>
        <p class="text-blue-100 text-sm">Assessment is non-negotiable. The diagnostic phase generates this score, which maps directly to investment path recommendation and expansion readiness indicators.</p>
      </div>

      <div class="bg-white rounded-xl border p-5 mb-4">
        <h3 class="font-semibold mb-4">Readiness Score Components</h3>
        <div class="grid grid-cols-3 gap-4">
          <div class="bg-slate-50 rounded-lg p-4">
            <div class="flex items-center justify-between mb-2">
              <h4 class="font-medium text-sm">Product System Foundation</h4>
              <span class="text-sm font-bold text-emerald-600">40%</span>
            </div>
            <p class="text-xs text-slate-500 mb-3">Max 40 points</p>
            <div class="space-y-1.5">
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>Design system maturity</div>
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>Engineering adoption</div>
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>Governance structure</div>
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>Documentation quality</div>
            </div>
          </div>
          <div class="bg-slate-50 rounded-lg p-4">
            <div class="flex items-center justify-between mb-2">
              <h4 class="font-medium text-sm">AI & Automation Readiness</h4>
              <span class="text-sm font-bold text-emerald-600">30%</span>
            </div>
            <p class="text-xs text-slate-500 mb-3">Max 30 points</p>
            <div class="space-y-1.5">
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>MCP compatibility</div>
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>API maturity</div>
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>Integration architecture</div>
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>Data quality</div>
            </div>
          </div>
          <div class="bg-slate-50 rounded-lg p-4">
            <div class="flex items-center justify-between mb-2">
              <h4 class="font-medium text-sm">Organizational Readiness</h4>
              <span class="text-sm font-bold text-emerald-600">30%</span>
            </div>
            <p class="text-xs text-slate-500 mb-3">Max 30 points</p>
            <div class="space-y-1.5">
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>Executive sponsorship</div>
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>Team capacity</div>
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>Change management</div>
              <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check-circle-2" class="w-3 h-3 text-slate-400"></i>Budget authority</div>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-xl border p-5 mb-4">
        <h3 class="font-semibold mb-4">Assessment Quadrant → Investment Path Hypothesis</h3>
        <div class="grid grid-cols-2 gap-4">
          <div class="rounded-xl border-2 border-violet-300 bg-violet-50 p-4">
            <div class="flex items-center gap-3 mb-2">
              <div class="w-10 h-10 rounded-lg bg-violet-600 text-white flex items-center justify-center font-bold">A</div>
              <div>
                <p class="font-semibold text-violet-900">High Readiness + High Value</p>
                <p class="text-xs text-violet-700">Score: 70-100</p>
              </div>
            </div>
            <div class="flex items-center justify-between mt-3 pt-3 border-t border-violet-200">
              <span class="text-sm font-medium text-violet-800">→ J4 (Intelligence)</span>
              <span class="text-xs px-2 py-1 bg-violet-200 text-violet-800 rounded">Fast-track to MCP</span>
            </div>
          </div>
          <div class="rounded-xl border-2 border-emerald-400 bg-emerald-50 p-4 ring-2 ring-emerald-200">
            <div class="flex items-center gap-3 mb-2">
              <div class="w-10 h-10 rounded-lg bg-emerald-600 text-white flex items-center justify-center font-bold">B</div>
              <div>
                <p class="font-semibold text-emerald-900">Low Readiness + High Value</p>
                <p class="text-xs text-emerald-700">Score: 40-69</p>
              </div>
              <span class="text-xs px-2 py-0.5 bg-emerald-600 text-white rounded ml-auto">PRIMARY</span>
            </div>
            <div class="flex items-center justify-between mt-3 pt-3 border-t border-emerald-200">
              <span class="text-sm font-medium text-emerald-800">→ J3 (Activation)</span>
              <span class="text-xs px-2 py-1 bg-emerald-200 text-emerald-800 rounded">Invest in transformation</span>
            </div>
          </div>
          <div class="rounded-xl border-2 border-blue-300 bg-blue-50 p-4">
            <div class="flex items-center gap-3 mb-2">
              <div class="w-10 h-10 rounded-lg bg-blue-600 text-white flex items-center justify-center font-bold">C</div>
              <div>
                <p class="font-semibold text-blue-900">High Readiness + Low Value</p>
                <p class="text-xs text-blue-700">Score: 70-100</p>
              </div>
            </div>
            <div class="flex items-center justify-between mt-3 pt-3 border-t border-blue-200">
              <span class="text-sm font-medium text-blue-800">→ J2 (Acceleration)</span>
              <span class="text-xs px-2 py-1 bg-blue-200 text-blue-800 rounded">Quick activation sprint</span>
            </div>
          </div>
          <div class="rounded-xl border-2 border-slate-300 bg-slate-50 p-4">
            <div class="flex items-center gap-3 mb-2">
              <div class="w-10 h-10 rounded-lg bg-slate-600 text-white flex items-center justify-center font-bold">D</div>
              <div>
                <p class="font-semibold text-slate-900">Low Readiness + Low Value</p>
                <p class="text-xs text-slate-700">Score: 0-39</p>
              </div>
            </div>
            <div class="flex items-center justify-between mt-3 pt-3 border-t border-slate-200">
              <span class="text-sm font-medium text-slate-800">→ J1 (Foundation)</span>
              <span class="text-xs px-2 py-1 bg-slate-200 text-slate-700 rounded">Diagnostic only, monitor</span>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-slate-900 rounded-xl p-4 text-white">
        <div class="flex items-start gap-3">
          <i data-lucide="info" class="w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"></i>
          <div>
            <h4 class="font-semibold text-sm mb-1">Assessment Drives Everything</h4>
            <p class="text-slate-300 text-sm">The diagnostic ($50-60K) generates the IPE Readiness Score, which produces the investment path hypothesis. This systematic routing ensures we invest services capacity where it creates the most value while avoiding over-investment in accounts that aren't ready.</p>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
        <i data-lucide="git-branch" class="w-5 h-5 text-emerald-600"></i>
        Investment Paths (J1-J4)
      </h2>
      <p class="text-slate-600 mb-4">Four paths to governed AI. The investment path is right-sized to customer readiness, capacity, and deployment requirements.</p>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-white rounded-xl border-2 border-slate-200 p-4">
          <div class="flex items-start gap-3">
            <div class="w-12 h-12 rounded-lg bg-slate-100 flex items-center justify-center font-bold text-slate-700">J1</div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h4 class="font-semibold">Foundation Path</h4>
                <span class="text-xs px-2 py-0.5 bg-slate-200 text-slate-600 rounded">~10% ARR</span>
              </div>
              <p class="text-sm text-slate-600 mb-2">For organizations without a system of record. Build before governing.</p>
              <p class="text-xs font-mono bg-slate-50 px-2 py-1 rounded text-slate-600">Diagnostic → Foundation → Governance</p>
              <div class="mt-2 flex items-center justify-between">
                <span class="text-sm font-semibold text-emerald-600">$50-60K → $350-450K</span>
                <span class="text-xs text-slate-500">D1, D2</span>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-xl border-2 border-blue-200 p-4">
          <div class="flex items-start gap-3">
            <div class="w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center font-bold text-blue-700">J2</div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h4 class="font-semibold">Acceleration Path</h4>
                <span class="text-xs px-2 py-0.5 bg-blue-200 text-blue-600 rounded">~5% ARR</span>
              </div>
              <p class="text-sm text-slate-600 mb-2">For mature orgs with sudden trigger. Fast activation, minimal services.</p>
              <p class="text-xs font-mono bg-slate-50 px-2 py-1 rounded text-slate-600">Diagnostic → Rapid Activation</p>
              <div class="mt-2 flex items-center justify-between">
                <span class="text-sm font-semibold text-emerald-600">$50K → $225-325K</span>
                <span class="text-xs text-slate-500">D1, D2</span>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-xl border-2 border-emerald-500 p-4 ring-2 ring-emerald-100">
          <div class="flex items-start gap-3">
            <div class="w-12 h-12 rounded-lg bg-emerald-100 flex items-center justify-center font-bold text-emerald-700 ring-2 ring-emerald-500">J3</div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h4 class="font-semibold">Activation Path</h4>
                <span class="text-xs px-2 py-0.5 bg-emerald-500 text-white rounded">PRIMARY</span>
                <span class="text-xs px-2 py-0.5 bg-emerald-200 text-emerald-700 rounded">~60% ARR</span>
              </div>
              <p class="text-sm text-slate-600 mb-2">For high-value accounts blocked on activation. Full transformation.</p>
              <p class="text-xs font-mono bg-slate-50 px-2 py-1 rounded text-slate-600">Diagnostic → (Phase 0) → Foundation → Activation → Intelligence</p>
              <div class="mt-2 flex items-center justify-between">
                <span class="text-sm font-semibold text-emerald-600">$740K - $1.6M</span>
                <span class="text-xs text-slate-500">D2, D3, D4</span>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-xl border-2 border-violet-200 p-4">
          <div class="flex items-start gap-3">
            <div class="w-12 h-12 rounded-lg bg-violet-100 flex items-center justify-center font-bold text-violet-700">J4</div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h4 class="font-semibold">Intelligence Path</h4>
                <span class="text-xs px-2 py-0.5 bg-violet-200 text-violet-600 rounded">~25% ARR</span>
              </div>
              <p class="text-sm text-slate-600 mb-2">For implemented accounts ready for AI enablement. Expansion-focused.</p>
              <p class="text-xs font-mono bg-slate-50 px-2 py-1 rounded text-slate-600">Diagnostic → MCP Activation → Expansion</p>
              <div class="mt-2 flex items-center justify-between">
                <span class="text-sm font-semibold text-emerald-600">$165-325K + ARR</span>
                <span class="text-xs text-slate-500">D1, D2, D3</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
        <i data-lucide="shield" class="w-5 h-5 text-amber-600"></i>
        Deployment Tiers (D1-D4)
      </h2>
      <p class="text-slate-600 mb-4">Deployment complexity is a deal accelerator, not a blocker—if priced and scoped correctly. Regulated industries need governed AI more urgently than anyone.</p>
      
      <div class="space-y-3">
        <div class="bg-white rounded-xl border-2 border-slate-200 p-4">
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 rounded-lg bg-slate-100 flex items-center justify-center font-bold text-slate-700">D1</div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h4 class="font-semibold">Cloud Standard</h4>
                <span class="text-xs text-slate-500">Tech, SaaS, Mid-market</span>
              </div>
              <div class="grid grid-cols-5 gap-4 text-sm mt-2">
                <div><p class="text-xs text-slate-500">Data Location</p><p class="text-slate-700">Multi-tenant</p></div>
                <div><p class="text-xs text-slate-500">Compliance</p><p class="text-slate-700">SOC 2</p></div>
                <div><p class="text-xs text-slate-500">Deploy Time</p><p class="text-slate-700">2-4 weeks</p></div>
                <div><p class="text-xs text-slate-500">Platform Premium</p><p class="text-slate-600">—</p></div>
                <div><p class="text-xs text-slate-500">Services Premium</p><p class="text-slate-600">—</p></div>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-xl border-2 border-blue-200 p-4">
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center font-bold text-blue-700">D2</div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h4 class="font-semibold">Cloud Dedicated</h4>
                <span class="text-xs text-slate-500">Enterprise, some regulated</span>
              </div>
              <div class="grid grid-cols-5 gap-4 text-sm mt-2">
                <div><p class="text-xs text-slate-500">Data Location</p><p class="text-slate-700">Single-tenant</p></div>
                <div><p class="text-xs text-slate-500">Compliance</p><p class="text-slate-700">SOC 2, GDPR</p></div>
                <div><p class="text-xs text-slate-500">Deploy Time</p><p class="text-slate-700">4-8 weeks</p></div>
                <div><p class="text-xs text-slate-500">Platform Premium</p><p class="font-semibold text-emerald-600">+25-40%</p></div>
                <div><p class="text-xs text-slate-500">Services Premium</p><p class="font-semibold text-emerald-600">+$50-100K</p></div>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-xl border-2 border-amber-200 p-4">
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center font-bold text-amber-700">D3</div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h4 class="font-semibold">Private Cloud</h4>
                <span class="text-xs text-slate-500">Financial Services, Healthcare</span>
                <span class="text-xs px-2 py-0.5 bg-amber-200 text-amber-700 rounded">Phase 0 Required</span>
              </div>
              <div class="grid grid-cols-5 gap-4 text-sm mt-2">
                <div><p class="text-xs text-slate-500">Data Location</p><p class="text-slate-700">Customer VPC</p></div>
                <div><p class="text-xs text-slate-500">Compliance</p><p class="text-slate-700">SOC 2, HIPAA, PCI-DSS</p></div>
                <div><p class="text-xs text-slate-500">Deploy Time</p><p class="text-slate-700">8-16 weeks</p></div>
                <div><p class="text-xs text-slate-500">Platform Premium</p><p class="font-semibold text-emerald-600">+50-75%</p></div>
                <div><p class="text-xs text-slate-500">Services Premium</p><p class="font-semibold text-emerald-600">+$175-275K</p></div>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-xl border-2 border-rose-200 p-4">
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 rounded-lg bg-rose-100 flex items-center justify-center font-bold text-rose-700">D4</div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h4 class="font-semibold">Self-Hosted</h4>
                <span class="text-xs text-slate-500">Defense, Government, High-security</span>
                <span class="text-xs px-2 py-0.5 bg-rose-200 text-rose-700 rounded">Phase 0 Required</span>
              </div>
              <div class="grid grid-cols-5 gap-4 text-sm mt-2">
                <div><p class="text-xs text-slate-500">Data Location</p><p class="text-slate-700">Customer data center</p></div>
                <div><p class="text-xs text-slate-500">Compliance</p><p class="text-slate-700">FedRAMP-ready, Custom</p></div>
                <div><p class="text-xs text-slate-500">Deploy Time</p><p class="text-slate-700">16-24+ weeks</p></div>
                <div><p class="text-xs text-slate-500">Platform Premium</p><p class="font-semibold text-emerald-600">+100%+</p></div>
                <div><p class="text-xs text-slate-500">Services Premium</p><p class="font-semibold text-emerald-600">+$350-550K</p></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
        <i data-lucide="layers" class="w-5 h-5 text-violet-600"></i>
        Maturity Model (Levels 1-5)
      </h2>
      <p class="text-slate-600 mb-4">Five levels from Fragmented to Intelligent. MCP unlocks at Level 5. Maturity determines readiness. Readiness determines investment path.</p>
      
      <div class="bg-white rounded-xl border p-4">
        <div class="flex items-center gap-2 overflow-x-auto pb-2">
          ${[
            { level: 1, name: 'Fragmented', mcp: 'locked', color: 'slate', desc: 'No system of record' },
            { level: 2, name: 'Emerging', mcp: 'locked', color: 'slate', desc: 'Initial system, limited adoption' },
            { level: 3, name: 'Operational', mcp: 'locked', color: 'blue', desc: 'System deployed, governance forming' },
            { level: 4, name: 'Governed', mcp: 'prep', color: 'amber', desc: 'Full governance, decision authority' },
            { level: 5, name: 'Intelligent', mcp: 'unlocked', color: 'emerald', desc: 'AI-assisted, MCP active' }
          ].map((m, i) => `
            <div class="flex-shrink-0 flex flex-col items-center ${i < 4 ? 'mr-2' : ''}">
              <div class="w-14 h-14 rounded-lg flex flex-col items-center justify-center ${m.color === 'slate' ? 'bg-slate-100' : m.color === 'blue' ? 'bg-blue-100' : m.color === 'amber' ? 'bg-amber-100' : 'bg-emerald-100'}">
                <span class="text-lg font-bold ${m.color === 'slate' ? 'text-slate-600' : m.color === 'blue' ? 'text-blue-600' : m.color === 'amber' ? 'text-amber-600' : 'text-emerald-600'}">${m.level}</span>
              </div>
              <p class="text-xs font-semibold mt-1 text-center">${m.name}</p>
              <p class="text-xs text-slate-500 text-center max-w-20">${m.desc}</p>
              <span class="text-xs px-2 py-0.5 rounded mt-1 ${m.mcp === 'locked' ? 'bg-slate-200 text-slate-600' : m.mcp === 'prep' ? 'bg-amber-200 text-amber-700' : 'bg-emerald-200 text-emerald-700'}">
                ${m.mcp === 'locked' ? 'MCP Locked' : m.mcp === 'prep' ? 'MCP Prep' : 'MCP Active'}
              </span>
            </div>
            ${i < 4 ? '<i data-lucide="arrow-right" class="w-4 h-4 text-slate-300 flex-shrink-0 mx-1"></i>' : ''}
          `).join('')}
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
        <i data-lucide="package" class="w-5 h-5 text-violet-600"></i>
        Service Offerings
      </h2>
      <p class="text-slate-600 mb-4">Standard packaged offerings mapped to investment paths. Each offering includes defined scope, deliverables, and success criteria.</p>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div class="bg-white rounded-xl border-2 border-slate-300 p-5">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center">
                <i data-lucide="search" class="w-5 h-5 text-slate-600"></i>
              </div>
              <div>
                <h4 class="font-semibold text-slate-900">IPE Readiness Diagnostic</h4>
                <p class="text-xs text-slate-500">Required first step for all paths</p>
              </div>
            </div>
            <span class="text-xs px-2 py-1 bg-slate-200 text-slate-700 rounded">ALL PATHS</span>
          </div>
          <p class="text-sm text-slate-600 mb-3">Current state baseline + gap analysis + investment path recommendation</p>
          <div class="flex items-center justify-between mb-3 pb-3 border-b border-slate-100">
            <span class="text-lg font-bold text-slate-900">$50-60K</span>
            <span class="text-sm text-slate-500">2-4 weeks</span>
          </div>
          <div class="space-y-1.5">
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-slate-400"></i>Stakeholder interviews</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-slate-400"></i>System audit</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-slate-400"></i>IPE Readiness Scorecard (0-100)</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-slate-400"></i>Prioritized investment roadmap</div>
          </div>
        </div>

        <div class="bg-white rounded-xl border-2 border-blue-300 p-5">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center">
                <i data-lucide="layers" class="w-5 h-5 text-blue-600"></i>
              </div>
              <div>
                <h4 class="font-semibold text-blue-900">Foundation Partnership</h4>
                <p class="text-xs text-blue-600">For Activation-Blocked accounts</p>
              </div>
            </div>
            <span class="text-xs px-2 py-1 bg-blue-200 text-blue-700 rounded">J1 / J3</span>
          </div>
          <p class="text-sm text-slate-600 mb-3">Build the system of record. Platform implementation + governance framework.</p>
          <div class="flex items-center justify-between mb-3 pb-3 border-b border-blue-100">
            <span class="text-lg font-bold text-blue-900">$350-450K</span>
            <span class="text-sm text-slate-500">16-20 weeks</span>
          </div>
          <div class="space-y-1.5">
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-blue-400"></i>Platform implementation</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-blue-400"></i>Governance framework</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-blue-400"></i>Team enablement</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-blue-400"></i>Production deployment</div>
          </div>
        </div>

        <div class="bg-white rounded-xl border-2 border-emerald-300 p-5">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center">
                <i data-lucide="zap" class="w-5 h-5 text-emerald-600"></i>
              </div>
              <div>
                <h4 class="font-semibold text-emerald-900">Activation Accelerator</h4>
                <p class="text-xs text-emerald-600">For Governance-Ready accounts</p>
              </div>
            </div>
            <span class="text-xs px-2 py-1 bg-emerald-200 text-emerald-700 rounded">J2 / J3</span>
          </div>
          <p class="text-sm text-slate-600 mb-3">Unlock trapped value. Control plane setup + signal instrumentation.</p>
          <div class="flex items-center justify-between mb-3 pb-3 border-b border-emerald-100">
            <span class="text-lg font-bold text-emerald-900">$225-325K</span>
            <span class="text-sm text-slate-500">12-16 weeks</span>
          </div>
          <div class="space-y-1.5">
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-emerald-400"></i>Control plane setup</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-emerald-400"></i>Signal instrumentation</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-emerald-400"></i>MCP integration</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-emerald-400"></i>ROI dashboard</div>
          </div>
        </div>

        <div class="bg-white rounded-xl border-2 border-violet-300 p-5">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center">
                <i data-lucide="brain" class="w-5 h-5 text-violet-600"></i>
              </div>
              <div>
                <h4 class="font-semibold text-violet-900">Intelligence Partnership</h4>
                <p class="text-xs text-violet-600">For Intelligence-Ready accounts</p>
              </div>
            </div>
            <span class="text-xs px-2 py-1 bg-violet-200 text-violet-700 rounded">J4</span>
          </div>
          <p class="text-sm text-slate-600 mb-3">Full IPE activation. MCP onboarding + AI workflow design.</p>
          <div class="flex items-center justify-between mb-3 pb-3 border-b border-violet-100">
            <span class="text-lg font-bold text-violet-900">$165-225K</span>
            <span class="text-sm text-slate-500">8-12 weeks</span>
          </div>
          <div class="space-y-1.5">
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-violet-400"></i>MCP onboarding</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-violet-400"></i>AI workflow design</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-violet-400"></i>Governance policies</div>
            <div class="flex items-center gap-2 text-xs text-slate-600"><i data-lucide="check" class="w-3 h-3 text-violet-400"></i>Analytics + reporting</div>
          </div>
        </div>
      </div>

      <div class="bg-amber-50 rounded-xl border border-amber-200 p-4">
        <h4 class="font-semibold text-amber-900 mb-3 flex items-center gap-2">
          <i data-lucide="shield-alert" class="w-4 h-4"></i>
          Phase 0: Deployment & Security (D3/D4 Only)
        </h4>
        <p class="text-sm text-amber-800 mb-3">For regulated industries requiring Private Cloud (D3) or Self-Hosted (D4) deployment, Phase 0 is mandatory before Foundation can begin.</p>
        <div class="grid grid-cols-2 gap-4">
          <div class="bg-white rounded-lg p-3 border border-amber-100">
            <div class="flex items-center justify-between mb-2">
              <span class="font-medium text-amber-900 text-sm">D3: Private Cloud</span>
              <span class="font-bold text-amber-800">+$175-275K</span>
            </div>
            <p class="text-xs text-slate-600">8-16 weeks | Customer VPC provisioning, security review, compliance validation</p>
          </div>
          <div class="bg-white rounded-lg p-3 border border-amber-100">
            <div class="flex items-center justify-between mb-2">
              <span class="font-medium text-amber-900 text-sm">D4: Self-Hosted</span>
              <span class="font-bold text-amber-800">+$350-550K</span>
            </div>
            <p class="text-xs text-slate-600">16-24+ weeks | On-premise deployment, custom security, FedRAMP preparation</p>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
        <i data-lucide="trending-up" class="w-5 h-5 text-emerald-600"></i>
        Commercial Framework
      </h2>
      
      <div class="bg-white rounded-xl border p-5 mb-4">
        <h3 class="font-semibold mb-3">Assessment → Investment Path</h3>
        <div class="flex items-center gap-3 overflow-x-auto pb-2">
          <div class="flex-shrink-0 rounded-lg p-4 min-w-48 bg-slate-100">
            <p class="text-xs font-semibold mb-1 text-slate-600">DIAGNOSTIC</p>
            <p class="text-xs text-slate-500 mb-2">2-4 weeks</p>
            <p class="text-sm text-slate-700 mb-2">Readiness Score + Gap Analysis + Deployment Tier</p>
            <p class="font-bold">$50-60K</p>
          </div>
          <i data-lucide="arrow-right" class="w-6 h-6 text-slate-400 flex-shrink-0"></i>
          <div class="flex-shrink-0 rounded-lg p-4 min-w-48 bg-blue-100">
            <p class="text-xs font-semibold mb-1 text-blue-600">INVESTMENT PATH</p>
            <p class="text-xs text-slate-500 mb-2">1 week</p>
            <p class="text-sm text-slate-700 mb-2">Prioritized Roadmap + Deployment-Adjusted Proposal</p>
            <p class="font-bold">Included</p>
          </div>
          <i data-lucide="arrow-right" class="w-6 h-6 text-slate-400 flex-shrink-0"></i>
          <div class="flex-shrink-0 rounded-lg p-4 min-w-48 bg-emerald-100">
            <p class="text-xs font-semibold mb-1 text-emerald-600">PARTNERSHIP</p>
            <p class="text-xs text-slate-500 mb-2">6-52 weeks</p>
            <p class="text-sm text-slate-700 mb-2">Phase 0 (if D3/D4) + Activation + Platform + Intelligence</p>
            <p class="font-bold">$350K-$2M+</p>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-xl border p-5 mb-4">
        <h3 class="font-semibold mb-3">Pricing Principles</h3>
        <div class="grid grid-cols-3 gap-4">
          <div class="bg-slate-50 rounded-lg p-3">
            <p class="text-emerald-600 text-xs font-semibold mb-1">Anchor on Value</p>
            <p class="text-slate-600 text-xs mb-2">Price reflects business outcomes, not hours consumed</p>
            <p class="text-slate-900 text-xs italic">"What's the cost of another year without governance?"</p>
          </div>
          <div class="bg-slate-50 rounded-lg p-3">
            <p class="text-emerald-600 text-xs font-semibold mb-1">Phase for Commitment</p>
            <p class="text-slate-600 text-xs mb-2">Break large deals into phases that build trust and prove value</p>
            <p class="text-slate-900 text-xs italic">Foundation ($400K) → Scale ($275K) → Expand ($165K/yr)</p>
          </div>
          <div class="bg-slate-50 rounded-lg p-3">
            <p class="text-emerald-600 text-xs font-semibold mb-1">Tier by Urgency</p>
            <p class="text-slate-600 text-xs mb-2">Premium pricing for fast timelines, standard for flexible ones</p>
            <p class="text-slate-900 text-xs italic">Standard: 20 weeks / Premium: 12 weeks (+30%)</p>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div class="bg-rose-50 rounded-xl border border-rose-200 p-4">
          <h3 class="font-semibold text-rose-800 mb-3 text-sm">Pricing Floors (Never Discount Below)</h3>
          <div class="space-y-1 text-sm text-rose-700">
            <p>• Diagnostic: $40K minimum</p>
            <p>• Foundation: $275K minimum</p>
            <p>• Platform ARR: $75K minimum</p>
            <p>• Phase 0 (D3): $125K minimum</p>
            <p>• Phase 0 (D4): $275K minimum</p>
          </div>
        </div>
        <div class="bg-emerald-50 rounded-xl border border-emerald-200 p-4">
          <h3 class="font-semibold text-emerald-800 mb-3 text-sm">Deal Requirements</h3>
          <div class="space-y-1 text-sm text-emerald-700">
            <p>• Executive sponsor identified</p>
            <p>• Engineering owner assigned</p>
            <p>• Success metrics agreed</p>
            <p>• Phase gates defined</p>
            <p>• Deployment tier confirmed</p>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
        <i data-lucide="cpu" class="w-5 h-5 text-blue-600"></i>
        The Control Plane (IPE v1) - Current Focus
      </h2>
      <div class="bg-blue-50 rounded-xl border border-blue-200 p-5">
        <p class="text-blue-800 mb-3">The Control Plane is intelligence <strong>configuration</strong>, <strong>management</strong>, and <strong>delivery</strong> to AI agents.</p>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <h4 class="font-semibold text-blue-900 text-sm mb-2">Definition of Done</h4>
            <ul class="text-sm text-blue-800 space-y-1">
              <li>• Control plane that ingests 2+ new sources (in addition to customer's Knapsack design system site)</li>
              <li>• Distribution of aggregated context via our MCP</li>
              <li>• Measurable improvement in AI generated output</li>
            </ul>
          </div>
          <div>
            <h4 class="font-semibold text-blue-900 text-sm mb-2">Release Criteria (GO / NO-GO)</h4>
            <p class="text-sm text-blue-800 italic">"Here is your output without the control plane [baseline]. Here, using the same prompt, is your output with 3 sources [improved]. Here is the metric that shows X% improvement."</p>
          </div>
        </div>
        <div class="mt-4 pt-4 border-t border-blue-200">
          <p class="text-xs text-blue-600 font-semibold">Q1 2026 Focus (to Mar 31):</p>
          <div class="flex flex-wrap gap-2 mt-2">
            <span class="text-xs px-2 py-1 bg-blue-200 text-blue-800 rounded">Source aggregation</span>
            <span class="text-xs px-2 py-1 bg-blue-200 text-blue-800 rounded">Turn sources on/off</span>
            <span class="text-xs px-2 py-1 bg-blue-200 text-blue-800 rounded">Flag source conflict</span>
            <span class="text-xs px-2 py-1 bg-slate-200 text-slate-600 rounded line-through">Source ranking (de-scoped)</span>
          </div>
        </div>
      </div>
    </section>

    <section class="bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl p-6 text-white">
      <h3 class="font-semibold mb-3 flex items-center gap-2">
        <i data-lucide="arrow-right-circle" class="w-5 h-5 text-emerald-400"></i>
        Ready to Explore Partnership Programs?
      </h3>
      <p class="text-slate-300 mb-4">Now that you understand the strategic framework, explore individual account pages to see how these concepts apply to specific customer partnerships.</p>
      <button onclick="setView('companies')" class="px-4 py-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white font-medium transition-all flex items-center gap-2">
        <i data-lucide="building-2" class="w-4 h-4"></i>
        View Partnership Programs
      </button>
    </section>
  `;
}

function renderOverview(company, tier, phases, isPNC) {
  return `
    <section class="bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm">
      <div class="bg-gradient-to-r from-slate-900 to-slate-800 text-white p-6">
        <div class="flex items-center gap-4 mb-4">
          <div class="w-14 h-14 bg-white/10 rounded-xl flex items-center justify-center">
            <i data-lucide="building-2" class="w-7 h-7"></i>
          </div>
          <div>
            <h1 class="text-2xl font-bold">${company.name} Partnership Program</h1>
            <p class="text-slate-300">${company.industry} | ${isPNC ? 'Ledger Design System Modernization' : 'Intelligent Product Engine Activation'}</p>
          </div>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
          <div class="bg-white/10 rounded-lg p-3">
            <p class="text-xs text-slate-400 mb-1">Investment Path</p>
            <p class="font-semibold">${company.journey} ${isPNC ? 'Modernization' : 'Activation'}</p>
          </div>
          <div class="bg-white/10 rounded-lg p-3">
            <p class="text-xs text-slate-400 mb-1">Deployment Tier</p>
            <p class="font-semibold">${company.deploymentTier}: ${company.deploymentName}</p>
          </div>
          <div class="bg-white/10 rounded-lg p-3">
            <p class="text-xs text-slate-400 mb-1">${isPNC ? 'Fixed Fee' : 'Total Contract Value'}</p>
            <p class="font-semibold text-emerald-400">${company.tcv}</p>
          </div>
          <div class="bg-white/10 rounded-lg p-3">
            <p class="text-xs text-slate-400 mb-1">Timeline</p>
            <p class="font-semibold">${company.timeline}</p>
          </div>
        </div>
      </div>
      <div class="p-6">
        <div class="bg-gradient-to-r from-emerald-50 to-emerald-100/50 border border-emerald-200 rounded-xl p-4">
          <div class="flex items-start gap-3">
            <i data-lucide="target" class="w-6 h-6 text-emerald-600 flex-shrink-0 mt-0.5"></i>
            <div>
              <h3 class="font-semibold text-emerald-900 mb-1">Shared Objective</h3>
              <p class="text-emerald-800 text-sm">${isPNC ? `Advance PNC's Ledger Design System maturity from Level 3 to Level 4 through token strategy, governance frameworks, and a durable operating model.` : `Enable ${company.name} to operate product systems as a governed engine—where change is safe, fast, and measurable across all platforms.`}</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    ${isPNC ? `
    <section class="bg-blue-50 rounded-xl border border-blue-200 p-4">
      <h3 class="font-semibold text-blue-900 mb-3 flex items-center gap-2">
        <i data-lucide="file-check" class="w-5 h-5"></i>
        SOW Workstreams
      </h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
        <div class="bg-white rounded-lg p-3 border border-blue-100">
          <p class="font-semibold text-blue-800 text-sm">Workstream A</p>
          <p class="text-xs text-blue-900 font-medium">Token Strategy & Governance</p>
          <p class="text-xs text-slate-600 mt-1">Color, spacing, density, typography tokens; token education; governance framework</p>
        </div>
        <div class="bg-white rounded-lg p-3 border border-blue-100">
          <p class="font-semibold text-blue-800 text-sm">Workstream B</p>
          <p class="text-xs text-blue-900 font-medium">Modernization Enablement</p>
          <p class="text-xs text-slate-600 mt-1">Migration playbooks, 1-2 pilot migrations, dependency documentation, bi-weekly office hours</p>
        </div>
        <div class="bg-white rounded-lg p-3 border border-blue-100">
          <p class="font-semibold text-blue-800 text-sm">Workstream C</p>
          <p class="text-xs text-blue-900 font-medium">Design System Creation & Support</p>
          <p class="text-xs text-slate-600 mt-1">Operating model, documentation standards, governance RACI, onboarding assets</p>
        </div>
      </div>
    </section>` : ''}

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4">Current State Assessment</h2>
      <div class="bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm">
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead class="bg-slate-50">
              <tr>
                <th class="text-left px-4 py-3 text-sm font-semibold text-slate-600">Dimension</th>
                <th class="text-left px-4 py-3 text-sm font-semibold text-slate-600">Current State</th>
                <th class="text-left px-4 py-3 text-sm font-semibold text-emerald-600">Target State</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-100">
              ${company.currentState.map(([dim, current, target]) => `
                <tr class="hover:bg-slate-50/50">
                  <td class="px-4 py-3 font-medium text-slate-900 text-sm">${dim}</td>
                  <td class="px-4 py-3 text-slate-600 text-sm">${current}</td>
                  <td class="px-4 py-3 text-emerald-700 font-medium text-sm">${target}</td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
        <div class="p-4 bg-slate-900 text-white">
          <div class="flex items-start gap-3">
            <i data-lucide="layers" class="w-5 h-5 text-emerald-400 flex-shrink-0 mt-0.5"></i>
            <div>
              <h3 class="font-semibold text-sm mb-1">Key Insight</h3>
              <p class="text-slate-300 text-sm">${company.keyInsight}</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4">Deployment & Compliance</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="${tier.bg} rounded-xl border ${tier.border} p-4">
          <div class="flex items-center gap-3 mb-3">
            <i data-lucide="${company.deploymentTier === 'D2' ? 'cloud' : company.deploymentTier === 'D3' ? 'database' : 'server'}" class="w-6 h-6 ${tier.text}"></i>
            <div>
              <h3 class="font-semibold ${tier.text}">${company.deploymentTier}: ${tier.name}</h3>
              <p class="text-sm text-slate-600">Deployment Timeline: ${tier.time}</p>
            </div>
          </div>
          ${!isPNC ? `<p class="text-sm text-slate-600 mb-2">Services Premium: <span class="font-semibold">${tier.premium}</span></p>` : `<p class="text-sm text-slate-600 mb-2">Services: <span class="font-semibold">Advisory & Enablement (Remote Delivery)</span></p>`}
          ${company.deploymentTier !== 'D2' && !isPNC ? `
          <div class="bg-amber-100 border border-amber-300 rounded-lg p-3 mt-3">
            <div class="flex items-center gap-2">
              <i data-lucide="alert-triangle" class="w-4 h-4 text-amber-600"></i>
              <p class="text-sm font-medium text-amber-800">Phase 0 Required</p>
            </div>
            <p class="text-xs text-amber-700 mt-1">Security review, environment provisioning, and compliance validation required before Phase 1.</p>
          </div>` : ''}
        </div>
        <div class="bg-white rounded-xl border border-slate-200 p-4">
          <h3 class="font-semibold text-slate-900 mb-3 flex items-center gap-2">
            <i data-lucide="shield" class="w-5 h-5 text-slate-600"></i>
            Compliance Requirements
          </h3>
          <div class="flex flex-wrap gap-2">
            ${company.compliance.map(cert => `<span class="px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm font-medium">${cert}</span>`).join('')}
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4">Partnership Objectives</h2>
      <div class="bg-white rounded-xl border border-slate-200 p-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          ${company.objectives.map((obj, i) => `
            <div class="flex items-start gap-3 p-3 bg-slate-50 rounded-lg">
              <div class="w-6 h-6 rounded-full bg-emerald-100 text-emerald-700 flex items-center justify-center text-sm font-bold flex-shrink-0">${i + 1}</div>
              <p class="text-sm text-slate-700">${obj}</p>
            </div>
          `).join('')}
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4">Engagement Phases</h2>
      <div class="bg-slate-900 rounded-xl p-4 mb-4">
        <div class="flex items-center justify-between overflow-x-auto pb-2 gap-2">
          ${phases.map((phase, i) => `
            <button onclick="togglePhase(${phase.id})" class="flex flex-col items-center gap-2 px-3 py-2 rounded-lg transition-all min-w-[100px] ${activePhase === phase.id ? 'phase-btn-active' : 'hover:bg-white/5'}">
              <div class="w-10 h-10 rounded-full ${colorClasses[phase.color].accent} flex items-center justify-center">
                <i data-lucide="${phase.icon}" class="w-5 h-5 text-white"></i>
              </div>
              <div class="text-center">
                <p class="text-white font-semibold text-xs">Phase ${phase.id}</p>
                <p class="text-slate-400 text-xs truncate max-w-[80px]">${phase.name.split(' ')[0]}</p>
                ${phase.subtitle ? `<p class="text-slate-500 text-xs">${phase.subtitle.split(' ')[0]}</p>` : ''}
              </div>
              <div class="text-xs px-2 py-0.5 rounded ${phase.mcp === 'locked' ? 'bg-rose-500/20 text-rose-300' : phase.mcp === 'prep' ? 'bg-amber-500/20 text-amber-300' : 'bg-emerald-500/20 text-emerald-300'}">
                ${phase.mcp === 'locked' ? 'MCP Locked' : phase.mcp === 'prep' ? 'MCP Prep' : 'MCP Active'}
              </div>
            </button>
            ${i < phases.length - 1 ? '<i data-lucide="arrow-right" class="w-4 h-4 text-slate-600 flex-shrink-0"></i>' : ''}
          `).join('')}
        </div>
      </div>

      <div class="space-y-3">
        ${phases.map(phase => `
          <div class="bg-white rounded-xl border overflow-hidden transition-all shadow-sm ${activePhase === phase.id ? colorClasses[phase.color].border + ' shadow-lg' : 'border-slate-200'}">
            <button onclick="togglePhase(${phase.id})" class="w-full p-4 text-left flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg ${colorClasses[phase.color].bg} flex items-center justify-center">
                <i data-lucide="${phase.icon}" class="w-5 h-5 ${colorClasses[phase.color].text}"></i>
              </div>
              <div class="flex-1 min-w-0">
                <h3 class="font-semibold text-slate-900">Phase ${phase.id}: ${phase.name} ${phase.subtitle ? `<span class="text-slate-500 font-normal text-sm">(${phase.subtitle})</span>` : ''}</h3>
                <p class="text-slate-500 text-sm truncate">${phase.goal}</p>
              </div>
              <i data-lucide="chevron-right" class="w-5 h-5 text-slate-400 transition-transform flex-shrink-0 ${activePhase === phase.id ? 'rotate-90' : ''}"></i>
            </button>
            ${activePhase === phase.id ? `
              <div class="px-4 pb-4 border-t border-slate-100">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 pt-4">
                  <div>
                    <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Accomplishments</h4>
                    <ul class="space-y-1">
                      ${phase.accomplishments.map(item => `
                        <li class="flex items-start gap-2 text-sm text-slate-700">
                          <i data-lucide="check-circle-2" class="w-4 h-4 ${colorClasses[phase.color].text} flex-shrink-0 mt-0.5"></i>
                          <span>${item}</span>
                        </li>
                      `).join('')}
                    </ul>
                  </div>
                  <div>
                    <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Exit Criteria</h4>
                    <ul class="space-y-1">
                      ${phase.exitCriteria.map(item => `
                        <li class="flex items-start gap-2 text-sm text-slate-700">
                          <i data-lucide="circle" class="w-4 h-4 text-slate-300 flex-shrink-0 mt-0.5"></i>
                          <span>${item}</span>
                        </li>
                      `).join('')}
                    </ul>
                  </div>
                  <div>
                    <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Deliverables</h4>
                    <div class="flex flex-wrap gap-1">
                      ${phase.deliverables.map(item => `<span class="px-2 py-1 rounded text-xs font-medium ${colorClasses[phase.color].bg} ${colorClasses[phase.color].text}">${item}</span>`).join('')}
                    </div>
                  </div>
                </div>
              </div>
            ` : ''}
          </div>
        `).join('')}
      </div>
    </section>

    ${isPNC ? `
    <section class="bg-amber-50 rounded-xl border border-amber-200 p-4">
      <h3 class="font-semibold text-amber-900 mb-3 flex items-center gap-2">
        <i data-lucide="calendar" class="w-5 h-5"></i>
        Governance Cadence
      </h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
        <div class="bg-white rounded-lg p-3 border border-amber-100">
          <p class="font-semibold text-amber-800 text-sm">Weekly</p>
          <p class="text-xs text-slate-600">Working Sessions (Design & Engineering Leads)</p>
        </div>
        <div class="bg-white rounded-lg p-3 border border-amber-100">
          <p class="font-semibold text-amber-800 text-sm">Bi-weekly</p>
          <p class="text-xs text-slate-600">Status Reviews (PNC + Knapsack Leads)</p>
        </div>
        <div class="bg-white rounded-lg p-3 border border-amber-100">
          <p class="font-semibold text-amber-800 text-sm">Monthly</p>
          <p class="text-xs text-slate-600">Steering Reviews (Executive Sponsors)</p>
        </div>
        <div class="bg-white rounded-lg p-3 border border-amber-100">
          <p class="font-semibold text-amber-800 text-sm">Week 12</p>
          <p class="text-xs text-slate-600">Adaptation Gate (Core Stakeholders)</p>
        </div>
      </div>
    </section>` : ''}

    <section>
      <h2 class="text-xl font-bold text-slate-900 mb-4">Engagement Model</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-emerald-50 rounded-xl border border-emerald-200 p-4">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-8 h-8 rounded-lg bg-emerald-600 flex items-center justify-center">
              <i data-lucide="cpu" class="w-4 h-4 text-white"></i>
            </div>
            <h3 class="font-semibold text-emerald-900">Knapsack Commitment</h3>
          </div>
          <div class="space-y-2">
            ${(isPNC ? [
              { role: 'Program Oversight', desc: 'Progress tracking, risk identification, mitigation planning' },
              { role: 'Advisory Services', desc: 'Token strategy, governance framework, operating model' },
              { role: 'Enablement Support', desc: 'Migration playbooks, office hours, knowledge transfer' }
            ] : [
              { role: 'Principal Ownership', desc: 'Program authority and strategic alignment' },
              { role: 'Forward-Deployed Engineering', desc: 'Hands-on technical enablement' },
              { role: 'Change Enablement', desc: 'Governance and adoption support' }
            ]).map(item => `
              <div class="bg-white rounded-lg p-3">
                <p class="font-medium text-emerald-900 text-sm">${item.role}</p>
                <p class="text-xs text-emerald-700">${item.desc}</p>
              </div>
            `).join('')}
          </div>
        </div>
        <div class="bg-slate-100 rounded-xl border border-slate-200 p-4">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-8 h-8 rounded-lg bg-slate-700 flex items-center justify-center">
              <i data-lucide="building-2" class="w-4 h-4 text-white"></i>
            </div>
            <h3 class="font-semibold text-slate-900">${company.name} Partnership</h3>
          </div>
          <div class="space-y-2">
            ${(isPNC ? [
              { role: 'Stakeholder Access', desc: 'Timely access to stakeholders, systems, documentation' },
              { role: 'Pilot Team Assignment', desc: 'Dedicated teams for validation activities' },
              { role: 'Feedback & Approvals', desc: 'Timely decisions within agreed review windows' }
            ] : [
              { role: 'Executive Sponsorship', desc: 'Strategic decisions and resource allocation' },
              { role: 'Platform Ownership', desc: 'Technical authority and engineering commitment' },
              { role: 'Governance Participation', desc: 'Cross-system decision-making engagement' }
            ]).map(item => `
              <div class="bg-white rounded-lg p-3">
                <p class="font-medium text-slate-900 text-sm">${item.role}</p>
                <p class="text-xs text-slate-600">${item.desc}</p>
              </div>
            `).join('')}
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl p-6 text-white">
        <div class="flex items-start gap-4">
          <i data-lucide="handshake" class="w-8 h-8 text-emerald-400 flex-shrink-0"></i>
          <div>
            <h3 class="font-semibold mb-2">Partnership Philosophy</h3>
            <p class="text-slate-300 text-sm italic leading-relaxed">
              ${isPNC ? `"All services are advisory and enablement-focused. Component build ownership and production deployment remain the responsibility of PNC. Our goal is to build a durable operating model that enables PNC teams to operate independently."` : `"We're not here to deliver features or AI experiments. We're here to help ${company.name} operate product systems as a governed engine. That means stabilizing first, governing second, executing third—and only then adding intelligence."`}
            </p>
          </div>
        </div>
      </div>
    </section>
  `;
}

function renderBattleCard(company, isPNC) {
  return `
    <section class="bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm">
      <div class="bg-gradient-to-r from-slate-800 to-slate-700 text-white p-4">
        <div class="flex items-center gap-3">
          <i data-lucide="flag" class="w-6 h-6"></i>
          <div>
            <h1 class="text-xl font-bold">${company.name} Battle Card</h1>
            <p class="text-slate-300 text-sm">${company.industry} | ${company.journey} ${isPNC ? 'Modernization' : 'Activation'} Path</p>
          </div>
        </div>
      </div>
      <div class="p-4 grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-emerald-50 rounded-lg p-4 border border-emerald-200">
          <h3 class="font-semibold text-emerald-900 mb-2 text-sm">Ideal Buyer</h3>
          <p class="text-sm text-emerald-800">${company.battleCard.idealBuyer}</p>
        </div>
        <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
          <h3 class="font-semibold text-blue-900 mb-2 text-sm">${isPNC ? 'Fixed Fee' : 'TCV Range'}</h3>
          <p class="text-sm text-blue-800 font-mono">${company.tcv}</p>
        </div>
        <div class="bg-violet-50 rounded-lg p-4 border border-violet-200">
          <h3 class="font-semibold text-violet-900 mb-2 text-sm">Timeline</h3>
          <p class="text-sm text-violet-800">${company.timeline}</p>
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2">
        <i data-lucide="alert-triangle" class="w-5 h-5 text-rose-500"></i>
        Pain Points to Probe
      </h2>
      <div class="bg-white rounded-xl border border-slate-200 p-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          ${company.battleCard.painPoints.map((pain, i) => `
            <div class="flex items-start gap-3 p-3 bg-rose-50 rounded-lg border border-rose-100">
              <div class="w-5 h-5 rounded-full bg-rose-200 text-rose-700 flex items-center justify-center text-xs font-bold flex-shrink-0">${i + 1}</div>
              <p class="text-sm text-rose-900">${pain}</p>
            </div>
          `).join('')}
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2">
        <i data-lucide="help-circle" class="w-5 h-5 text-blue-500"></i>
        Discovery Questions
      </h2>
      <div class="bg-white rounded-xl border border-slate-200 p-4">
        <div class="space-y-3">
          ${company.battleCard.discoveryQuestions.map((question, i) => `
            <div class="flex items-start gap-3 p-3 bg-blue-50 rounded-lg border border-blue-100">
              <div class="w-6 h-6 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold flex-shrink-0">Q${i + 1}</div>
              <p class="text-sm text-slate-800">${question}</p>
            </div>
          `).join('')}
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2">
        <i data-lucide="crosshair" class="w-5 h-5 text-emerald-500"></i>
        Competitive Landscape
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-white rounded-xl border border-slate-200 p-4">
          <h3 class="font-semibold text-slate-700 mb-3 text-sm">Competitors</h3>
          <div class="space-y-2">
            ${company.battleCard.competitors.map(comp => `
              <div class="flex items-center gap-2 p-2 bg-slate-50 rounded-lg">
                <div class="w-2 h-2 rounded-full bg-slate-400"></div>
                <p class="text-sm text-slate-700">${comp}</p>
              </div>
            `).join('')}
          </div>
        </div>
        <div class="bg-emerald-50 rounded-xl border border-emerald-200 p-4">
          <h3 class="font-semibold text-emerald-800 mb-3 text-sm">Our Differentiators</h3>
          <div class="space-y-2">
            ${company.battleCard.differentiators.map(diff => `
              <div class="flex items-center gap-2 p-2 bg-white rounded-lg">
                <i data-lucide="check-circle-2" class="w-4 h-4 text-emerald-600"></i>
                <p class="text-sm text-emerald-900">${diff}</p>
              </div>
            `).join('')}
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2">
        <i data-lucide="message-square" class="w-5 h-5 text-amber-500"></i>
        Objection Handling
      </h2>
      <div class="bg-white rounded-xl border border-slate-200 overflow-hidden">
        ${company.battleCard.objections.map((obj, i) => `
          <div class="p-4 ${i > 0 ? 'border-t border-slate-100' : ''}">
            <div class="flex items-start gap-3 mb-3">
              <div class="px-2 py-1 bg-amber-100 text-amber-800 rounded text-xs font-semibold">OBJECTION</div>
              <p class="text-sm text-slate-800 font-medium">"${obj.objection}"</p>
            </div>
            <div class="flex items-start gap-3 ml-6">
              <div class="px-2 py-1 bg-emerald-100 text-emerald-800 rounded text-xs font-semibold">RESPONSE</div>
              <p class="text-sm text-slate-700">${obj.response}</p>
            </div>
          </div>
        `).join('')}
      </div>
    </section>

    <section>
      <h2 class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2">
        <i data-lucide="bar-chart-3" class="w-5 h-5 text-violet-500"></i>
        Success Metrics
      </h2>
      <div class="bg-white rounded-xl border border-slate-200 p-4">
        <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
          ${company.battleCard.successMetrics.map(metric => `
            <div class="p-3 bg-violet-50 rounded-lg border border-violet-100 text-center">
              <p class="text-sm text-violet-900 font-medium">${metric}</p>
            </div>
          `).join('')}
        </div>
      </div>
    </section>

    ${isPNC ? `
    <section class="bg-slate-100 rounded-xl border border-slate-200 p-4">
      <h3 class="font-semibold text-slate-900 mb-3 text-sm">SOW Exclusions (Out of Scope)</h3>
      <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
        ${['Full-scale product migrations', 'Net-new component development', 'Platform engineering/production deployment', 'Custom tooling outside Knapsack platform', 'Project management tool administration', 'PII/PHI/PCI data access'].map(item => `
          <div class="flex items-center gap-2 p-2 bg-white rounded-lg text-xs text-slate-600">
            <div class="w-1.5 h-1.5 rounded-full bg-slate-400"></div>
            ${item}
          </div>
        `).join('')}
      </div>
    </section>` : ''}

    <section>
      <div class="bg-slate-900 rounded-xl p-4">
        <h3 class="text-white font-semibold mb-3 text-sm">Quick Reference</h3>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">
          <div>
            <p class="text-slate-400 text-xs">Deployment</p>
            <p class="text-white font-medium">${company.deploymentTier}: ${company.deploymentName}</p>
          </div>
          <div>
            <p class="text-slate-400 text-xs">Journey</p>
            <p class="text-white font-medium">${company.journey} ${isPNC ? 'Modernization' : 'Activation'}</p>
          </div>
          <div>
            <p class="text-slate-400 text-xs">${isPNC ? 'Delivery Model' : 'Phase 0'}</p>
            <p class="text-white font-medium">${isPNC ? 'Remote Advisory' : (company.deploymentTier !== 'D2' ? 'Required' : 'Not Required')}</p>
          </div>
          <div>
            <p class="text-slate-400 text-xs">Key Compliance</p>
            <p class="text-white font-medium">${company.compliance.slice(0, 2).join(', ')}</p>
          </div>
        </div>
      </div>
    </section>
  `;
}

document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>